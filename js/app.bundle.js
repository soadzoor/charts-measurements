(()=>{var In=new Date,jn=new Date;function Y(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return t(a=new Date(+a)),a},i.ceil=function(a){return t(a=new Date(a-1)),e(a,1),t(a),a},i.round=function(a){var o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=function(a,o){return e(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,s){var u=[],l;if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return u;do u.push(l=new Date(+a)),e(a,s),t(a);while(l<a&&a<o);return u},i.filter=function(a){return Y(function(o){if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},function(o,s){if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););})},r&&(i.count=function(a,o){return In.setTime(+a),jn.setTime(+o),t(In),t(jn),Math.floor(r(In,jn))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?function(o){return n(o)%a==0}:function(o){return i.count(0,o)%a==0}):i}),i}var jr=Y(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});jr.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Y(function(e){e.setTime(Math.floor(e/t)*t)},function(e,r){e.setTime(+e+r*t)},function(e,r){return(r-e)/t}):jr};var xa=jr,sp=jr.range;var At=1e3,ht=At*60,kt=ht*60,It=kt*24,$e=It*7,On=It*30,Or=It*365;var _a=Y(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*At)},function(t,e){return(e-t)/At},function(t){return t.getUTCSeconds()}),Vt=_a,ya=_a.range;var ba=Y(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*At)},function(t,e){t.setTime(+t+e*ht)},function(t,e){return(e-t)/ht},function(t){return t.getMinutes()}),He=ba,cl=ba.range;var Ta=Y(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*At-t.getMinutes()*ht)},function(t,e){t.setTime(+t+e*kt)},function(t,e){return(e-t)/kt},function(t){return t.getHours()}),Ue=Ta,fl=Ta.range;var wa=Y(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ht)/It,t=>t.getDate()-1),Kt=wa,hl=wa.range;function le(t){return Y(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,r){e.setDate(e.getDate()+r*7)},function(e,r){return(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ht)/$e})}var Ht=le(0),Ae=le(1),$a=le(2),Aa=le(3),Qt=le(4),Sa=le(5),ka=le(6),Ca=Ht.range,dl=Ae.range,gl=$a.range,pl=Aa.range,vl=Qt.range,ml=Sa.range,xl=ka.range;var Ma=Y(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),Ge=Ma,_l=Ma.range;var Fn=Y(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Fn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Y(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,r){e.setFullYear(e.getFullYear()+r*t)})};var Rt=Fn,yl=Fn.range;var Ra=Y(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*ht)},function(t,e){return(e-t)/ht},function(t){return t.getUTCMinutes()}),Ea=Ra,Ep=Ra.range;var La=Y(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*kt)},function(t,e){return(e-t)/kt},function(t){return t.getUTCHours()}),Da=La,jp=La.range;var Ia=Y(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/It},function(t){return t.getUTCDate()-1}),Se=Ia,bl=Ia.range;function ce(t){return Y(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCDate(e.getUTCDate()+r*7)},function(e,r){return(r-e)/$e})}var fe=ce(0),ke=ce(1),ja=ce(2),Oa=ce(3),Jt=ce(4),Fa=ce(5),za=ce(6),Pa=fe.range,Tl=ke.range,wl=ja.range,$l=Oa.range,Al=Jt.range,Sl=Fa.range,kl=za.range;var Na=Y(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),Xa=Na,Vp=Na.range;var zn=Y(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});zn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Y(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r*t)})};var Ut=zn,Cl=zn.range;function Fr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ce(t){let e=t,r=t;t.length===1&&(e=(o,s)=>t(o)-s,r=Ml(t));function n(o,s,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){let c=u+l>>>1;r(o[c],s)<0?u=c+1:l=c}return u}function i(o,s,u,l){for(u==null&&(u=0),l==null&&(l=o.length);u<l;){let c=u+l>>>1;r(o[c],s)>0?l=c:u=c+1}return u}function a(o,s,u,l){u==null&&(u=0),l==null&&(l=o.length);let c=n(o,s,u,l-1);return c>u&&e(o[c-1],s)>-e(o[c],s)?c-1:c}return{left:n,center:a,right:i}}function Ml(t){return(e,r)=>Fr(t(e),r)}function Ba(t){return t===null?NaN:+t}var Ya=Ce(Fr),Va=Ya.right,Rl=Ya.left,El=Ce(Ba).center,Pn=Va;var Nn=Math.sqrt(50),Xn=Math.sqrt(10),Bn=Math.sqrt(2);function Me(t,e,r){var n,i=-1,a,o,s;if(e=+e,t=+t,r=+r,t===e&&r>0)return[t];if((n=e<t)&&(a=t,t=e,e=a),(s=zr(t,e,r))===0||!isFinite(s))return[];if(s>0){let u=Math.round(t/s),l=Math.round(e/s);for(u*s<t&&++u,l*s>e&&--l,o=new Array(a=l-u+1);++i<a;)o[i]=(u+i)*s}else{s=-s;let u=Math.round(t*s),l=Math.round(e*s);for(u/s<t&&++u,l/s>e&&--l,o=new Array(a=l-u+1);++i<a;)o[i]=(u+i)/s}return n&&o.reverse(),o}function zr(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,i);return i>=0?(a>=Nn?10:a>=Xn?5:a>=Bn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Nn?10:a>=Xn?5:a>=Bn?2:1)}function Re(t,e,r){var n=Math.abs(e-t)/Math.max(0,r),i=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/i;return a>=Nn?i*=10:a>=Xn?i*=5:a>=Bn&&(i*=2),e<t?-i:i}function Ha(t,e,r,n,i,a){let o=[[Vt,1,At],[Vt,5,5*At],[Vt,15,15*At],[Vt,30,30*At],[a,1,ht],[a,5,5*ht],[a,15,15*ht],[a,30,30*ht],[i,1,kt],[i,3,3*kt],[i,6,6*kt],[i,12,12*kt],[n,1,It],[n,2,2*It],[r,1,$e],[e,1,On],[e,3,3*On],[t,1,Or]];function s(l,c,f){let h=c<l;h&&([l,c]=[c,l]);let d=f&&typeof f.range=="function"?f:u(l,c,f),g=d?d.range(l,+c+1):[];return h?g.reverse():g}function u(l,c,f){let h=Math.abs(c-l)/f,d=Ce(([,,m])=>m).right(o,h);if(d===o.length)return t.every(Re(l/Or,c/Or,f));if(d===0)return xa.every(Math.max(Re(l,c,f),1));let[g,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return g.every(p)}return[s,u]}var[Ll,Dl]=Ha(Ut,Xa,fe,Se,Da,Ea),[Yn,Vn]=Ha(Rt,Ge,Ht,Kt,Ue,He);function Hn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Un(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function We(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Gn(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,l=qe(i),c=Ze(i),f=qe(a),h=Ze(a),d=qe(o),g=Ze(o),p=qe(s),m=Ze(s),_=qe(u),y=Ze(u),T={a:q,A:J,b:j,B:ut,c:null,d:Ka,e:Ka,f:Jl,g:lc,G:fc,H:Zl,I:Kl,j:Ql,L:Qa,m:tc,M:ec,p:V,q:rt,Q:ro,s:no,S:rc,u:nc,U:ic,V:ac,w:oc,W:sc,x:null,X:null,y:uc,Y:cc,Z:hc,"%":eo},x={a:wt,A:gt,b:S,B:I,c:null,d:Ja,e:Ja,f:vc,g:Sc,G:Cc,H:dc,I:gc,j:pc,L:to,m:mc,M:xc,p:nt,q:_t,Q:ro,s:no,S:_c,u:yc,U:bc,V:Tc,w:wc,W:$c,x:null,X:null,y:Ac,Y:kc,Z:Mc,"%":eo},$={a:O,A:k,b:M,B:L,c:E,d:qa,e:qa,f:Ul,g:Wa,G:Ga,H:Za,I:Za,j:Bl,L:Hl,m:Xl,M:Yl,p:D,q:Nl,Q:Wl,s:ql,S:Vl,u:jl,U:Ol,V:Fl,w:Il,W:zl,x:B,X:W,y:Wa,Y:Ga,Z:Pl,"%":Gl};T.x=b(r,T),T.X=b(n,T),T.c=b(e,T),x.x=b(r,x),x.X=b(n,x),x.c=b(e,x);function b(R,z){return function(N){var A=[],st=-1,X=0,tt=R.length,pt,Yt,Mt;for(N instanceof Date||(N=new Date(+N));++st<tt;)R.charCodeAt(st)===37&&(A.push(R.slice(X,st)),(Yt=Ua[pt=R.charAt(++st)])!=null?pt=R.charAt(++st):Yt=pt==="e"?" ":"0",(Mt=z[pt])&&(pt=Mt(N,Yt)),A.push(pt),X=st+1);return A.push(R.slice(X,st)),A.join("")}}function w(R,z){return function(N){var A=We(1900,void 0,1),st=C(A,R,N+="",0),X,tt;if(st!=N.length)return null;if("Q"in A)return new Date(A.Q);if("s"in A)return new Date(A.s*1e3+("L"in A?A.L:0));if(z&&!("Z"in A)&&(A.Z=0),"p"in A&&(A.H=A.H%12+A.p*12),A.m===void 0&&(A.m="q"in A?A.q:0),"V"in A){if(A.V<1||A.V>53)return null;"w"in A||(A.w=1),"Z"in A?(X=Un(We(A.y,0,1)),tt=X.getUTCDay(),X=tt>4||tt===0?ke.ceil(X):ke(X),X=Se.offset(X,(A.V-1)*7),A.y=X.getUTCFullYear(),A.m=X.getUTCMonth(),A.d=X.getUTCDate()+(A.w+6)%7):(X=Hn(We(A.y,0,1)),tt=X.getDay(),X=tt>4||tt===0?Ae.ceil(X):Ae(X),X=Kt.offset(X,(A.V-1)*7),A.y=X.getFullYear(),A.m=X.getMonth(),A.d=X.getDate()+(A.w+6)%7)}else("W"in A||"U"in A)&&("w"in A||(A.w="u"in A?A.u%7:"W"in A?1:0),tt="Z"in A?Un(We(A.y,0,1)).getUTCDay():Hn(We(A.y,0,1)).getDay(),A.m=0,A.d="W"in A?(A.w+6)%7+A.W*7-(tt+5)%7:A.w+A.U*7-(tt+6)%7);return"Z"in A?(A.H+=A.Z/100|0,A.M+=A.Z%100,Un(A)):Hn(A)}}function C(R,z,N,A){for(var st=0,X=z.length,tt=N.length,pt,Yt;st<X;){if(A>=tt)return-1;if(pt=z.charCodeAt(st++),pt===37){if(pt=z.charAt(st++),Yt=$[pt in Ua?z.charAt(st++):pt],!Yt||(A=Yt(R,N,A))<0)return-1}else if(pt!=N.charCodeAt(A++))return-1}return A}function D(R,z,N){var A=l.exec(z.slice(N));return A?(R.p=c.get(A[0].toLowerCase()),N+A[0].length):-1}function O(R,z,N){var A=d.exec(z.slice(N));return A?(R.w=g.get(A[0].toLowerCase()),N+A[0].length):-1}function k(R,z,N){var A=f.exec(z.slice(N));return A?(R.w=h.get(A[0].toLowerCase()),N+A[0].length):-1}function M(R,z,N){var A=_.exec(z.slice(N));return A?(R.m=y.get(A[0].toLowerCase()),N+A[0].length):-1}function L(R,z,N){var A=p.exec(z.slice(N));return A?(R.m=m.get(A[0].toLowerCase()),N+A[0].length):-1}function E(R,z,N){return C(R,e,z,N)}function B(R,z,N){return C(R,r,z,N)}function W(R,z,N){return C(R,n,z,N)}function q(R){return o[R.getDay()]}function J(R){return a[R.getDay()]}function j(R){return u[R.getMonth()]}function ut(R){return s[R.getMonth()]}function V(R){return i[+(R.getHours()>=12)]}function rt(R){return 1+~~(R.getMonth()/3)}function wt(R){return o[R.getUTCDay()]}function gt(R){return a[R.getUTCDay()]}function S(R){return u[R.getUTCMonth()]}function I(R){return s[R.getUTCMonth()]}function nt(R){return i[+(R.getUTCHours()>=12)]}function _t(R){return 1+~~(R.getUTCMonth()/3)}return{format:function(R){var z=b(R+="",T);return z.toString=function(){return R},z},parse:function(R){var z=w(R+="",!1);return z.toString=function(){return R},z},utcFormat:function(R){var z=b(R+="",x);return z.toString=function(){return R},z},utcParse:function(R){var z=w(R+="",!0);return z.toString=function(){return R},z}}}var Ua={"-":"",_:" ","0":"0"},dt=/^\s*\d+/,Rc=/^%/,Ec=/[\\^$*+?|[\]().{}]/g;function H(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function Lc(t){return t.replace(Ec,"\\$&")}function qe(t){return new RegExp("^(?:"+t.map(Lc).join("|")+")","i")}function Ze(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Il(t,e,r){var n=dt.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function jl(t,e,r){var n=dt.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Ol(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Fl(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function zl(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Ga(t,e,r){var n=dt.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Wa(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Pl(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Nl(t,e,r){var n=dt.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Xl(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function qa(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Bl(t,e,r){var n=dt.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Za(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Yl(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Vl(t,e,r){var n=dt.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Hl(t,e,r){var n=dt.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Ul(t,e,r){var n=dt.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Gl(t,e,r){var n=Rc.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Wl(t,e,r){var n=dt.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function ql(t,e,r){var n=dt.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Ka(t,e){return H(t.getDate(),e,2)}function Zl(t,e){return H(t.getHours(),e,2)}function Kl(t,e){return H(t.getHours()%12||12,e,2)}function Ql(t,e){return H(1+Kt.count(Rt(t),t),e,3)}function Qa(t,e){return H(t.getMilliseconds(),e,3)}function Jl(t,e){return Qa(t,e)+"000"}function tc(t,e){return H(t.getMonth()+1,e,2)}function ec(t,e){return H(t.getMinutes(),e,2)}function rc(t,e){return H(t.getSeconds(),e,2)}function nc(t){var e=t.getDay();return e===0?7:e}function ic(t,e){return H(Ht.count(Rt(t)-1,t),e,2)}function io(t){var e=t.getDay();return e>=4||e===0?Qt(t):Qt.ceil(t)}function ac(t,e){return t=io(t),H(Qt.count(Rt(t),t)+(Rt(t).getDay()===4),e,2)}function oc(t){return t.getDay()}function sc(t,e){return H(Ae.count(Rt(t)-1,t),e,2)}function uc(t,e){return H(t.getFullYear()%100,e,2)}function lc(t,e){return t=io(t),H(t.getFullYear()%100,e,2)}function cc(t,e){return H(t.getFullYear()%1e4,e,4)}function fc(t,e){var r=t.getDay();return t=r>=4||r===0?Qt(t):Qt.ceil(t),H(t.getFullYear()%1e4,e,4)}function hc(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+H(e/60|0,"0",2)+H(e%60,"0",2)}function Ja(t,e){return H(t.getUTCDate(),e,2)}function dc(t,e){return H(t.getUTCHours(),e,2)}function gc(t,e){return H(t.getUTCHours()%12||12,e,2)}function pc(t,e){return H(1+Se.count(Ut(t),t),e,3)}function to(t,e){return H(t.getUTCMilliseconds(),e,3)}function vc(t,e){return to(t,e)+"000"}function mc(t,e){return H(t.getUTCMonth()+1,e,2)}function xc(t,e){return H(t.getUTCMinutes(),e,2)}function _c(t,e){return H(t.getUTCSeconds(),e,2)}function yc(t){var e=t.getUTCDay();return e===0?7:e}function bc(t,e){return H(fe.count(Ut(t)-1,t),e,2)}function ao(t){var e=t.getUTCDay();return e>=4||e===0?Jt(t):Jt.ceil(t)}function Tc(t,e){return t=ao(t),H(Jt.count(Ut(t),t)+(Ut(t).getUTCDay()===4),e,2)}function wc(t){return t.getUTCDay()}function $c(t,e){return H(ke.count(Ut(t)-1,t),e,2)}function Ac(t,e){return H(t.getUTCFullYear()%100,e,2)}function Sc(t,e){return t=ao(t),H(t.getUTCFullYear()%100,e,2)}function kc(t,e){return H(t.getUTCFullYear()%1e4,e,4)}function Cc(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Jt(t):Jt.ceil(t),H(t.getUTCFullYear()%1e4,e,4)}function Mc(){return"+0000"}function eo(){return"%"}function ro(t){return+t}function no(t){return Math.floor(+t/1e3)}var Ee,Le,Pr,Nr,Xr;Wn({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wn(t){return Ee=Gn(t),Le=Ee.format,Pr=Ee.parse,Nr=Ee.utcFormat,Xr=Ee.utcParse,Ee}var Br="http://www.w3.org/1999/xhtml",Gt={svg:"http://www.w3.org/2000/svg",xhtml:Br,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Gt.hasOwnProperty(e)?{space:Gt[e],local:t}:t}function Dc(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Br&&e.documentElement.namespaceURI===Br?e.createElement(t):e.createElementNS(r,t)}}function Ic(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Yr(t){var e=Wt(t);return(e.local?Ic:Dc)(e)}function jc(){}function he(t){return t==null?jc:function(){return this.querySelector(t)}}function oo(t){typeof t!="function"&&(t=he(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],o=a.length,s=n[i]=new Array(o),u,l,c=0;c<o;++c)(u=a[c])&&(l=t.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Z(n,this._parents)}function De(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Oc(){return[]}function Ke(t){return t==null?Oc:function(){return this.querySelectorAll(t)}}function Fc(t){return function(){var e=t.apply(this,arguments);return e==null?[]:De(e)}}function so(t){typeof t=="function"?t=Fc(t):t=Ke(t);for(var e=this._groups,r=e.length,n=[],i=[],a=0;a<r;++a)for(var o=e[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(n.push(t.call(u,u.__data__,l,o)),i.push(u));return new Z(n,i)}function Qe(t){return function(){return this.matches(t)}}function Vr(t){return function(e){return e.matches(t)}}var zc=Array.prototype.find;function Pc(t){return function(){return zc.call(this.children,t)}}function Nc(){return this.firstElementChild}function uo(t){return this.select(t==null?Nc:Pc(typeof t=="function"?t:Vr(t)))}var Xc=Array.prototype.filter;function Bc(){return this.children}function Yc(t){return function(){return Xc.call(this.children,t)}}function lo(t){return this.selectAll(t==null?Bc:Yc(typeof t=="function"?t:Vr(t)))}function co(t){typeof t!="function"&&(t=Qe(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],o=a.length,s=n[i]=[],u,l=0;l<o;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new Z(n,this._parents)}function Hr(t){return new Array(t.length)}function fo(){return new Z(this._enter||this._groups.map(Hr),this._parents)}function Je(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Je.prototype={constructor:Je,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ho(t){return function(){return t}}function Vc(t,e,r,n,i,a){for(var o=0,s,u=e.length,l=a.length;o<l;++o)(s=e[o])?(s.__data__=a[o],n[o]=s):r[o]=new Je(t,a[o]);for(;o<u;++o)(s=e[o])&&(i[o]=s)}function Hc(t,e,r,n,i,a,o){var s,u,l=new Map,c=e.length,f=a.length,h=new Array(c),d;for(s=0;s<c;++s)(u=e[s])&&(h[s]=d=o.call(u,u.__data__,s,e)+"",l.has(d)?i[s]=u:l.set(d,u));for(s=0;s<f;++s)d=o.call(t,a[s],s,a)+"",(u=l.get(d))?(n[s]=u,u.__data__=a[s],l.delete(d)):r[s]=new Je(t,a[s]);for(s=0;s<c;++s)(u=e[s])&&l.get(h[s])===u&&(i[s]=u)}function Uc(t){return t.__data__}function go(t,e){if(!arguments.length)return Array.from(this,Uc);var r=e?Hc:Vc,n=this._parents,i=this._groups;typeof t!="function"&&(t=ho(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=n[l],f=i[l],h=f.length,d=De(t.call(c,c&&c.__data__,l,n)),g=d.length,p=s[l]=new Array(g),m=o[l]=new Array(g),_=u[l]=new Array(h);r(c,f,p,m,_,d,e);for(var y=0,T=0,x,$;y<g;++y)if(x=p[y]){for(y>=T&&(T=y+1);!($=m[T])&&++T<g;);x._next=$||null}}return o=new Z(o,n),o._enter=s,o._exit=u,o}function po(){return new Z(this._exit||this._groups.map(Hr),this._parents)}function vo(t,e,r){var n=this.enter(),i=this,a=this.exit();return n=typeof t=="function"?t(n):n.append(t+""),e!=null&&(i=e(i)),r==null?a.remove():r(a),n&&i?n.merge(i).order():i}function mo(t){if(!(t instanceof Z))throw new Error("invalid merge");for(var e=this._groups,r=t._groups,n=e.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var u=e[s],l=r[s],c=u.length,f=o[s]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;s<n;++s)o[s]=e[s];return new Z(o,this._parents)}function xo(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],i=n.length-1,a=n[i],o;--i>=0;)(o=n[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function _o(t){t||(t=Gc);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var o=r[a],s=o.length,u=i[a]=new Array(s),l,c=0;c<s;++c)(l=o[c])&&(u[c]=l);u.sort(e)}return new Z(i,this._parents).order()}function Gc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function yo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function bo(){return Array.from(this)}function To(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length;i<a;++i){var o=n[i];if(o)return o}return null}function wo(){let t=0;for(let e of this)++t;return t}function $o(){return!this.node()}function Ao(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i=e[r],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function Wc(t){return function(){this.removeAttribute(t)}}function qc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zc(t,e){return function(){this.setAttribute(t,e)}}function Kc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Qc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Jc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function So(t,e){var r=Wt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?qc:Wc:typeof e=="function"?r.local?Jc:Qc:r.local?Kc:Zc)(r,e))}function Ur(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function tf(t){return function(){this.style.removeProperty(t)}}function ef(t,e,r){return function(){this.style.setProperty(t,e,r)}}function rf(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function ko(t,e,r){return arguments.length>1?this.each((e==null?tf:typeof e=="function"?rf:ef)(t,e,r==null?"":r)):te(this.node(),t)}function te(t,e){return t.style.getPropertyValue(e)||Ur(t).getComputedStyle(t,null).getPropertyValue(e)}function nf(t){return function(){delete this[t]}}function af(t,e){return function(){this[t]=e}}function of(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Co(t,e){return arguments.length>1?this.each((e==null?nf:typeof e=="function"?of:af)(t,e)):this.node()[t]}function Mo(t){return t.trim().split(/^|\s+/)}function qn(t){return t.classList||new Ro(t)}function Ro(t){this._node=t,this._names=Mo(t.getAttribute("class")||"")}Ro.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Eo(t,e){for(var r=qn(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function Lo(t,e){for(var r=qn(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function sf(t){return function(){Eo(this,t)}}function uf(t){return function(){Lo(this,t)}}function lf(t,e){return function(){(e.apply(this,arguments)?Eo:Lo)(this,t)}}function Do(t,e){var r=Mo(t+"");if(arguments.length<2){for(var n=qn(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?lf:e?sf:uf)(r,e))}function cf(){this.textContent=""}function ff(t){return function(){this.textContent=t}}function hf(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Io(t){return arguments.length?this.each(t==null?cf:(typeof t=="function"?hf:ff)(t)):this.node().textContent}function df(){this.innerHTML=""}function gf(t){return function(){this.innerHTML=t}}function pf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function jo(t){return arguments.length?this.each(t==null?df:(typeof t=="function"?pf:gf)(t)):this.node().innerHTML}function vf(){this.nextSibling&&this.parentNode.appendChild(this)}function Oo(){return this.each(vf)}function mf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fo(){return this.each(mf)}function zo(t){var e=typeof t=="function"?t:Yr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function xf(){return null}function Po(t,e){var r=typeof t=="function"?t:Yr(t),n=e==null?xf:typeof e=="function"?e:he(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function _f(){var t=this.parentNode;t&&t.removeChild(this)}function No(){return this.each(_f)}function yf(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bf(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xo(t){return this.select(t?bf:yf)}function Bo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Tf(t){return function(e){t.call(this,e,this.__data__)}}function wf(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function $f(t){return function(){var e=this.__on;if(!!e){for(var r=0,n=-1,i=e.length,a;r<i;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function Af(t,e,r){return function(){var n=this.__on,i,a=Tf(e);if(n){for(var o=0,s=n.length;o<s;++o)if((i=n[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=e;return}}this.addEventListener(t.type,a,r),i={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(i):this.__on=[i]}}function Yo(t,e,r){var n=wf(t+""),i,a=n.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<a;++i)if((o=n[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?Af:$f,i=0;i<a;++i)this.each(s(n[i],e,r));return this}function Vo(t,e,r){var n=Ur(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Sf(t,e){return function(){return Vo(this,t,e)}}function kf(t,e){return function(){return Vo(this,t,e.apply(this,arguments))}}function Ho(t,e){return this.each((typeof e=="function"?kf:Sf)(t,e))}function*Uo(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length,o;i<a;++i)(o=n[i])&&(yield o)}var tr=[null];function Z(t,e){this._groups=t,this._parents=e}function Go(){return new Z([[document.documentElement]],tr)}function Cf(){return this}Z.prototype=Go.prototype={constructor:Z,select:oo,selectAll:so,selectChild:uo,selectChildren:lo,filter:co,data:go,enter:fo,exit:po,join:vo,merge:mo,selection:Cf,order:xo,sort:_o,call:yo,nodes:bo,node:To,size:wo,empty:$o,each:Ao,attr:So,style:ko,property:Co,classed:Do,text:Io,html:jo,raise:Oo,lower:Fo,append:zo,insert:Po,remove:No,clone:Xo,datum:Bo,on:Yo,dispatch:Ho,[Symbol.iterator]:Uo};var qt=Go;function F(t){return typeof t=="string"?new Z([[document.querySelector(t)]],[document.documentElement]):new Z([[t]],tr)}function Wo(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ie(t,e){if(t=Wo(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Gr(t){return typeof t=="string"?new Z([document.querySelectorAll(t)],[document.documentElement]):new Z([t==null?[]:De(t)],tr)}var Mf={value:()=>{}};function qo(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Wr(r)}function Wr(t){this._=t}function Rf(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Wr.prototype=qo.prototype={constructor:Wr,on:function(t,e){var r=this._,n=Rf(t+"",r),i,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((i=(t=n[a]).type)&&(i=Ef(r[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=n[a]).type)r[i]=Zo(r[i],t.name,e);else if(e==null)for(i in r)r[i]=Zo(r[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Wr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,a;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,i=a.length;n<i;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,a=n.length;i<a;++i)n[i].value.apply(e,r)}};function Ef(t,e){for(var r=0,n=t.length,i;r<n;++r)if((i=t[r]).name===e)return i.value}function Zo(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=Mf,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var er=qo;function qr(t){t.stopImmediatePropagation()}function ee(t){t.preventDefault(),t.stopImmediatePropagation()}function Ko(t){var e=t.document.documentElement,r=F(t).on("dragstart.drag",ee,!0);"onselectstart"in e?r.on("selectstart.drag",ee,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Qo(t,e){var r=t.document.documentElement,n=F(t).on("dragstart.drag",null);e&&(n.on("click.drag",ee,!0),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var rr=t=>()=>t;function nr(t,{sourceEvent:e,subject:r,target:n,identifier:i,active:a,x:o,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}nr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Lf(t){return!t.ctrlKey&&!t.button}function Df(){return this.parentNode}function If(t,e){return e==null?{x:t.x,y:t.y}:e}function jf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zn(){var t=Lf,e=Df,r=If,n=jf,i={},a=er("start","drag","end"),o=0,s,u,l,c,f=0;function h(x){x.on("mousedown.drag",d).filter(n).on("touchstart.drag",m).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(x,$){if(!(c||!t.call(this,x,$))){var b=T(this,e.call(this,x,$),x,$,"mouse");!b||(F(x.view).on("mousemove.drag",g,!0).on("mouseup.drag",p,!0),Ko(x.view),qr(x),l=!1,s=x.clientX,u=x.clientY,b("start",x))}}function g(x){if(ee(x),!l){var $=x.clientX-s,b=x.clientY-u;l=$*$+b*b>f}i.mouse("drag",x)}function p(x){F(x.view).on("mousemove.drag mouseup.drag",null),Qo(x.view,l),ee(x),i.mouse("end",x)}function m(x,$){if(!!t.call(this,x,$)){var b=x.changedTouches,w=e.call(this,x,$),C=b.length,D,O;for(D=0;D<C;++D)(O=T(this,w,x,$,b[D].identifier,b[D]))&&(qr(x),O("start",x,b[D]))}}function _(x){var $=x.changedTouches,b=$.length,w,C;for(w=0;w<b;++w)(C=i[$[w].identifier])&&(ee(x),C("drag",x,$[w]))}function y(x){var $=x.changedTouches,b=$.length,w,C;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),w=0;w<b;++w)(C=i[$[w].identifier])&&(qr(x),C("end",x,$[w]))}function T(x,$,b,w,C,D){var O=a.copy(),k=Ie(D||b,$),M,L,E;if((E=r.call(x,new nr("beforestart",{sourceEvent:b,target:h,identifier:C,active:o,x:k[0],y:k[1],dx:0,dy:0,dispatch:O}),w))!=null)return M=E.x-k[0]||0,L=E.y-k[1]||0,function B(W,q,J){var j=k,ut;switch(W){case"start":i[C]=B,ut=o++;break;case"end":delete i[C],--o;case"drag":k=Ie(J||q,$),ut=o;break}O.call(W,x,new nr(W,{sourceEvent:q,subject:E,target:h,identifier:C,active:ut,x:k[0]+M,y:k[1]+L,dx:k[0]-j[0],dy:k[1]-j[1],dispatch:O}),w)}}return h.filter=function(x){return arguments.length?(t=typeof x=="function"?x:rr(!!x),h):t},h.container=function(x){return arguments.length?(e=typeof x=="function"?x:rr(x),h):e},h.subject=function(x){return arguments.length?(r=typeof x=="function"?x:rr(x),h):r},h.touchable=function(x){return arguments.length?(n=typeof x=="function"?x:rr(!!x),h):n},h.on=function(){var x=a.on.apply(a,arguments);return x===a?h:x},h.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,h):Math.sqrt(f)},h}function Zr(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Kn(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ir(){}var ar=.7,Kr=1/ar,je="\\s*([+-]?\\d+)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",jt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Of=/^#([0-9a-f]{3,8})$/,Ff=new RegExp("^rgb\\("+[je,je,je]+"\\)$"),zf=new RegExp("^rgb\\("+[jt,jt,jt]+"\\)$"),Pf=new RegExp("^rgba\\("+[je,je,je,or]+"\\)$"),Nf=new RegExp("^rgba\\("+[jt,jt,jt,or]+"\\)$"),Xf=new RegExp("^hsl\\("+[or,jt,jt]+"\\)$"),Bf=new RegExp("^hsla\\("+[or,jt,jt,or]+"\\)$"),Jo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zr(ir,Et,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ts,formatHex:ts,formatHsl:Yf,formatRgb:es,toString:es});function ts(){return this.rgb().formatHex()}function Yf(){return rs(this).formatHsl()}function es(){return this.rgb().formatRgb()}function Et(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Of.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?ns(e):r===3?new St(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Qr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Qr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ff.exec(t))?new St(e[1],e[2],e[3],1):(e=zf.exec(t))?new St(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Pf.exec(t))?Qr(e[1],e[2],e[3],e[4]):(e=Nf.exec(t))?Qr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xf.exec(t))?is(e[1],e[2]/100,e[3]/100,1):(e=Bf.exec(t))?is(e[1],e[2]/100,e[3]/100,e[4]):Jo.hasOwnProperty(t)?ns(Jo[t]):t==="transparent"?new St(NaN,NaN,NaN,0):null}function ns(t){return new St(t>>16&255,t>>8&255,t&255,1)}function Qr(t,e,r,n){return n<=0&&(t=e=r=NaN),new St(t,e,r,n)}function Vf(t){return t instanceof ir||(t=Et(t)),t?(t=t.rgb(),new St(t.r,t.g,t.b,t.opacity)):new St}function re(t,e,r,n){return arguments.length===1?Vf(t):new St(t,e,r,n==null?1:n)}function St(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Zr(St,re,Kn(ir,{brighter:function(t){return t=t==null?Kr:Math.pow(Kr,t),new St(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ar:Math.pow(ar,t),new St(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:as,formatHex:as,formatRgb:os,toString:os}));function as(){return"#"+Qn(this.r)+Qn(this.g)+Qn(this.b)}function os(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Qn(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function is(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ot(t,e,r,n)}function rs(t){if(t instanceof Ot)return new Ot(t.h,t.s,t.l,t.opacity);if(t instanceof ir||(t=Et(t)),!t)return new Ot;if(t instanceof Ot)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,u=(a+i)/2;return s?(e===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-e)/s+2:o=(e-r)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Ot(o,s,u,t.opacity)}function ss(t,e,r,n){return arguments.length===1?rs(t):new Ot(t,e,r,n==null?1:n)}function Ot(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Zr(Ot,ss,Kn(ir,{brighter:function(t){return t=t==null?Kr:Math.pow(Kr,t),new Ot(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ar:Math.pow(ar,t),new Ot(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new St(Jn(t>=240?t-240:t+120,i,n),Jn(t,i,n),Jn(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Jn(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function ti(t,e,r,n,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*r+(1+3*t+3*a-3*o)*n+o*i)/6}function us(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],a=t[n+1],o=n>0?t[n-1]:2*i-a,s=n<e-1?t[n+2]:2*a-i;return ti((r-n/e)*e,o,i,a,s)}}function ls(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],a=t[n%e],o=t[(n+1)%e],s=t[(n+2)%e];return ti((r-n/e)*e,i,a,o,s)}}var sr=t=>()=>t;function Hf(t,e){return function(r){return t+r*e}}function Uf(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function cs(t){return(t=+t)==1?Jr:function(e,r){return r-e?Uf(e,r,t):sr(isNaN(e)?r:e)}}function Jr(t,e){var r=e-t;return r?Hf(t,r):sr(isNaN(t)?e:t)}var de=function t(e){var r=cs(e);function n(i,a){var o=r((i=re(i)).r,(a=re(a)).r),s=r(i.g,a.g),u=r(i.b,a.b),l=Jr(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return n.gamma=t,n}(1);function fs(t){return function(e){var r=e.length,n=new Array(r),i=new Array(r),a=new Array(r),o,s;for(o=0;o<r;++o)s=re(e[o]),n[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return n=t(n),i=t(i),a=t(a),s.opacity=1,function(u){return s.r=n(u),s.g=i(u),s.b=a(u),s+""}}}var Gf=fs(us),Wf=fs(ls);function hs(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function ds(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gs(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=ge(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function ps(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function vt(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function vs(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=ge(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var ei=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ri=new RegExp(ei.source,"g");function qf(t){return function(){return t}}function Zf(t){return function(e){return t(e)+""}}function ur(t,e){var r=ei.lastIndex=ri.lastIndex=0,n,i,a,o=-1,s=[],u=[];for(t=t+"",e=e+"";(n=ei.exec(t))&&(i=ri.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:vt(n,i)})),r=ri.lastIndex;return r<e.length&&(a=e.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Zf(u[0].x):qf(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function ge(t,e){var r=typeof e,n;return e==null||r==="boolean"?sr(e):(r==="number"?vt:r==="string"?(n=Et(e))?(e=n,de):ur:e instanceof Et?de:e instanceof Date?ps:ds(e)?hs:Array.isArray(e)?gs:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vs:vt)(t,e)}function ni(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var ms=180/Math.PI,tn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ii(t,e,r,n,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,u/=s),t*n<e*r&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*ms,skewX:Math.atan(u)*ms,scaleX:o,scaleY:s}}var en;function xs(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?tn:ii(e.a,e.b,e.c,e.d,e.e,e.f)}function _s(t){return t==null?tn:(en||(en=document.createElementNS("http://www.w3.org/2000/svg","g")),en.setAttribute("transform",t),(t=en.transform.baseVal.consolidate())?(t=t.matrix,ii(t.a,t.b,t.c,t.d,t.e,t.f)):tn)}function ys(t,e,r,n){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,g){if(l!==f||c!==h){var p=d.push("translate(",null,e,null,r);g.push({i:p-4,x:vt(l,f)},{i:p-2,x:vt(c,h)})}else(f||h)&&d.push("translate("+f+e+h+r)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,n)-2,x:vt(l,c)})):c&&f.push(i(f)+"rotate("+c+n)}function s(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,n)-2,x:vt(l,c)}):c&&f.push(i(f)+"skewX("+c+n)}function u(l,c,f,h,d,g){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");g.push({i:p-4,x:vt(l,f)},{i:p-2,x:vt(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),s(l.skewX,c.skewX,f,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var g=-1,p=h.length,m;++g<p;)f[(m=h[g]).i]=m.x(d);return f.join("")}}}var ai=ys(xs,"px, ","px)","deg)"),oi=ys(_s,", ",")",")");var Oe=0,lr=0,cr=0,bs=1e3,rn,fr,nn=0,pe=0,an=0,hr=typeof performance=="object"&&performance.now?performance:Date,Ts=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function dr(){return pe||(Ts(Kf),pe=hr.now()+an)}function Kf(){pe=0}function gr(){this._call=this._time=this._next=null}gr.prototype=on.prototype={constructor:gr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?dr():+r)+(e==null?0:+e),!this._next&&fr!==this&&(fr?fr._next=this:rn=this,fr=this),this._call=t,this._time=r,si()},stop:function(){this._call&&(this._call=null,this._time=Infinity,si())}};function on(t,e,r){var n=new gr;return n.restart(t,e,r),n}function ws(){dr(),++Oe;for(var t=rn,e;t;)(e=pe-t._time)>=0&&t._call.call(null,e),t=t._next;--Oe}function $s(){pe=(nn=hr.now())+an,Oe=lr=0;try{ws()}finally{Oe=0,Qf(),pe=0}}function Jf(){var t=hr.now(),e=t-nn;e>bs&&(an-=e,nn=t)}function Qf(){for(var t,e=rn,r,n=Infinity;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:rn=r);fr=t,si(n)}function si(t){if(!Oe){lr&&(lr=clearTimeout(lr));var e=t-pe;e>24?(t<Infinity&&(lr=setTimeout($s,t-hr.now()-an)),cr&&(cr=clearInterval(cr))):(cr||(nn=hr.now(),cr=setInterval(Jf,bs)),Oe=1,Ts($s))}}function sn(t,e,r){var n=new gr;return e=e==null?0:+e,n.restart(i=>{n.stop(),t(i+e)},e,r),n}var th=er("start","end","cancel","interrupt"),eh=[],As=0,ui=1,un=2,ln=3,Ss=4,cn=5,pr=6;function ne(t,e,r,n,i,a){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;rh(t,r,{name:e,index:n,group:i,on:th,tween:eh,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:As})}function vr(t,e){var r=lt(t,e);if(r.state>As)throw new Error("too late; already scheduled");return r}function mt(t,e){var r=lt(t,e);if(r.state>ln)throw new Error("too late; already running");return r}function lt(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function rh(t,e,r){var n=t.__transition,i;n[e]=r,r.timer=on(a,0,r.time);function a(l){r.state=ui,r.timer.restart(o,r.delay,r.time),r.delay<=l&&o(l-r.delay)}function o(l){var c,f,h,d;if(r.state!==ui)return u();for(c in n)if(d=n[c],d.name===r.name){if(d.state===ln)return sn(o);d.state===Ss?(d.state=pr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete n[c]):+c<e&&(d.state=pr,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete n[c])}if(sn(function(){r.state===ln&&(r.state=Ss,r.timer.restart(s,r.delay,r.time),s(l))}),r.state=un,r.on.call("start",t,t.__data__,r.index,r.group),r.state===un){for(r.state=ln,i=new Array(h=r.tween.length),c=0,f=-1;c<h;++c)(d=r.tween[c].value.call(t,t.__data__,r.index,r.group))&&(i[++f]=d);i.length=f+1}}function s(l){for(var c=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=cn,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);r.state===cn&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=pr,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function mr(t,e){var r=t.__transition,n,i,a=!0,o;if(!!r){e=e==null?null:e+"";for(o in r){if((n=r[o]).name!==e){a=!1;continue}i=n.state>un&&n.state<cn,n.state=pr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]}a&&delete t.__transition}}function ks(t){return this.each(function(){mr(this,t)})}function nh(t,e){var r,n;return function(){var i=mt(this,t),a=i.tween;if(a!==r){n=r=a;for(var o=0,s=n.length;o<s;++o)if(n[o].name===e){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function ih(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var a=mt(this,t),o=a.tween;if(o!==n){i=(n=o).slice();for(var s={name:e,value:r},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function Cs(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=lt(this.node(),r).tween,i=0,a=n.length,o;i<a;++i)if((o=n[i]).name===t)return o.value;return null}return this.each((e==null?nh:ih)(r,t,e))}function Fe(t,e,r){var n=t._id;return t.each(function(){var i=mt(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)}),function(i){return lt(i,n).value[e]}}function fn(t,e){var r;return(typeof e=="number"?vt:e instanceof Et?de:(r=Et(e))?(e=r,de):ur)(t,e)}function ah(t){return function(){this.removeAttribute(t)}}function oh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sh(t,e,r){var n,i=r+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===n?a:a=e(n=o,r)}}function uh(t,e,r){var n,i=r+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===n?a:a=e(n=o,r)}}function lh(t,e,r){var n,i,a;return function(){var o,s=r(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===n&&u===i?a:(i=u,a=e(n=o,s)))}}function ch(t,e,r){var n,i,a;return function(){var o,s=r(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===n&&u===i?a:(i=u,a=e(n=o,s)))}}function Ms(t,e){var r=Wt(t),n=r==="transform"?oi:fn;return this.attrTween(t,typeof e=="function"?(r.local?ch:lh)(r,n,Fe(this,"attr."+t,e)):e==null?(r.local?oh:ah)(r):(r.local?uh:sh)(r,n,e))}function fh(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function hh(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function dh(t,e){var r,n;function i(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&hh(t,a)),r}return i._value=e,i}function gh(t,e){var r,n;function i(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&fh(t,a)),r}return i._value=e,i}function Rs(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Wt(t);return this.tween(r,(n.local?dh:gh)(n,e))}function ph(t,e){return function(){vr(this,t).delay=+e.apply(this,arguments)}}function vh(t,e){return e=+e,function(){vr(this,t).delay=e}}function Es(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ph:vh)(e,t)):lt(this.node(),e).delay}function mh(t,e){return function(){mt(this,t).duration=+e.apply(this,arguments)}}function xh(t,e){return e=+e,function(){mt(this,t).duration=e}}function Ls(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mh:xh)(e,t)):lt(this.node(),e).duration}function _h(t,e){if(typeof e!="function")throw new Error;return function(){mt(this,t).ease=e}}function Ds(t){var e=this._id;return arguments.length?this.each(_h(e,t)):lt(this.node(),e).ease}function yh(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;mt(this,t).ease=r}}function Is(t){if(typeof t!="function")throw new Error;return this.each(yh(this._id,t))}function js(t){typeof t!="function"&&(t=Qe(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a=e[i],o=a.length,s=n[i]=[],u,l=0;l<o;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new yt(n,this._parents,this._name,this._id)}function Os(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,a=Math.min(n,i),o=new Array(n),s=0;s<a;++s)for(var u=e[s],l=r[s],c=u.length,f=o[s]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;s<n;++s)o[s]=e[s];return new yt(o,this._parents,this._name,this._id)}function bh(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Th(t,e,r){var n,i,a=bh(e)?vr:mt;return function(){var o=a(this,t),s=o.on;s!==n&&(i=(n=s).copy()).on(e,r),o.on=i}}function Fs(t,e){var r=this._id;return arguments.length<2?lt(this.node(),r).on.on(t):this.each(Th(r,t,e))}function wh(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function zs(){return this.on("end.remove",wh(this._id))}function Ps(t){var e=this._name,r=this._id;typeof t!="function"&&(t=he(t));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var s=n[o],u=s.length,l=a[o]=new Array(u),c,f,h=0;h<u;++h)(c=s[h])&&(f=t.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,ne(l[h],e,r,h,l,lt(c,r)));return new yt(a,this._parents,e,r)}function Ns(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Ke(t));for(var n=this._groups,i=n.length,a=[],o=[],s=0;s<i;++s)for(var u=n[s],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var h=t.call(c,c.__data__,f,u),d,g=lt(c,r),p=0,m=h.length;p<m;++p)(d=h[p])&&ne(d,e,r,p,h,g);a.push(h),o.push(c)}return new yt(a,o,e,r)}var $h=qt.prototype.constructor;function Xs(){return new $h(this._groups,this._parents)}function Ah(t,e){var r,n,i;return function(){var a=te(this,t),o=(this.style.removeProperty(t),te(this,t));return a===o?null:a===r&&o===n?i:i=e(r=a,n=o)}}function Bs(t){return function(){this.style.removeProperty(t)}}function Sh(t,e,r){var n,i=r+"",a;return function(){var o=te(this,t);return o===i?null:o===n?a:a=e(n=o,r)}}function kh(t,e,r){var n,i,a;return function(){var o=te(this,t),s=r(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),te(this,t))),o===u?null:o===n&&u===i?a:(i=u,a=e(n=o,s))}}function Ch(t,e){var r,n,i,a="style."+e,o="end."+a,s;return function(){var u=mt(this,t),l=u.on,c=u.value[a]==null?s||(s=Bs(e)):void 0;(l!==r||i!==c)&&(n=(r=l).copy()).on(o,i=c),u.on=n}}function Ys(t,e,r){var n=(t+="")==="transform"?ai:fn;return e==null?this.styleTween(t,Ah(t,n)).on("end.style."+t,Bs(t)):typeof e=="function"?this.styleTween(t,kh(t,n,Fe(this,"style."+t,e))).each(Ch(this._id,t)):this.styleTween(t,Sh(t,n,e),r).on("end.style."+t,null)}function Mh(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function Rh(t,e,r){var n,i;function a(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Mh(t,o,r)),n}return a._value=e,a}function Vs(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Rh(t,e,r==null?"":r))}function Eh(t){return function(){this.textContent=t}}function Lh(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Hs(t){return this.tween("text",typeof t=="function"?Lh(Fe(this,"text",t)):Eh(t==null?"":t+""))}function Dh(t){return function(e){this.textContent=t.call(this,e)}}function Ih(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&Dh(i)),e}return n._value=t,n}function Us(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ih(t))}function Gs(){for(var t=this._name,e=this._id,r=hn(),n=this._groups,i=n.length,a=0;a<i;++a)for(var o=n[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var c=lt(u,e);ne(u,t,r,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yt(n,this._parents,t,r)}function Ws(){var t,e,r=this,n=r._id,i=r.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i==0&&a()}};r.each(function(){var l=mt(this,n),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),i===0&&a()})}var jh=0;function yt(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function xr(t){return qt().transition(t)}function hn(){return++jh}var ve=qt.prototype;yt.prototype=xr.prototype={constructor:yt,select:Ps,selectAll:Ns,filter:js,merge:Os,selection:Xs,transition:Gs,call:ve.call,nodes:ve.nodes,node:ve.node,size:ve.size,empty:ve.empty,each:ve.each,on:Fs,attr:Ms,attrTween:Rs,style:Ys,styleTween:Vs,text:Hs,textTween:Us,remove:zs,tween:Cs,delay:Es,duration:Ls,ease:Ds,easeVarying:Is,end:Ws,[Symbol.iterator]:ve[Symbol.iterator]};var li=t=>+t;function dn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Oh={time:null,delay:0,duration:250,ease:dn};function Fh(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function qs(t){var e,r;t instanceof yt?(e=t._id,t=t._name):(e=hn(),(r=Oh).time=dr(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var o=n[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&ne(u,t,e,l,o,r||Fh(u,e));return new yt(n,this._parents,t,e)}qt.prototype.interrupt=ks;qt.prototype.transition=qs;function Zs(t){return[+t[0],+t[1]]}function zh(t){return[Zs(t[0]),Zs(t[1])]}var Ib={name:"x",handles:["w","e"].map(ci),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},jb={name:"y",handles:["n","s"].map(ci),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ob={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ci),input:function(t){return t==null?null:zh(t)},output:function(t){return t}};function ci(t){return{type:t}}function fi(t){var e=t.__brush;return e?e.dim.output(e.selection):null}var Ks={},hi={},di=34,_r=10,gi=13;function Qs(t){return new Function("d","return {"+t.map(function(e,r){return JSON.stringify(e)+": d["+r+'] || ""'}).join(",")+"}")}function Xh(t,e){var r=Qs(t);return function(n,i){return e(r(n),i,t)}}function Js(t){var e=Object.create(null),r=[];return t.forEach(function(n){for(var i in n)i in e||r.push(e[i]=i)}),r}function $t(t,e){var r=t+"",n=r.length;return n<e?new Array(e-n+1).join(0)+r:r}function Bh(t){return t<0?"-"+$t(-t,6):t>9999?"+"+$t(t,6):$t(t,4)}function Yh(t){var e=t.getUTCHours(),r=t.getUTCMinutes(),n=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Bh(t.getUTCFullYear(),4)+"-"+$t(t.getUTCMonth()+1,2)+"-"+$t(t.getUTCDate(),2)+(i?"T"+$t(e,2)+":"+$t(r,2)+":"+$t(n,2)+"."+$t(i,3)+"Z":n?"T"+$t(e,2)+":"+$t(r,2)+":"+$t(n,2)+"Z":r||e?"T"+$t(e,2)+":"+$t(r,2)+"Z":"")}function gn(t){var e=new RegExp('["'+t+`
\r]`),r=t.charCodeAt(0);function n(f,h){var d,g,p=i(f,function(m,_){if(d)return d(m,_-1);g=m,d=h?Xh(m,h):Qs(m)});return p.columns=g||[],p}function i(f,h){var d=[],g=f.length,p=0,m=0,_,y=g<=0,T=!1;f.charCodeAt(g-1)===_r&&--g,f.charCodeAt(g-1)===gi&&--g;function x(){if(y)return hi;if(T)return T=!1,Ks;var b,w=p,C;if(f.charCodeAt(w)===di){for(;p++<g&&f.charCodeAt(p)!==di||f.charCodeAt(++p)===di;);return(b=p)>=g?y=!0:(C=f.charCodeAt(p++))===_r?T=!0:C===gi&&(T=!0,f.charCodeAt(p)===_r&&++p),f.slice(w+1,b-1).replace(/""/g,'"')}for(;p<g;){if((C=f.charCodeAt(b=p++))===_r)T=!0;else if(C===gi)T=!0,f.charCodeAt(p)===_r&&++p;else if(C!==r)continue;return f.slice(w,b)}return y=!0,f.slice(w,g)}for(;(_=x())!==hi;){for(var $=[];_!==Ks&&_!==hi;)$.push(_),_=x();h&&($=h($,m++))==null||d.push($)}return d}function a(f,h){return f.map(function(d){return h.map(function(g){return c(d[g])}).join(t)})}function o(f,h){return h==null&&(h=Js(f)),[h.map(c).join(t)].concat(a(f,h)).join(`
`)}function s(f,h){return h==null&&(h=Js(f)),a(f,h).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(t)}function c(f){return f==null?"":f instanceof Date?Yh(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:n,parseRows:i,format:o,formatBody:s,formatRows:u,formatRow:l,formatValue:c}}var me=gn(","),pi=me.parse,vi=me.parseRows,Vh=me.format,Hh=me.formatBody,Uh=me.formatRows,Gh=me.formatRow,Wh=me.formatValue;var xe=gn("	"),mi=xe.parse,xi=xe.parseRows,qh=xe.format,Zh=xe.formatBody,Kh=xe.formatRows,Qh=xe.formatRow,Jh=xe.formatValue;function Ft(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var _i=Symbol("implicit");function yr(){var t=new Map,e=[],r=[],n=_i;function i(a){var o=a+"",s=t.get(o);if(!s){if(n!==_i)return n;t.set(o,s=e.push(a))}return r[(s-1)%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Map;for(let o of a){let s=o+"";t.has(s)||t.set(s,e.push(o))}return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return yr(e,r).unknown(n)},Ft.apply(i,arguments),i}function yi(t){return function(){return t}}function bi(t){return+t}var tu=[0,1];function ze(t){return t}function Ti(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:yi(isNaN(e)?NaN:.5)}function td(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function ed(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=Ti(i,n),a=r(o,a)):(n=Ti(n,i),a=r(a,o)),function(s){return a(n(s))}}function rd(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=Ti(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(s){var u=Pn(t,s,1,n)-1;return a[u](i[u](s))}}function ie(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function br(){var t=tu,e=tu,r=ge,n,i,a,o=ze,s,u,l;function c(){var h=Math.min(t.length,e.length);return o!==ze&&(o=td(t[0],t[h-1])),s=h>2?rd:ed,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(u||(u=s(t.map(n),e,r)))(n(o(h)))}return f.invert=function(h){return o(i((l||(l=s(e,t.map(n),vt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,bi),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=ni,c()},f.clamp=function(h){return arguments.length?(o=h?!0:ze,c()):o!==ze},f.interpolate=function(h){return arguments.length?(r=h,c()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return n=h,i=d,c()}}function Tr(){return br()(ze,ze)}function eu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _e(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function zt(t){return t=_e(Math.abs(t)),t?t[1]:NaN}function ru(t,e){return function(r,n){for(var i=r.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),a.push(r.substring(i-=s,i+s)),!((u+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function nu(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var nd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ae(t){if(!(e=nd.exec(t)))throw new Error("invalid format: "+t);var e;return new pn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ae.prototype=pn.prototype;function pn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}pn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function iu(t){t:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var wi;function au(t,e){var r=_e(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(wi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+_e(t,Math.max(0,e+a-1))[0]}function $i(t,e){var r=_e(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var Ai={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:eu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$i(t*100,e),r:$i,s:au,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Si(t){return t}var ou=Array.prototype.map,su=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function uu(t){var e=t.grouping===void 0||t.thousands===void 0?Si:ru(ou.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Si:nu(ou.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=ae(f);var h=f.fill,d=f.align,g=f.sign,p=f.symbol,m=f.zero,_=f.width,y=f.comma,T=f.precision,x=f.trim,$=f.type;$==="n"?(y=!0,$="g"):Ai[$]||(T===void 0&&(T=12),x=!0,$="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var b=p==="$"?r:p==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",w=p==="$"?n:/[%p]/.test($)?o:"",C=Ai[$],D=/[defgprs%]/.test($);T=T===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function O(k){var M=b,L=w,E,B,W;if($==="c")L=C(k)+L,k="";else{k=+k;var q=k<0||1/k<0;if(k=isNaN(k)?u:C(Math.abs(k),T),x&&(k=iu(k)),q&&+k==0&&g!=="+"&&(q=!1),M=(q?g==="("?g:s:g==="-"||g==="("?"":g)+M,L=($==="s"?su[8+wi/3]:"")+L+(q&&g==="("?")":""),D){for(E=-1,B=k.length;++E<B;)if(W=k.charCodeAt(E),48>W||W>57){L=(W===46?i+k.slice(E+1):k.slice(E))+L,k=k.slice(0,E);break}}}y&&!m&&(k=e(k,Infinity));var J=M.length+k.length+L.length,j=J<_?new Array(_-J+1).join(h):"";switch(y&&m&&(k=e(j+k,j.length?_-L.length:Infinity),j=""),d){case"<":k=M+k+L+j;break;case"=":k=M+j+k+L;break;case"^":k=j.slice(0,J=j.length>>1)+M+k+L+j.slice(J);break;default:k=j+M+k+L;break}return a(k)}return O.toString=function(){return f+""},O}function c(f,h){var d=l((f=ae(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(zt(h)/3)))*3,p=Math.pow(10,-g),m=su[8+g/3];return function(_){return d(p*_)+m}}return{format:l,formatPrefix:c}}var vn,Pe,mn;ki({thousands:",",grouping:[3],currency:["$",""]});function ki(t){return vn=uu(t),Pe=vn.format,mn=vn.formatPrefix,vn}function Ci(t){return Math.max(0,-zt(Math.abs(t)))}function Mi(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zt(e)/3)))*3-zt(Math.abs(t)))}function Ri(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zt(e)-zt(t))+1}function Ei(t,e,r,n){var i=Re(t,e,r),a;switch(n=ae(n==null?",f":n),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=Mi(i,o))&&(n.precision=a),mn(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Ri(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Ci(i))&&(n.precision=a-(n.type==="%")*2);break}}return Pe(n)}function Li(t){var e=t.domain;return t.ticks=function(r){var n=e();return Me(n[0],n[n.length-1],r==null?10:r)},t.tickFormat=function(r,n){var i=e();return Ei(i[0],i[i.length-1],r==null?10:r,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],s=n[a],u,l,c=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);c-- >0;){if(l=zr(o,s,r),l===u)return n[i]=o,n[a]=s,e(n);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function wr(){var t=Tr();return t.copy=function(){return ie(t,wr())},Ft.apply(t,arguments),Li(t)}function $r(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),t[r]=e.floor(i),t[n]=e.ceil(a),t}function lu(t){return Math.log(t)}function cu(t){return Math.exp(t)}function id(t){return-Math.log(-t)}function ad(t){return-Math.exp(-t)}function od(t){return isFinite(t)?+("1e"+t):t<0?0:t}function sd(t){return t===10?od:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function ud(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function fu(t){return function(e){return-t(-e)}}function ld(t){var e=t(lu,cu),r=e.domain,n=10,i,a;function o(){return i=ud(n),a=sd(n),r()[0]<0?(i=fu(i),a=fu(a),t(id,ad)):t(lu,cu),e}return e.base=function(s){return arguments.length?(n=+s,o()):n},e.domain=function(s){return arguments.length?(r(s),o()):r()},e.ticks=function(s){var u=r(),l=u[0],c=u[u.length-1],f;(f=c<l)&&(h=l,l=c,c=h);var h=i(l),d=i(c),g,p,m,_=s==null?10:+s,y=[];if(!(n%1)&&d-h<_){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(p=1,g=a(h);p<n;++p)if(m=g*p,!(m<l)){if(m>c)break;y.push(m)}}else for(;h<=d;++h)for(p=n-1,g=a(h);p>=1;--p)if(m=g*p,!(m<l)){if(m>c)break;y.push(m)}y.length*2<_&&(y=Me(l,c,_))}else y=Me(h,d,Math.min(d-h,_)).map(a);return f?y.reverse():y},e.tickFormat=function(s,u){if(u==null&&(u=n===10?".0e":","),typeof u!="function"&&(u=Pe(u)),s===Infinity)return u;s==null&&(s=10);var l=Math.max(1,n*s/e.ticks().length);return function(c){var f=c/a(Math.round(i(c)));return f*n<n-.5&&(f*=n),f<=l?u(c):""}},e.nice=function(){return r($r(r(),{floor:function(s){return a(Math.floor(i(s)))},ceil:function(s){return a(Math.ceil(i(s)))}}))},e}function Ar(){var t=ld(br()).domain([1,10]);return t.copy=function(){return ie(t,Ar()).base(t.base())},Ft.apply(t,arguments),t}function hu(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function du(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function cd(t){var e=1,r=t(hu(e),du(e));return r.constant=function(n){return arguments.length?t(hu(e=+n),du(e)):e},Li(r)}function Sr(){var t=cd(br());return t.copy=function(){return ie(t,Sr()).constant(t.constant())},Ft.apply(t,arguments)}function fd(t){return new Date(t)}function hd(t){return t instanceof Date?+t:+new Date(+t)}function gu(t,e,r,n,i,a,o,s,u,l){var c=Tr(),f=c.invert,h=c.domain,d=l(".%L"),g=l(":%S"),p=l("%I:%M"),m=l("%I %p"),_=l("%a %d"),y=l("%b %d"),T=l("%B"),x=l("%Y");function $(b){return(u(b)<b?d:s(b)<b?g:o(b)<b?p:a(b)<b?m:n(b)<b?i(b)<b?_:y:r(b)<b?T:x)(b)}return c.invert=function(b){return new Date(f(b))},c.domain=function(b){return arguments.length?h(Array.from(b,hd)):h().map(fd)},c.ticks=function(b){var w=h();return t(w[0],w[w.length-1],b==null?10:b)},c.tickFormat=function(b,w){return w==null?$:l(w)},c.nice=function(b){var w=h();return(!b||typeof b.range!="function")&&(b=e(w[0],w[w.length-1],b==null?10:b)),b?h($r(w,b)):c},c.copy=function(){return ie(c,gu(t,e,r,n,i,a,o,s,u,l))},c}function xn(){return Ft.apply(gu(Yn,Vn,Rt,Ge,Ht,Kt,Ue,He,Vt,Le).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Di=Math.PI,Ii=2*Di,ye=1e-6,dd=Ii-ye;function ji(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function pu(){return new ji}ji.prototype=pu.prototype={constructor:ji,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,r,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+r)+","+(this._y1=+n)},bezierCurveTo:function(t,e,r,n,i,a){this._+="C"+ +t+","+ +e+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,r,n,i){t=+t,e=+e,r=+r,n=+n,i=+i;var a=this._x1,o=this._y1,s=r-t,u=n-e,l=a-t,c=o-e,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>ye)if(!(Math.abs(c*s-u*l)>ye)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=r-a,d=n-o,g=s*s+u*u,p=h*h+d*d,m=Math.sqrt(g),_=Math.sqrt(f),y=i*Math.tan((Di-Math.acos((g+f-p)/(2*m*_)))/2),T=y/_,x=y/m;Math.abs(T-1)>ye&&(this._+="L"+(t+T*l)+","+(e+T*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*d)+","+(this._x1=t+x*s)+","+(this._y1=e+x*u)}},arc:function(t,e,r,n,i,a){t=+t,e=+e,r=+r,a=!!a;var o=r*Math.cos(n),s=r*Math.sin(n),u=t+o,l=e+s,c=1^a,f=a?n-i:i-n;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>ye||Math.abs(this._y1-l)>ye)&&(this._+="L"+u+","+l),!!r&&(f<0&&(f=f%Ii+Ii),f>dd?this._+="A"+r+","+r+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+r+","+r+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>ye&&(this._+="A"+r+","+r+",0,"+ +(f>=Di)+","+c+","+(this._x1=t+r*Math.cos(i))+","+(this._y1=e+r*Math.sin(i))))},rect:function(t,e,r,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +r+"v"+ +n+"h"+-r+"Z"},toString:function(){return this._}};var Oi=pu;function be(t){return function(){return t}}var Fi=1e-12,vu=Math.PI,Aw=vu/2,Sw=2*vu;var Cw=Array.prototype.slice;function mu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xu(t){this._context=t}xu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function kr(t){return new xu(t)}function _u(t){return t[0]}function yu(t){return t[1]}function zi(t,e){var r=be(!0),n=null,i=kr,a=null;t=typeof t=="function"?t:t===void 0?_u:be(t),e=typeof e=="function"?e:e===void 0?yu:be(e);function o(s){var u,l=(s=mu(s)).length,c,f=!1,h;for(n==null&&(a=i(h=Oi())),u=0;u<=l;++u)!(u<l&&r(c=s[u],u,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(c,u,s),+e(c,u,s));if(h)return a=null,h+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:be(+s),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:be(+s),o):e},o.defined=function(s){return arguments.length?(r=typeof s=="function"?s:be(!!s),o):r},o.curve=function(s){return arguments.length?(i=s,n!=null&&(a=i(n)),o):i},o.context=function(s){return arguments.length?(s==null?n=a=null:a=i(n=s),o):n},o}function Ct(){}function Ne(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Cr(t){this._context=t}Cr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ne(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ne(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Pi(t){return new Cr(t)}function bu(t){this._context=t}bu.prototype={areaStart:Ct,areaEnd:Ct,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ne(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ni(t){return new bu(t)}function Tu(t){this._context=t}Tu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ne(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Xi(t){return new Tu(t)}function wu(t,e){this._basis=new Cr(t),this._beta=e}wu.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,r=t.length-1;if(r>0)for(var n=t[0],i=e[0],a=t[r]-n,o=e[r]-i,s=-1,u;++s<=r;)u=s/r,this._basis.point(this._beta*t[s]+(1-this._beta)*(n+u*a),this._beta*e[s]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Bi=function t(e){function r(n){return e===1?new Cr(n):new wu(n,e)}return r.beta=function(n){return t(+n)},r}(.85);function Xe(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function _n(t,e){this._context=t,this._k=(1-e)/6}_n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xe(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Xe(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Yi=function t(e){function r(n){return new _n(n,e)}return r.tension=function(n){return t(+n)},r}(0);function yn(t,e){this._context=t,this._k=(1-e)/6}yn.prototype={areaStart:Ct,areaEnd:Ct,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Xe(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Vi=function t(e){function r(n){return new yn(n,e)}return r.tension=function(n){return t(+n)},r}(0);function bn(t,e){this._context=t,this._k=(1-e)/6}bn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xe(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Hi=function t(e){function r(n){return new bn(n,e)}return r.tension=function(n){return t(+n)},r}(0);function Mr(t,e,r){var n=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Fi){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Fi){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-r*t._l12_2a)/c}t._context.bezierCurveTo(n,i,a,o,t._x2,t._y2)}function $u(t,e){this._context=t,this._alpha=e}$u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Mr(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ui=function t(e){function r(n){return e?new $u(n,e):new _n(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function Au(t,e){this._context=t,this._alpha=e}Au.prototype={areaStart:Ct,areaEnd:Ct,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Mr(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gi=function t(e){function r(n){return e?new Au(n,e):new yn(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function Su(t,e){this._context=t,this._alpha=e}Su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mr(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Wi=function t(e){function r(n){return e?new Su(n,e):new bn(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function ku(t){this._context=t}ku.prototype={areaStart:Ct,areaEnd:Ct,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function qi(t){return new ku(t)}function Cu(t){return t<0?-1:1}function Mu(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),s=(a*i+o*n)/(n+i);return(Cu(a)+Cu(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Ru(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Zi(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-n)/3;t._context.bezierCurveTo(n+s,i+s*e,a-s,o-s*r,a,o)}function Tn(t){this._context=t}Tn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zi(this,this._t0,Ru(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Zi(this,Ru(this,r=Mu(this,t,e)),r);break;default:Zi(this,this._t0,r=Mu(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Lu(t){this._context=new Eu(t)}(Lu.prototype=Object.create(Tn.prototype)).point=function(t,e){Tn.prototype.point.call(this,e,t)};function Eu(t){this._context=t}Eu.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function Ki(t){return new Tn(t)}function Qi(t){return new Lu(t)}function Du(t){this._context=t}Du.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=Iu(t),i=Iu(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Iu(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Ji(t){return new Du(t)}function wn(t,e){this._context=t,this._t=e}wn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function ta(t){return new wn(t,.5)}function ea(t){return new wn(t,0)}function ra(t){return new wn(t,1)}var $n=Array.prototype.slice;function ju(t){return t}var An=1,Sn=2,na=3,Rr=4,Ou=1e-6;function gd(t){return"translate("+t+",0)"}function pd(t){return"translate(0,"+t+")"}function vd(t){return e=>+t(e)}function md(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function xd(){return!this.__axis}function kn(t,e){var r=[],n=null,i=null,a=6,o=6,s=3,u=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,l=t===An||t===Rr?-1:1,c=t===Rr||t===Sn?"x":"y",f=t===An||t===na?gd:pd;function h(d){var g=n==null?e.ticks?e.ticks.apply(e,r):e.domain():n,p=i==null?e.tickFormat?e.tickFormat.apply(e,r):ju:i,m=Math.max(a,0)+s,_=e.range(),y=+_[0]+u,T=+_[_.length-1]+u,x=(e.bandwidth?md:vd)(e.copy(),u),$=d.selection?d.selection():d,b=$.selectAll(".domain").data([null]),w=$.selectAll(".tick").data(g,e).order(),C=w.exit(),D=w.enter().append("g").attr("class","tick"),O=w.select("line"),k=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(D),O=O.merge(D.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),k=k.merge(D.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",t===An?"0em":t===na?"0.71em":"0.32em")),d!==$&&(b=b.transition(d),w=w.transition(d),O=O.transition(d),k=k.transition(d),C=C.transition(d).attr("opacity",Ou).attr("transform",function(M){return isFinite(M=x(M))?f(M+u):this.getAttribute("transform")}),D.attr("opacity",Ou).attr("transform",function(M){var L=this.parentNode.__axis;return f((L&&isFinite(L=L(M))?L:x(M))+u)})),C.remove(),b.attr("d",t===Rr||t===Sn?o?"M"+l*o+","+y+"H"+u+"V"+T+"H"+l*o:"M"+u+","+y+"V"+T:o?"M"+y+","+l*o+"V"+u+"H"+T+"V"+l*o:"M"+y+","+u+"H"+T),w.attr("opacity",1).attr("transform",function(M){return f(x(M)+u)}),O.attr(c+"2",l*a),k.attr(c,l*m).text(p),$.filter(xd).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Sn?"start":t===Rr?"end":"middle"),$.each(function(){this.__axis=x})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return r=$n.call(arguments),h},h.tickArguments=function(d){return arguments.length?(r=d==null?[]:$n.call(d),h):r.slice()},h.tickValues=function(d){return arguments.length?(n=d==null?null:$n.call(d),h):n&&n.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(u=+d,h):u},h}function ia(t){return kn(An,t)}function aa(t){return kn(Sn,t)}function Cn(t){return kn(na,t)}function Mn(t){return kn(Rr,t)}function Te(t,e,r){this.k=t,this.x=e,this.y=r}Te.prototype={constructor:Te,scale:function(t){return t===1?this:new Te(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Te(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rn=new Te(1,0,0);En.prototype=Te.prototype;function En(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Rn;return t.__zoom}var v={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",chartCircles:"bb-chart-circles",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",main:"bb-main",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",subchart:"bb-subchart",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",valueDown:"bb-value-down",valueUp:"bb-value-up",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridFocus:"bb-ygrid-focus",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_",TextOverlapping:"text-overlapping"},yd=function(){function t(){var e={chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null};return e}return t}(),bd=function(){function t(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}return t}(),Fu={element:yd,state:bd},Td=function(){function t(){var e=this;Object.keys(Fu).forEach(function(r){e[r]=new Fu[r]})}return t.prototype.getStore=function(e){return this[e]},t}();var Lt=function(){return Lt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++)for(var a in r=arguments[n],r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e},Lt.apply(this,arguments)};function Tt(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t}var wd={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,plugins:[],render:{},regions:[]},$d={data_x:void 0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_color:void 0,data_colors:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Ad={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},Sd={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},kd={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1},Cd={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},Md={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},ct=function(){var t=typeof globalThis=="object"&&globalThis!==null&&globalThis.Object===Object&&globalThis||typeof global=="object"&&global!==null&&global.Object===Object&&global||typeof self=="object"&&self!==null&&self.Object===Object&&self;return t||Function("return this")()}(),bt=ct&&ct.document,P=function(t){return t||t===0},U=function(t){return typeof t=="function"},ft=function(t){return typeof t=="string"},it=function(t){return typeof t=="number"},xt=function(t){return typeof t=="undefined"},Q=function(t){return typeof t!="undefined"},zu=function(t){return typeof t=="boolean"},oa=function(t){return Math.ceil(t/10)*10},Er=function(t){return Math.ceil(t)+.5},Ln=function(t){return t[1]-t[0]},Pt=function(t){return typeof t=="object"},sa=function(t){return xt(t)||t===null||ft(t)&&t.length===0||Pt(t)&&!(t instanceof Date)&&Object.keys(t).length===0||it(t)&&isNaN(t)},at=function(t){return!sa(t)},K=function(t){return Array.isArray(t)},et=function(t){return t&&!t.nodeType&&Pt(t)&&!K(t)};function Zt(t,e,r){return Q(t[e])?t[e]:r}function Rd(t,e){var r=!1;return Object.keys(t).forEach(function(n){return t[n]===e&&(r=!0)}),r}function ot(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=U(t);return n&&t.call.apply(t,e),n}function Pu(t,e){var r=0;t.each(function(){return++r}).on("end",function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];!--r&&e.apply.apply(e,Tt([this],n))})}function Lr(t){return ft(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function Nu(t,e,r,n){if(r===void 0&&(r=[-1,1]),n===void 0&&(n=!1),!(!t||!ft(e)))if(e.indexOf(`
`)===-1)t.text(e);else{var i=[t.text(),e].map(function(s){return s.replace(/[\s\n]/g,"")});if(i[0]!==i[1]){var a=e.split(`
`),o=n?a.length-1:1;t.html(""),a.forEach(function(s,u){t.append("tspan").attr("x",0).attr("dy",(u===0?r[0]*o:r[1])+"em").text(s)})}}}function Ed(t){var e=t.getBBox(),r=e.x,n=e.y,i=e.width,a=e.height;return[{x:r,y:n+a},{x:r,y:n},{x:r+i,y:n},{x:r+i,y:n+a}]}function Ld(t){var e=t.getBoundingClientRect(),r=e.width,n=e.height,i=Ed(t),a=i[0].x,o=Math.min(i[0].y,i[1].y);return{x:a,y:o,width:r,height:n}}function oe(t,e){var r=t&&(t.touches||t.sourceEvent&&t.sourceEvent.touches),n=t?Ie(r?r[0]:t,e):[0,0];return n}function Xu(t){var e=t.event,r=t.$el,n=r.subchart.main||r.main,i;return e&&e.type==="brush"?i=e.selection:n&&(i=n.select("."+v.brush).node())&&(i=fi(i)),i}function Dr(t){var e=!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width");return e?t.rect=t.getBoundingClientRect():t.rect}function Dn(t){t===void 0&&(t=!0);var e=Math.random();return t?String(e):e}function ua(t,e,r,n,i){if(r>n)return-1;var a=Math.floor((r+n)/2),o=t[a],s=o.x,u=o.w,l=u===void 0?0:u;return i&&(s=t[a].y,l=t[a].h),e>=s&&e<=s+l?a:e<s?ua(t,e,r,a-1,i):ua(t,e,a+1,n,i)}function Dd(t){var e=Xu(t);return e?e[0]===e[1]:!0}function Id(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(n){if(et(n)&&n.constructor){var i=new n.constructor;for(var a in n)i[a]=r(n[a]);return i}return n};return t.map(function(n){return r(n)}).reduce(function(n,i){return Lt(Lt({},n),i)})}function Nt(t,e){t===void 0&&(t={}),K(e)&&e.forEach(function(n){return Nt(t,n)});for(var r in e)/^\d+$/.test(r)||r in t||(t[r]=e[r]);return t}var Xt=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Ir=function(t){return[].slice.call(t)};function jd(t){var e=[];return t.forEach(function(r){try{r.cssRules&&r.cssRules.length&&(e=e.concat(Ir(r.cssRules)))}catch(n){console.error("Error while reading rules from "+r.href+": "+n.toString())}}),e}var Bu=function(t){var e=t?t.transform:null,r=e&&e.baseVal;return r&&r.numberOfItems?r.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}};function la(t){var e=t[0]instanceof Date,r=(e?t.map(Number):t).filter(function(n,i,a){return a.indexOf(n)===i});return e?r.map(function(n){return new Date(n)}):r}function ca(t){return t&&t.length?t.reduce(function(e,r){return e.concat(r)}):[]}function Be(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length||e.length===1&&!e[0])return t;var n=e.shift();return et(t)&&et(n)&&Object.keys(n).forEach(function(i){var a=n[i];et(a)?(!t[i]&&(t[i]={}),t[i]=Be(t[i],a)):t[i]=K(a)?a.concat():a}),Be.apply(void 0,Tt([t],e))}function Ye(t,e){e===void 0&&(e=!0);var r;return t[0]instanceof Date?r=e?function(n,i){return n-i}:function(n,i){return i-n}:e&&!t.every(isNaN)?r=function(n,i){return n-i}:e||(r=function(n,i){return n>i&&-1||n<i&&1||n===i&&0}),t.concat().sort(r)}function se(t,e){var r=e.filter(function(n){return at(n)});return r.length?it(r[0])?r=Math[t].apply(Math,r):r[0]instanceof Date&&(r=Ye(r,t==="min")[0]):r=void 0,r}var Od={mouse:function(){var t=function(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}};try{return new MouseEvent("t"),function(e,r,n){n===void 0&&(n=t()),e.dispatchEvent(new MouseEvent(r,n))}}catch(e){return function(r,n,i){i===void 0&&(i=t());var a=bt.createEvent("MouseEvent");a.initMouseEvent(n,i.bubbles,i.cancelable,ct,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}}}(),touch:function(t,e,r){var n=new Touch(Be({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},r));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}};function fa(t,e){var r=t;for(var n in e)r=r.replace(new RegExp("{="+n+"}","g"),e[n]);return r}function Bt(t){var e;if(t instanceof Date)e=t;else if(ft(t)){var r=this,n=r.config,i=r.format;e=i.dataTime(n.data_xFormat)(t)}else it(t)&&!isNaN(t)&&(e=new Date(+t));return(!e||isNaN(+e))&&console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),e}function Yu(){return!bt.hidden}function Fd(t,e){var r=!1;if(/Mobi/.test(ct.navigator.userAgent)&&e){var n=ct.navigator&&"maxTouchPoints"in ct.navigator&&ct.navigator.maxTouchPoints>0,i="ontouchmove"in ct||ct.DocumentTouch&&bt instanceof ct.DocumentTouch;r=n||i}var a=t&&!r?"onmouseover"in ct:!1;return a&&"mouse"||r&&"touch"||null}var ha=function(){function t(){return Id(wd,$d,Ad,Sd,kd,Cd,Md,t.data)}return t.setOptions=function(e){this.data=e.reduce(function(r,n){return Lt(Lt({},r),n)},this.data)},t.data={},t}(),Dt={bubbleBaseLength:"$baseLength",colorPattern:"__colorPattern__",dataMinMax:"$dataMinMax",dataTotalSum:"$dataTotalSum",dataTotalPerIndex:"$totalPerIndex",legendItemTextBox:"legendItemTextBox",radarPoints:"$radarPoints",setOverOut:"setOverOut",callOverOutForTouch:"callOverOutForTouch",textRect:"textRect"},zd=function(){function t(){this.cache={}}return t.prototype.add=function(e,r,n){return n===void 0&&(n=!1),this.cache[e]=n?this.cloneTarget(r):r,this.cache[e]},t.prototype.remove=function(e){var r=this;Ir(e).forEach(function(n){return delete r.cache[n]})},t.prototype.get=function(e,r){if(r===void 0&&(r=!1),r){for(var n=[],i=0,a=void 0;a=e[i];i++)a in this.cache&&n.push(this.cloneTarget(this.cache[a]));return n}else{var o=this.cache[e];return P(o)?o:null}},t.prototype.reset=function(e){var r=this;for(var n in r.cache)(e||/^\$/.test(n))&&(r.cache[n]=null)},t.prototype.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(r){return{x:r.x,value:r.value,id:r.id}})}},t}(),Vu=ct.setTimeout,Hu=ct.clearTimeout;function Pd(){var t=[],e,r=function(){r.clear(),e=Vu(function(){t.forEach(function(n){return n()})},200)};return r.clear=function(){e&&(Hu(e),e=null)},r.add=function(n){return t.push(n)},r.remove=function(n){return t.splice(t.indexOf(n),1)},r}function Uu(){var t=[],e=function(r,n){var i;function a(){for(var o=0,s=0,u;u=t[s];s++){if(u===!0||u.empty&&u.empty()){o++;continue}try{u.transition()}catch(l){o++}}i&&Hu(i),o===t.length?n&&n():i=Vu(a,50)}a()};return e.add=function(r){K(r)?t=t.concat(r):t.push(r)},e}var Nd={convertData:function(t,e){var r;if(t.bindto?(r={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(n){var i="data_"+n;i in t&&(r[n]=t[i])})):r=t,r.url&&e)this.convertUrlToData(r.url,r.mimeType,r.headers,r.keys,e);else if(r.json)r=this.convertJsonToData(r.json,r.keys);else if(r.rows)r=this.convertRowsToData(r.rows);else if(r.columns)r=this.convertColumnsToData(r.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.");return K(r)&&r},convertUrlToData:function(t,e,r,n,i){var a=this;e===void 0&&(e="csv");var o=new XMLHttpRequest;o.open("GET",t),r&&Object.keys(r).forEach(function(s){o.setRequestHeader(s,r[s])}),o.onreadystatechange=function(){if(o.readyState===4)if(o.status===200){var s=o.responseText;s&&i.call(a,a["convert"+Xt(e)+"ToData"](e==="json"?JSON.parse(s):s,n))}else throw new Error(t+": Something went wrong loading!")},o.send()},convertCsvTsvToData:function(t,e){var r=t.rows(e),n;return r.length===1?(n=[{}],r[0].forEach(function(i){n[0][i]=null})):n=t.parse(e),n},convertCsvToData:function(t){return this.convertCsvTsvToData({rows:vi,parse:pi},t)},convertTsvToData:function(t){return this.convertCsvTsvToData({rows:xi,parse:mi},t)},convertJsonToData:function(t,e){var r=this,n=this.config,i=[],a,o;if(K(t)){var s=e||n.data_keys;s.x?(a=s.value.concat(s.x),n.data_x=s.x):a=s.value,i.push(a),t.forEach(function(u){var l=a.map(function(c){var f=r.findValueInJson(u,c);return xt(f)&&(f=null),f});i.push(l)}),o=this.convertRowsToData(i)}else Object.keys(t).forEach(function(u){var l=t[u].concat();l.unshift(u),i.push(l)}),o=this.convertColumnsToData(i);return o},findValueInJson:function(t,e){if(t[e]!==void 0)return t[e];var r=e.replace(/\[(\w+)\]/g,".$1"),n=r.replace(/^\./,"").split("."),i=t;return n.some(function(a){return!(i=i&&a in i?i[a]:void 0)}),i},convertRowsToData:function(t){var e=t[0],r=[];return t.forEach(function(n,i){if(i>0){var a={};n.forEach(function(o,s){if(xt(o))throw new Error("Source data is missing a component at ("+i+", "+s+")!");a[e[s]]=o}),r.push(a)}}),r},convertColumnsToData:function(t){var e=[];return t.forEach(function(r,n){var i=r[0];r.forEach(function(a,o){if(o>0){if(xt(e[o-1])&&(e[o-1]={}),xt(a))throw new Error("Source data is missing a component at ("+n+", "+o+")!");e[o-1][i]=a}})}),e},convertDataToTargets:function(t,e){var r=this,n=this,i=n.axis,a=n.config,o=n.state,s=!1,u=!1,l=!1;i&&(s=i.isCategorized(),u=i.isTimeSeries(),l=i.isCustomX());var c=Object.keys(t[0]||{}),f=c.length?c.filter(n.isNotX,n):[],h=c.length?c.filter(n.isX,n):[],d;f.forEach(function(p){var m=r.getXKey(p);l||u?h.indexOf(m)>=0?d=(e&&n.data.xs[p]||[]).concat(t.map(function(_){return _[m]}).filter(P).map(function(_,y){return n.generateTargetX(_,p,y)})):a.data_x?d=r.getOtherTargetXs():at(a.data_xs)&&(d=n.getXValuesOfXKey(m,n.data.targets)):d=t.map(function(_,y){return y}),d&&(r.data.xs[p]=d)}),f.forEach(function(p){if(!r.data.xs[p])throw new Error('x is not defined for id = "'+p+'".')});var g=f.map(function(p,m){var _=a.data_idConverter.bind(n.api)(p),y=n.getXKey(p),T=l&&s,x=T&&t.map(function($){return $.x}).every(function($){return a.axis_x_categories.indexOf($)>-1});return{id:_,id_org:p,values:t.map(function($,b){var w=$[y],C=$[p],D;return C=C!==null&&!isNaN(C)&&!et(C)?+C:K(C)||et(C)?C:null,(T||o.hasRadar)&&m===0&&!xt(w)?(!x&&m===0&&b===0&&(a.axis_x_categories=[]),D=a.axis_x_categories.indexOf(w),D===-1&&(D=a.axis_x_categories.length,a.axis_x_categories.push(w))):D=n.generateTargetX(w,p,b),(xt(C)||n.data.xs[p].length<=b)&&(D=void 0),{x:D,value:C,id:_}}).filter(function($){return Q($.x)})}});return g.forEach(function(p){a.data_xSort&&(p.values=p.values.sort(function(m,_){var y=m.x||m.x===0?m.x:Infinity,T=_.x||_.x===0?_.x:Infinity;return y-T})),p.values.forEach(function(m,_){return m.index=_}),n.data.xs[p.id].sort(function(m,_){return m-_})}),o.hasNegativeValue=n.hasNegativeValueInTargets(g),o.hasPositiveValue=n.hasPositiveValueInTargets(g),a.data_type&&n.setTargetType(n.mapToIds(g).filter(function(p){return!(p in a.data_types)}),a.data_type),g.forEach(function(p){return n.cache.add(p.id_org,p,!0)}),g}},Xd={isX:function(t){var e=this,r=e.config,n=r.data_x&&t===r.data_x,i=at(r.data_xs)&&Rd(r.data_xs,t);return n||i},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!!(t.data_stack_normalize&&t.data_groups.length)},isGrouped:function(t){var e=this.config.data_groups;return t?e.some(function(r){return r.indexOf(t)>=0&&r.length>1}):e.length>0},getXKey:function(t){var e=this,r=e.config;return r.data_x?r.data_x:at(r.data_xs)?r.data_xs[t]:null},getXValuesOfXKey:function(t,e){var r=this,n=e&&at(e)?r.mapToIds(e):[],i;return n.forEach(function(a){r.getXKey(a)===t&&(i=r.data.xs[a])}),i},getIndexByX:function(t,e){var r=this;return e?e.indexOf(ft(t)?t:+t):(r.filterByX(r.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){var r=this;return t in r.data.xs&&r.data.xs[t]&&P(r.data.xs[t][e])?r.data.xs[t][e]:e},getOtherTargetXs:function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this,r=e.config;Object.keys(t).forEach(function(n){r.data_xs[n]=t[n]})},isMultipleX:function(){return at(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e=this,r=e.config,n;return t&&(n=r.data_names[t.id],t.name=n!==void 0?n:t.id),t},getAllValuesOnIndex:function(t,e){e===void 0&&(e=!1);var r=this,n=r.filterTargetsToShow(r.data.targets).map(function(i){return r.addName(r.getValueOnIndex(i.values,t))});return e&&(n=n.filter(function(i){return P(i.value)})),n},getValueOnIndex:function(t,e){var r=t.filter(function(n){return n.index===e});return r.length?r[0]:null},updateTargetX:function(t,e){var r=this;t.forEach(function(n){n.values.forEach(function(i,a){i.x=r.generateTargetX(e[a],n.id,a)}),r.data.xs[n.id]=e})},updateTargetXs:function(t,e){var r=this;t.forEach(function(n){e[n.id]&&r.updateTargetX([n],e[n.id])})},generateTargetX:function(t,e,r){var n=this,i=n.axis,a=i&&i.isCategorized()?r:t||r;if(i&&i.isTimeSeries()){var o=Bt.bind(n);a=o(t||n.getXValue(e,r))}else i&&i.isCustomX()&&!i.isCategorized()&&(a=P(t)?+t:n.getXValue(e,r));return a},updateXs:function(t){t.length&&(this.axis.xs=t.map(function(e){return e.x}))},getPrevX:function(t){var e=this.axis.xs[t-1];return Q(e)?e:null},getNextX:function(t){var e=this.axis.xs[t+1];return Q(e)?e:null},getBaseValue:function(t){var e=this,r=e.state.hasAxis,n=t.value;return n&&r&&(e.isAreaRangeType(t)?n=e.getRangedData(t,"mid"):e.isBubbleZType(t)&&(n=e.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var e=this.getBaseValue.bind(this),r,n;return(t||this.data.targets.map(function(i){return i.values})).forEach(function(i,a){var o=i.map(e).filter(it);r=Math.min.apply(Math,Tt([a?r:Infinity],o)),n=Math.max.apply(Math,Tt([a?n:-Infinity],o))}),{min:r,max:n}},getMinMaxData:function(){var t=this,e=Dt.dataMinMax,r=t.cache.get(e);if(!r){var n=t.data.targets.map(function(s){return s.values}),i=t.getMinMaxValue(n),a=[],o=[];n.forEach(function(s){var u=t.getFilteredDataByValue(s,i.min),l=t.getFilteredDataByValue(s,i.max);u.length&&(a=a.concat(u)),l.length&&(o=o.concat(l))}),t.cache.add(e,r={min:a,max:o})}return r},getTotalPerIndex:function(){var t=this,e=Dt.dataTotalPerIndex,r=t.cache.get(e);return t.isStackNormalized()&&!r&&(r=[],t.data.targets.forEach(function(n){n.values.forEach(function(i,a){r[a]||(r[a]=0),r[a]+=it(i.value)?i.value:0})})),r},getTotalDataSum:function(t){var e=this,r=Dt.dataTotalSum,n=e.cache.get(r);if(!it(n)){var i=ca(e.data.targets.map(function(a){return a.values})).map(function(a){return a.value}).reduce(function(a,o){return a+o});e.cache.add(r,n=i)}return t&&(n-=e.getHiddenTotalDataSum()),n},getHiddenTotalDataSum:function(){var t=this,e=t.api,r=t.state.hiddenTargetIds,n=0;return r.length&&(n=e.data.values.bind(e)(r).reduce(function(i,a){return i+a})),n},getFilteredDataByValue:function(t,e){var r=this;return t.filter(function(n){return r.getBaseValue(n)===e})},getMaxDataCount:function(){return Math.max.apply(Math,this.data.targets.map(function(t){return t.values.length}))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length;return e>1?(t=t.map(function(r){return r.values}).reduce(function(r,n){return r.concat(n)}).map(function(r){return r.x}),t=Ye(la(t)).map(function(r,n){return{x:r,index:n}})):e&&(t=t[0].values),t},mapToIds:function(t){return t.map(function(e){return e.id})},mapToTargetIds:function(t){var e=this;return t?K(t)?t.concat():[t]:e.mapToIds(e.data.targets)},hasTarget:function(t,e){for(var r=this.mapToIds(t),n=0,i=void 0;i=r[n];n++)if(i===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter(function(r){return e.isTargetToShow(r.id)})},mapTargetsToUniqueXs:function(t){var e=this,r=e.axis,n=[];return t&&t.length&&(n=la(ca(t.map(function(i){return i.values.map(function(a){return+a.x})}))),n=r&&r.isTimeSeries()?n.map(function(i){return new Date(+i)}):n.map(function(i){return+i})),Ye(n)},addHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},addHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},getValuesAsIdKeyed:function(t){var e=this,r=e.state.hasAxis,n={},i=e.isMultipleX(),a=i?e.mapTargetsToUniqueXs(t).map(function(o){return ft(o)?o:+o}):null;return t.forEach(function(o){var s=[];o.values.filter(function(u){return P(u.value)}).forEach(function(u){var l=u.value;e.isCandlestickType(u)&&(l=K(l)?l.slice(0,4):[l.open,l.high,l.low,l.close]),K(l)?s.push.apply(s,l):et(l)&&"high"in l?s.push.apply(s,Object.values(l)):e.isBubbleZType(u)?s.push(r&&e.getBubbleZData(l,"y")):i?s[e.getIndexByX(u.x,a)]=l:s.push(l)}),n[o.id]=s}),n},checkValueInTargets:function(t,e){for(var r=Object.keys(t),n,i=0;i<r.length;i++){n=t[r[i]].values;for(var a=0;a<n.length;a++)if(e(n[a].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(e){return e<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(e){return e>0})},_checkOrder:function(t){var e=this.config,r=e.data_order;return ft(r)&&r.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=this,r=Tt([],t),n=e.getSortCompareFn();return n&&r.sort(n),r},getSortCompareFn:function(t){t===void 0&&(t=!1);var e=this,r=e.config,n=e.isOrderAsc(),i=e.isOrderDesc(),a;return n||i?a=function(o,s){var u=function(f,h){return f+Math.abs(h.value)},l=o.values.reduce(u,0),c=s.values.reduce(u,0);return t?n?l-c:c-l:n?c-l:l-c}:U(r.data_order)&&(a=r.data_order.bind(e.api)),a||null},filterByX:function(t,e){return ca(t.map(function(r){return r.values})).filter(function(r){return r.x-e==0})},filterRemoveNull:function(t){var e=this;return t.filter(function(r){return P(e.getBaseValue(r))})},filterByXDomain:function(t,e){return t.map(function(r){return{id:r.id,id_org:r.id_org,values:r.values.filter(function(n){return e[0]<=n.x&&n.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels;return zu(t)&&t||Pt(t)&&at(t)},getDataIndexFromEvent:function(t){var e=this,r=e.config,n=e.state,i=n.inputType,a=n.eventReceiver,o=a.coords,s=a.rect,u=r.axis_rotated,l=i==="touch"&&t.changedTouches?t.changedTouches[0]:t,c=ua(o,u?l.clientY-s.top:l.clientX-s.left,0,o.length-1,u);return c},getDataLabelLength:function(t,e,r){var n=this,i=[0,0],a=1.3;return n.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(o){return n.dataLabelFormat(o.id)(o)}).each(function(o,s){i[s]=this.getBoundingClientRect()[r]*a}).remove(),i},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var r=t[e].x,n=[],i;for(i=e-1;i>=0&&r===t[i].x;i--)n.push(t[i]);for(i=e;i<t.length&&r===t[i].x;i++)n.push(t[i]);return n},findClosestFromTargets:function(t,e){var r=this,n=t.map(function(i){return r.findClosest(i.values,e)});return r.findClosest(n,e)},findClosest:function(t,e){var r=this,n=r.config,i=r.$el.main,a=t.filter(function(u){return u&&P(u.value)}),o=n.point_sensitivity,s;return a.filter(function(u){return r.isBarType(u.id)}).forEach(function(u){var l=i.select("."+v.bars+r.getTargetSelectorSuffix(u.id)+" ."+v.bar+"-"+u.index).node();!s&&r.isWithinBar(l)&&(s=u)}),a.filter(function(u){return!r.isBarType(u.id)}).forEach(function(u){var l=r.dist(u,e);l<o&&(o=l,s=u)}),s},dist:function(t,e){var r=this,n=r.config.axis_rotated,i=r.scale,a=n?1:0,o=n?0:1,s=r.circleY(t,t.index),u=(i.zoom||i.x)(t.x);return Math.sqrt(Math.pow(u-e[a],2)+Math.pow(s-e[o],2))},convertValuesToStep:function(t){var e=this,r=e.axis,n=e.config,i=n.line_step_type,a=r?r.isCategorized():!1,o=K(t)?t.concat():[t];if(!(a||/step\-(after|before)/.test(i)))return t;var s=o[0],u=o[o.length-1],l=s.id,c=s.x;return o.unshift({x:--c,value:s.value,id:l}),a&&i==="step-after"&&o.unshift({x:--c,value:s.value,id:l}),c=u.x,o.push({x:++c,value:u.value,id:l}),a&&i==="step-before"&&o.push({x:++c,value:u.value,id:l}),o},convertValuesToRange:function(t){var e=K(t)?t.concat():[t],r=[];return e.forEach(function(n){var i=n.x,a=n.id;r.push({x:i,id:a,value:n.value[0]}),r.push({x:i,id:a,value:n.value[2]})}),r},updateDataAttributes:function(t,e){var r=this,n=r.config,i=n["data_"+t];return xt(e)||(Object.keys(e).forEach(function(a){i[a]=e[a]}),r.redraw({withLegend:!0})),i},getRangedData:function(t,e,r){e===void 0&&(e=""),r===void 0&&(r="areaRange");var n=t==null?void 0:t.value;if(K(n)){var i={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[r].indexOf(e);return i>=0&&n?n[i]:void 0}else if(n)return n[e];return n},getRatio:function(t,e,r){var n=this,i=n.config,a=n.state,o=n.api,s=0;if(e&&o.data.shown().length){if(s=e.ratio||e.value,t==="arc")if(n.pie.padAngle()())s=e.value/n.getTotalDataSum(!0);else{var u=i.gauge_fullCircle?n.getArcLength():n.getStartAngle()*-2,l=n.hasType("gauge")?u:Math.PI*2;s=(e.endAngle-e.startAngle)/l}else if(t==="index"){var c=o.data.values.bind(o),f=this.getTotalPerIndex();if(a.hiddenTargetIds.length){var h=c(a.hiddenTargetIds,!1);h.length&&(h=h.reduce(function(p,m){return p.map(function(_,y){return(it(_)?_:0)+m[y]})}),f=f.map(function(p,m){return p-h[m]}))}e.ratio=it(e.value)&&f&&f[e.index]>0?e.value/f[e.index]:0,s=e.ratio}else if(t==="radar")s=parseFloat(String(Math.max(e.value,0)))/a.current.dataMax*i.radar_size_ratio;else if(t==="bar"){var d=n.getYScaleById.bind(n)(e.id),g=d.domain().reduce(function(p,m){return m-p});s=Math.abs(e.value)/g}}return r&&s?s*100:s},updateDataIndexByX:function(t){var e=this,r=t.reduce(function(n,i,a){return n[Number(i.x)]=a,n},{});e.data.targets.forEach(function(n){n.values.forEach(function(i,a){var o=r[Number(i.x)];o===void 0&&(o=a),i.index=o})})},isBubbleZType:function(t){var e=this;return e.isBubbleType(t)&&(et(t.value)&&("z"in t.value||"y"in t.value)||K(t.value)&&t.value.length===2)},getDataById:function(t){var e=this.cache.get(t)||this.api.data(t);return K(e)?e[0]:e}},Bd={load:function(t,e){var r=this,n=t;n&&(e.filter&&(n=n.filter(e.filter)),(e.type||e.types)&&n.forEach(function(i){var a=e.types&&e.types[i.id]||e.type;r.setTargetType(i.id,a)}),r.data.targets.forEach(function(i){for(var a=0;a<n.length;a++)if(i.id===n[a].id){i.values=n[a].values,n.splice(a,1);break}}),r.data.targets=r.data.targets.concat(n)),r.updateTargets(r.data.targets),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.updateTypesElements(),e.done&&e.done.call(r.api)},loadFromArgs:function(t){var e=this;if(!!e.config){e.cache.reset();var r=t.data||e.convertData(t,function(n){return e.load(e.convertDataToTargets(n),t)});r&&e.load(e.convertDataToTargets(r),t)}},unload:function(t,e){var r=this,n=r.state,i=r.$el,a=e,o=t;if(r.cache.reset(),a||(a=function(){}),o=o.filter(function(s){return r.hasTarget(r.data.targets,s)}),!o||o.length===0){a();return}i.svg.selectAll(o.map(function(s){return r.selectorTarget(s)})).transition().style("opacity","0").remove().call(Pu,a),o.forEach(function(s){n.withoutFadeIn[s]=!1,i.legend&&i.legend.selectAll("."+v.legendItem+r.getTargetSelectorSuffix(s)).remove(),r.data.targets=r.data.targets.filter(function(u){return u.id!==s})}),r.updateTypesElements()}},Yd={selectRectForSingle:function(t,e,r){var n=this,i=n.config,a=n.$el.main,o=i.data_selection_enabled,s=i.data_selection_grouped,u=i.data_selection_isselectable,l=i.tooltip_grouped,c=n.getAllValuesOnIndex(r);l&&(n.showTooltip(c,t),n.showGridFocus&&n.showGridFocus(c),!o||s)||a.selectAll("."+v.shape+"-"+r).each(function(){F(this).classed(v.EXPANDED,!0),o&&e.style("cursor",s?"pointer":null),l||(n.hideGridFocus&&n.hideGridFocus(),n.hideTooltip(),!s&&n.setExpand(r))}).filter(function(f){return n.isWithinShape(this,f)}).call(function(f){var h=f.data();o&&(s||u&&u.bind(n.api)(h))&&e.style("cursor","pointer"),l||(n.showTooltip(h,t),n.showGridFocus&&n.showGridFocus(h),n.unexpandCircles&&n.unexpandCircles(),f.each(function(d){return n.setExpand(r,d.id)}))})},setExpand:function(t,e,r){var n=this,i=n.config,a=n.$el.circle;a&&i.point_focus_expand_enabled&&n.expandCircles(t,e,r),n.expandBarTypeShapes(!0,t,e,r)},expandBarTypeShapes:function(t,e,r,n){t===void 0&&(t=!0);var i=this;["bar","candlestick"].filter(function(a){return i.$el[a]}).forEach(function(a){n&&i.$el[a].classed(v.EXPANDED,!1),i.getShapeByIndex(a,e,r).classed(v.EXPANDED,t)})},setOverOut:function(t,e){var r=this,n=r.config,i=r.state.hasRadar,a=r.$el.main,o=et(e);if(o||e!==-1){var s=n[t?"data_onover":"data_onout"].bind(r.api);if(n.color_onover&&r.setOverColor(t,e,o),o)s(e,a.select("."+v.arc+r.getTargetSelectorSuffix(e.id)).node());else if(n.tooltip_grouped)t&&(n.point_focus_only&&i?r.showCircleFocus(r.getAllValuesOnIndex(e,!0)):r.setExpand(e,null,!0)),!r.isMultipleX()&&a.selectAll("."+v.shape+"-"+e).each(function(c){s(c,this)});else{var u=r.cache.get(Dt.setOverOut)||[],l=a.selectAll("."+v.shape+"-"+e).filter(function(c){return r.isWithinShape(this,c)});l.each(function(c){var f=this;(u.length===0||u.every(function(h){return h!==f}))&&(s(c,this),u.push(this))}),u.length>0&&l.empty()&&(s=n.data_onout.bind(r.api),u.forEach(function(c){return s(F(c).datum(),c)}),u=[]),r.cache.add(Dt.setOverOut,u)}}},callOverOutForTouch:function(t){var e=this,r=e.cache.get(Dt.callOverOutForTouch);(et(t)&&r?t.id!==r.id:t!==r)&&((r||it(r))&&e.setOverOut(!1,r),(t||it(t))&&e.setOverOut(!0,t),e.cache.add(Dt.callOverOutForTouch,t))},getDraggableSelection:function(){var t=this,e=t.config,r=t.state;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Zn().on("drag",function(n){r.event=n,t.drag(oe(n,this))}).on("start",function(n){r.event=n,t.dragstart(oe(n,this))}).on("end",function(n){r.event=n,t.dragend()}):function(){}},dispatchEvent:function(t,e,r){var n=this,i=n.config,a=n.state,o=a.eventReceiver,s=a.hasAxis,u=a.hasRadar,l=n.$el,c=l.eventRect,f=l.arcs,h=l.radar,d=n.isMultipleX(),g=(u?h.axes.select("."+v.axis+"-"+e+" text"):c||f.selectAll("."+v.target+" path").filter(function(w,C){return C===e})).node(),p=g.getBoundingClientRect(),m=p.width,_=p.left,y=p.top;if(s&&!u&&!d){var T=o.coords[e];m=T.w,_+=T.x,y+=T.y}var x=_+(r?r[0]:0)+(d||i.axis_rotated?0:m/2),$=y+(r?r[1]:0),b={screenX:x,screenY:$,clientX:x,clientY:$};Od[/^(mouse|click)/.test(t)?"mouse":"touch"](g,t,b)},setDragStatus:function(t){this.state.dragging=t}},Vd={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(t,e){var r=this,n=/s$/.test(t),i=/^(area|arc|line)s?$/.test(t),a=n?"id":"index";return function(o){var s=o.data||o,u=(e?r.generateClass(v[n?"shapes":"shape"],s[a]):"")+r.generateClass(v[t],s[i?"id":a]);return u.trim()}},getChartClass:function(t){var e=this;return function(r){return v["chart"+t]+e.classTarget((r.data?r.data:r).id)}},generateExtraLineClass:function(){var t=this,e=t.config.line_classes||[],r=[];return function(n){var i=n.id||n.data&&n.data.id||n;return r.indexOf(i)<0&&r.push(i),e[r.indexOf(i)%e.length]}},classRegion:function(t,e){return this.generateClass(v.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],r="";return e&&(r=" "+v.target+"-"+e),this.generateClass(v.target,t)+r},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(this.state.focusedTargetIds.indexOf(t.id)>=0?v.focused:"")},classDefocused:function(t){return" "+(this.state.defocusedTargetIds.indexOf(t.id)>=0?v.defocused:"")},getTargetSelectorSuffix:function(t){return t||t===0?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){var r=e||"",n=this.getTargetSelectorSuffix(t);return r+"."+(v.target+n)+", "+r+"."+(v.circles+n)},selectorTargets:function(t,e){var r=this,n=t||[];return n.length?n.map(function(i){return r.selectorTarget(i,e)}):null},selectorLegend:function(t){return"."+(v.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map(function(r){return e.selectorLegend(r)}):null}},Hd={categoryName:function(t){var e=this.config.axis_x_categories;return e&&t<e.length?e[t]:t}},Ud=function(t,e,r){var n=F(t.cloneNode(!0));return n.attr("id",r).insert("rect",":first-child").attr("width",n.attr("width")).attr("height",n.attr("height")).style("fill",e),{id:r,node:n.node()}},Gd=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Wd={getColorFromCss:function(){var t=Dt.colorPattern,e=bt.body,r=e[t];if(!r){var n=";",i=bt.createElement("span");i.className=v.colorPattern,i.style.display="none",e.appendChild(i);var a=ct.getComputedStyle(i).backgroundImage;i.parentNode.removeChild(i),a.indexOf(n)>-1&&(r=a.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(n).map(function(o){return o.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),e[t]=r)}return r},generateColor:function(){var t=this,e=t.config,r=e.data_colors,n=e.data_color,i=[],a=at(e.color_pattern)?e.color_pattern:yr(t.getColorFromCss()||Gd).range(),o=a;if(U(e.color_tiles)){var s=e.color_tiles.bind(t.api)(),u=a.map(function(l,c){var f=l.replace(/[#\(\)\s,]/g,""),h=t.state.datetimeId+"-pattern-"+f+"-"+c;return Ud(s[c%s.length],l,h)});a=u.map(function(l){return"url(#"+l.id+")"}),t.patterns=u}return function(l){var c=l.id||l.data&&l.data.id||l,f=t.isTypeOf(c,["line","spline","step"])||!e.data_types[c],h;return U(r[c])?h=r[c].bind(t.api)(l):r[c]?h=r[c]:(i.indexOf(c)<0&&i.push(c),h=f?o[i.indexOf(c)%o.length]:a[i.indexOf(c)%a.length],r[c]=h),U(n)?n.bind(t.api)(h,l):h}},generateLevelColor:function(){var t=this,e=t.config,r=e.color_pattern,n=e.color_threshold,i=n.unit==="value",a=n.max||100,o=n.values&&n.values.length?n.values:[];return at(n)?function(s){for(var u=i?s:s*100/a,l=r[r.length-1],c=0,f=o.length;c<f;c++)if(u<=o[c]){l=r[c];break}return l}:null},setOverColor:function(t,e){var r=this,n=r.config,i=r.$el.main,a=n.color_onover,o=t?a:r.color;et(o)?o=function(s){var u=s.id;return u in a?a[u]:r.color(u)}:ft(o)?o=function(){return a}:U(a)&&(o=o.bind(r.api)),i.selectAll(et(e)?"."+v.arc+r.getTargetSelectorSuffix(e.id):"."+v.shape+"-"+e).style("fill",o)}},G={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step"},ue={Area:[G.AREA,G.AREA_SPLINE,G.AREA_SPLINE_RANGE,G.AREA_LINE_RANGE,G.AREA_STEP],AreaRange:[G.AREA_SPLINE_RANGE,G.AREA_LINE_RANGE],Arc:[G.PIE,G.DONUT,G.GAUGE,G.RADAR],Line:[G.LINE,G.SPLINE,G.AREA,G.AREA_SPLINE,G.AREA_SPLINE_RANGE,G.AREA_LINE_RANGE,G.STEP,G.AREA_STEP],Step:[G.STEP,G.AREA_STEP],Spline:[G.SPLINE,G.AREA_SPLINE,G.AREA_SPLINE_RANGE]},qd={getYDomainMinMax:function(t,e){var r=this,n=r.axis,i=r.config,a=e==="min",o=i.data_groups,s=r.mapToIds(t),u=r.getValuesAsIdKeyed(t);if(o.length>0)for(var l=r["has"+(a?"Negative":"Positive")+"ValueInTargets"](t),c=function(g,p){if(p=p.filter(function($){return s.indexOf($)>=0}),p.length===0)return f=p,"continue";var m=p[0],_=n.getId(m);l&&u[m]&&(u[m]=u[m].map(function($){return(a?$<0:$>0)?$:0}));for(var y=function($,b){if(!u[b])return"continue";var w=n.getId(b);u[b].forEach(function(C,D){var O=+C,k=a?O>0:O<0;w===_&&!(l&&k)&&(u[m][D]+=O)})},T=1,x=void 0;x=p[T];T++)y(T,x);f=p},f,h=0,d=void 0;d=o[h];h++)c(h,d),d=f;return se(e,Object.keys(u).map(function(g){return se(e,u[g])}))},getYDomainMin:function(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function(t){return this.getYDomainMinMax(t,"max")},isHiddenTargetWithYDomain:function(t){var e=this;return e.state.hiddenTargetIds.some(function(r){return e.axis.getId(r)===t})},getYDomain:function(t,e,r){var n=this,i=n.axis,a=n.config,o=n.scale,s="axis_"+e;if(n.isStackNormalized())return[0,100];var u=o&&o[e]&&o[e].type==="log",l=t.filter(function(E){return i.getId(E.id)===e}),c=r?n.filterByXDomain(l,r):l;if(c.length===0)return n.isHiddenTargetWithYDomain(e)?o[e].domain():e==="y2"?o.y.domain():n.getYDomain(t,"y2",r);var f=a[s+"_min"],h=a[s+"_max"],d=n.getYDomainMin(c),g=n.getYDomainMax(c),p=a[s+"_center"],m=Tt([G.BAR,G.BUBBLE,G.SCATTER],ue.Line).some(function(E){var B=E.indexOf("area")>-1?"area":E;return n.hasType(E,c)&&a[B+"_zerobased"]}),_=a[s+"_inverted"],y=n.hasDataLabel()&&a.axis_rotated,T=n.hasDataLabel()&&!a.axis_rotated;d=P(f)?f:P(h)?d<h?d:h-10:d,g=P(h)?h:P(f)?f<g?g:f+10:g,isNaN(d)&&(d=0),isNaN(g)&&(g=d),d===g&&(d<0?g=0:d=0);var x=d>=0&&g>=0,$=d<=0&&g<=0;(P(f)&&x||P(h)&&$)&&(m=!1),m&&(x&&(d=0),$&&(g=0));var b=Math.abs(g-d),w={top:b*.1,bottom:b*.1};if(Q(p)){var C=Math.max(Math.abs(d),Math.abs(g));g=p+C,d=p-C}if(y){var D=Ln(o.y.range()),O=n.getDataLabelLength(d,g,"width").map(function(E){return E/D});["bottom","top"].forEach(function(E,B){w[E]+=b*(O[B]/(1-O[0]-O[1]))})}else if(T){var k=n.getDataLabelLength(d,g,"height");["bottom","top"].forEach(function(E,B){w[E]+=i.convertPixelsToAxisPadding(k[B],b)})}var M=a[s+"_padding"];at(M)&&["bottom","top"].forEach(function(E){w[E]=i.getPadding(M,E,w[E],b)}),m&&(x&&(w.bottom=d),$&&(w.top=-g));var L=u?[d,g].map(function(E){return E<0?0:E}):[d-w.bottom,g+w.top];return _?L.reverse():L},getXDomainMinMax:function(t,e){var r=this,n=r.config["axis_x_"+e],i=se(e,t.map(function(o){return se(e,o.values.map(function(s){return s.x}))})),a=et(n)?n.value:n;return a=Q(a)&&r.axis.isTimeSeries()?Bt.bind(this)(a):a,et(n)&&n.fit&&(e==="min"&&a<i||e==="max"&&a>i)&&(a=void 0),Q(a)?a:i},getXDomainMin:function(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function(t){var e=this,r=e.axis,n=e.config,i=t[1]-t[0],a=n.axis_x_padding,o,s;r.isCategorized()?s=0:e.hasType("bar")?(o=e.getMaxDataCount(),s=o>1?i/(o-1)/2:.5):s=i*.01;var u=s,l=s;return et(a)&&at(a)?(u=P(a.left)?a.left:s,l=P(a.right)?a.right:s):it(n.axis_x_padding)&&(u=a,l=a),{left:u,right:l}},getXDomain:function(t){var e=this,r=e.scale.x.type==="log",n=[e.getXDomainMin(t),e.getXDomainMax(t)],i=0,a=0;if(r)i=n[0],a=n[1];else{var o=e.axis.isCategorized(),s=e.axis.isTimeSeries(),u=e.getXDomainPadding(n),l=n[0],c=n[1];l-c==0&&!o&&(s?(l=new Date(l.getTime()*.5),c=new Date(c.getTime()*1.5)):(l=l===0?1:l*.5,c=c===0?-1:c*1.5)),(l||l===0)&&(i=s?new Date(l.getTime()-u.left):l-u.left),(c||c===0)&&(a=s?new Date(c.getTime()+u.right):c+u.right)}return[i,a]},updateXDomain:function(t,e,r,n,i){var a=this,o=a.config,s=a.org,u=a.scale,l=u.x,c=u.subX,f=o.zoom_enabled;if(r&&(l.domain(i||Ye(a.getXDomain(t))),s.xDomain=l.domain(),f&&a.zoom.updateScaleExtent(),c.domain(l.domain()),a.brush&&a.brush.scale(c)),e){var h=i||!a.brush||Dd(a)?s.xDomain:Xu(a).map(c.invert);l.domain(h),f&&a.zoom.updateScaleExtent()}return n&&l.domain(a.trimXDomain(l.orgDomain())),l.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),r=e[0],n=e[1];return t[0]<=r&&(t[1]=+t[1]+(r-t[0]),t[0]=r),n<=t[1]&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t},getZoomDomain:function(){var t=this,e=t.config,r=t.org,n=r.xDomain,i=n[0],a=n[1];return Q(e.zoom_x_min)&&(i=se("min",[i,e.zoom_x_min])),Q(e.zoom_x_max)&&(a=se("max",[a,e.zoom_x_max])),[i,a]}};function Gu(t,e,r){var n=t.config,i="axis_"+e+"_tick_format",a=n[i]?n[i]:t.defaultValueFormat;return a(r)}var Zd={getYFormat:function(t){var e=this,r=e.yFormat,n=e.y2Format;return t&&!e.hasType("gauge")&&(r=e.defaultArcValueFormat,n=e.defaultArcValueFormat),function(i,a,o){var s=e.axis&&e.axis.getId(o)==="y2"?n:r;return s.call(e,i,a)}},yFormat:function(t){return Gu(this,"y",t)},y2Format:function(t){return Gu(this,"y2",t)},defaultValueFormat:function(t){return P(t)?+t:""},defaultArcValueFormat:function(t,e){return(e*100).toFixed(1)+"%"},dataLabelFormat:function(t){var e=this,r=e.config.data_labels,n=function(a){return P(a)?+a:""},i=n;return U(r.format)?i=r.format:Pt(r.format)&&(r.format[t]?i=r.format[t]===!0?n:r.format[t]:i=function(){return""}),i.bind(e.api)}},Kd={initLegend:function(){var t=this,e=t.config,r=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(r.legend=t.$el.svg.append("g").classed(v.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,r){var n=this,i=n.config,a=n.state,o=n.scale,s=n.$el,u=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};u.withTransition=Zt(u,"withTransition",!0),u.withTransitionForTransform=Zt(u,"withTransitionForTransform",!0),i.legend_contents_bindto&&i.legend_contents_template?n.updateLegendTemplate():n.updateLegendElement(t||n.mapToIds(n.data.targets),u,r),s.legend.selectAll("."+v.legendItem).classed(v.legendItemHidden,function(l){var c=!n.isTargetToShow(l);return c&&(this.style.opacity=null),c}),n.updateScales(!1,!o.zoom),n.updateSvgSize(),n.transformAll(u.withTransitionForTransform,r),a.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,r=t.$el,n=F(e.legend_contents_bindto),i=e.legend_contents_template;if(!n.empty()){var a=t.mapToIds(t.data.targets),o=[],s="";a.forEach(function(l){var c=U(i)?i.bind(t.api)(l,t.color(l),t.api.data(l)[0].values):fa(i,{COLOR:t.color(l),TITLE:l});c&&(o.push(l),s+=c)});var u=n.html(s).selectAll(function(){return this.childNodes}).data(o);t.setLegendItem(u),r.legend=n}},updateSizeForLegend:function(t){var e=this,r=e.config,n=e.state,i=n.isLegendTop,a=n.isLegendLeft,o=n.isLegendRight,s=n.isLegendInset,u=n.current,l=t.width,c=t.height,f={top:i?e.getCurrentPaddingTop()+r.legend_inset_y+5.5:u.height-c-e.getCurrentPaddingBottom()-r.legend_inset_y,left:a?e.getCurrentPaddingLeft()+r.legend_inset_x+.5:u.width-l-e.getCurrentPaddingRight()-r.legend_inset_x+.5};e.state.margin3={top:o?0:s?f.top:u.height-c,right:NaN,bottom:0,left:o?u.width-l:s?f.left:0}},transformLegend:function(t){var e=this,r=e.$el.legend;(t?r.transition():r).attr("transform",e.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var r=this.$el.legend;r&&r.select("."+v.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this,e=t.state,r=e.current.width,n=e.isLegendRight,i=e.isLegendInset,a=e.legendItemWidth,o=e.legendStep;return t.config.legend_show?n||i?a*(o+1):r:0},getLegendHeight:function(){var t=this,e=t.state,r=e.current,n=e.isLegendRight,i=e.legendItemHeight,a=e.legendStep;return t.config.legend_show?n?r.height:Math.max(20,i)*(a+1):0},opacityForLegend:function(t){return t.classed(v.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(v.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var r=this,n=r.$el.legend,i=r.mapToTargetIds(t);n&&n.selectAll("."+v.legendItem).filter(function(a){return i.indexOf(a)>=0}).classed(v.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?r.opacityForLegend:r.opacityForUnfocusedLegend).call(r,F(this))})},revertLegend:function(){var t=this,e=t.$el.legend;e&&e.selectAll("."+v.legendItem).classed(v.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(F(this))})},showLegend:function(t){var e=this,r=e.config,n=e.$el;r.legend_show||(r.legend_show=!0,n.legend?n.legend.style("visibility","visible"):e.initLegend(),!e.state.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),n.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(F(this))})},hideLegend:function(t){var e=this,r=e.config,n=e.$el.legend;r.legend_show&&sa(t)&&(r.legend_show=!1,n.style("visibility","hidden")),e.addHiddenLegendIds(t),n.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var r=this,n=r.cache,i=r.state,a,o=Dt.legendItemTextBox;return t&&(a=!i.redrawing&&n.get(o)||{},a[t]||(a[t]=r.getTextRect(e,v.legendItem),n.add(o,a)),a=a[t]),a},setLegendItem:function(t){var e=this,r=e.api,n=e.config,i=e.state,a=i.inputType==="touch",o=e.hasType("gauge");t.attr("class",function(s){var u=F(this),l=!u.empty()&&u.attr("class")||"";return l+e.generateClass(v.legendItem,s)}).style("visibility",function(s){return e.isLegendToShow(s)?"visible":"hidden"}),n.interaction_enabled&&(t.style("cursor","pointer").on("click",function(s,u){ot(n.legend_item_onclick,r,u)||(s.altKey?(r.hide(),r.show(u)):(r.toggle(u),F(this).classed(v.legendItemFocused,!1).style("opacity",null))),a&&e.hideTooltip()}),!a&&t.on("mouseout",function(s,u){ot(n.legend_item_onout,r,u)||(F(this).classed(v.legendItemFocused,!1),o&&e.undoMarkOverlapped(e,"."+v.gaugeValue),e.api.revert())}).on("mouseover",function(s,u){ot(n.legend_item_onover,r,u)||(F(this).classed(v.legendItemFocused,!0),o&&e.markOverlapped(u,e,"."+v.gaugeValue),!i.transiting&&e.isTargetToShow(u)&&r.focus(u))}))},updateLegendElement:function(t,e){var r=this,n=r.config,i=r.state,a=r.$el.legend,o=4,s=10,u=10,l=n.legend_item_tile_width+5,c=0,f=0,h,d,g=0,p={},m={},_={},y=[0],T={},x=0,$,b=i.isLegendRight||i.isLegendInset,w=t.filter(function(S){return!Q(n.data_names[S])||n.data_names[S]!==null}),C=e.withTransition,D=function(S,I,nt){var _t=nt===0,R=nt===w.length-1,z=r.getLegendItemTextBox(I,S),N=z.width+l+(R&&!b?0:s)+n.legend_padding,A=z.height+o,st=b?A:N,X=b?r.getLegendHeight():r.getLegendWidth(),tt,pt=function(Mt,ll){ll||(tt=(X-g-st)/2,tt<u&&(tt=(X-st)/2,g=0,x++)),T[Mt]=x,y[x]=i.isLegendInset?10:tt,p[Mt]=g,g+=st};if(_t&&(g=0,x=0,c=0,f=0),n.legend_show&&!r.isLegendToShow(I)){m[I]=0,_[I]=0,T[I]=0,p[I]=0;return}m[I]=N,_[I]=A,(!c||N>=c)&&(c=N),(!f||A>=f)&&(f=A);var Yt=b?f:c;n.legend_equally?(Object.keys(m).forEach(function(Mt){return m[Mt]=c}),Object.keys(_).forEach(function(Mt){return _[Mt]=f}),tt=(X-Yt*w.length)/2,tt<u?(g=0,x=0,w.forEach(function(Mt){return pt(Mt)})):pt(I,!0)):pt(I)};i.isLegendInset&&(x=n.legend_inset_step?n.legend_inset_step:w.length,r.updateLegendStep(x)),i.isLegendRight?(h=function(S){return c*T[S]},d=function(S){return y[T[S]]+p[S]}):i.isLegendInset?(h=function(S){return c*T[S]+10},d=function(S){return y[T[S]]+p[S]}):(h=function(S){return y[T[S]]+p[S]},d=function(S){return f*T[S]});var O=function(S,I){return h(S,I)+4+n.legend_item_tile_width},k=function(S,I){return h(S,I)},M=function(S,I){return h(S,I)-2},L=function(S,I){return h(S,I)-2+n.legend_item_tile_width},E=function(S,I){return d(S,I)+9},B=function(S,I){return d(S,I)-5},W=function(S,I){return d(S,I)+4},q=-200,J=a.selectAll("."+v.legendItem).data(w).enter().append("g");r.setLegendItem(J),J.append("text").text(function(S){return Q(n.data_names[S])?n.data_names[S]:S}).each(function(S,I){D(this,S,I)}).style("pointer-events","none").attr("x",b?O:q).attr("y",b?q:E),J.append("rect").attr("class",v.legendItemEvent).style("fill-opacity","0").attr("x",b?k:q).attr("y",b?q:B);var j=function(S){var I=r.getDataById(S);return r.levelColor?r.levelColor(I.values[0].value):r.color(I)},ut=n.legend_usePoint;if(ut){var V=[];J.append(function(S){var I=at(n.point_pattern)?n.point_pattern:[n.point_type];V.indexOf(S)===-1&&V.push(S);var nt=I[V.indexOf(S)%I.length];return nt==="rectangle"&&(nt="rect"),bt.createElementNS(Gt.svg,"hasValidPointType"in r&&r.hasValidPointType(nt)?nt:"use")}).attr("class",v.legendItemPoint).style("fill",j).style("pointer-events","none").attr("href",function(S,I,nt){var _t=nt[I],R=_t.nodeName.toLowerCase();return R==="use"?"#"+i.datetimeId+"-point-"+S:void 0})}else J.append("line").attr("class",v.legendItemTile).style("stroke",j).style("pointer-events","none").attr("x1",b?M:q).attr("y1",b?q:W).attr("x2",b?L:q).attr("y2",b?q:W).attr("stroke-width",n.legend_item_tile_height);$=a.select("."+v.legendBackground+" rect"),i.isLegendInset&&c>0&&$.size()===0&&($=a.insert("g","."+v.legendItem).attr("class",v.legendBackground).append("rect"));var rt=a.selectAll("text").data(w).text(function(S){return Q(n.data_names[S])?n.data_names[S]:S}).each(function(S,I){D(this,S,I)});(C?rt.transition():rt).attr("x",O).attr("y",E);var wt=a.selectAll("rect."+v.legendItemEvent).data(w);if((C?wt.transition():wt).attr("width",function(S){return m[S]}).attr("height",function(S){return _[S]}).attr("x",k).attr("y",B),ut){var gt=a.selectAll("."+v.legendItemPoint).data(w);(C?gt.transition():gt).each(function(){var S=this.nodeName.toLowerCase(),I=n.point_r,nt="x",_t="y",R=2,z=2.5,N,A,st;if(S==="circle"){var X=I*.2;nt="cx",_t="cy",N=I+X,R=I*2,z=-X}else if(S==="rect"){var X=I*2.5;A=X,st=X,z=3}F(this).attr(nt,function(tt){return M(tt)+R}).attr(_t,function(tt){return W(tt)-z}).attr("r",N).attr("width",A).attr("height",st)})}else{var gt=a.selectAll("line."+v.legendItemTile).data(w);(C?gt.transition():gt).style("stroke",j).attr("x1",M).attr("y1",W).attr("x2",L).attr("y2",W)}$&&(C?$.transition():$).attr("height",r.getLegendHeight()-12).attr("width",c*(x+1)+10),r.updateLegendItemWidth(c),r.updateLegendItemHeight(f),r.updateLegendStep(x)}},Qd={redraw:function(t){t===void 0&&(t={});var e=this,r=e.config,n=e.state,i=e.$el,a=i.main;n.redrawing=!0;var o=e.filterTargetsToShow(e.data.targets),s=t.initializing,u=t.flow,l=e.getWithOption(t),c=l.Transition?r.transition_duration:0,f=l.TransitionForExit?c:0,h=l.TransitionForAxis?c:0,d=e.axis&&e.axis.generateTransitions(h);e.updateSizes(s),l.Legend&&r.legend_show?(t.withTransition=!!c,e.updateLegend(e.mapToIds(e.data.targets),t,d)):l.Dimension&&e.updateDimension(!0),(!e.hasArcType()||n.hasRadar)&&e.updateCircleY&&(e.circleY=e.updateCircleY()),n.hasAxis?(e.axis.redrawAxis(o,l,d,u,s),r.data_empty_label_text&&a.select("text."+v.text+"."+v.empty).attr("x",n.width/2).attr("y",n.height/2).text(r.data_empty_label_text).style("display",o.length?"none":null),e.hasGrid()&&e.updateGrid(c),r.regions.length&&e.updateRegion(c),["bar","candlestick","line","area"].forEach(function(g){var p=Xt(g);(/^(line|area)$/.test(g)&&e.hasTypeOf(p)||e.hasType(g))&&e["update"+p](f)}),i.text&&a.selectAll("."+v.selectedCircles).filter(e.isBarType.bind(e)).selectAll("circle").remove(),r.interaction_enabled&&!u&&l.EventRect&&(e.redrawEventRect(),e.bindZoomEvent&&e.bindZoomEvent())):(i.arcs&&e.redrawArc(c,f,l.Transform),i.radar&&e.redrawRadar(f)),!n.resizing&&(e.hasPointType()||n.hasRadar)&&e.updateCircle(),e.hasDataLabel()&&!e.hasArcType(null,["radar"])&&e.updateText(f),e.redrawTitle&&e.redrawTitle(),s&&e.updateTypesElements(),e.generateRedrawList(o,u,c,l.Subchart),e.callPluginHook("$redraw",t,c)},generateRedrawList:function(t,e,r,n){var i=this,a=i.config,o=i.state,s=i.getDrawShape();o.hasAxis&&a.subchart_show&&i.redrawSubchart(n,r,s);var u=e&&i.generateFlow({targets:t,flow:e,duration:e.duration,shape:s,xv:i.xv.bind(i)}),l=(r||u)&&Yu(),c=i.getRedrawList(s,e,u,l),f=e||a.onrendered?function(){u&&u(),o.redrawing=!1,ot(a.onrendered,i.api)}:null;if(f)if(l&&c.length){var h=Uu();xr().duration(r).each(function(){c.reduce(function(d,g){return d.concat(g)},[]).forEach(function(d){return h.add(d)})}).call(h,f)}else o.transiting||f();i.mapToIds(i.data.targets).forEach(function(d){o.withoutFadeIn[d]=!0})},getRedrawList:function(t,e,r,n){var i=this,a=i.config,o=i.state,s=o.hasAxis,u=o.hasRadar,l=i.$el.grid,c=t.pos,f=c.cx,h=c.cy,d=c.xForText,g=c.yForText,p=[];return s&&((a.grid_x_lines.length||a.grid_y_lines.length)&&p.push(i.redrawGrid(n)),a.regions.length&&p.push(i.redrawRegion(n)),Object.keys(t.type).forEach(function(m){var _=Xt(m),y=t.type[m];(/^(area|line)$/.test(m)&&i.hasTypeOf(_)||i.hasType(m))&&p.push(i["redraw"+_](y,n))}),!e&&l.main&&p.push(i.updateGridFocus())),(!i.hasArcType()||u)&&at(a.data_labels)&&a.data_labels!==!1&&p.push(i.redrawText(d,g,e,n)),(i.hasPointType()||u)&&!a.point_focus_only&&i.redrawCircle&&p.push(i.redrawCircle(f,h,n,r)),p},updateAndRedraw:function(t){t===void 0&&(t={});var e=this,r=e.config,n=e.state,i;t.withTransition=Zt(t,"withTransition",!0),t.withTransform=Zt(t,"withTransform",!1),t.withLegend=Zt(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=Zt(t,"withTransitionForTransform",t.withTransition),t.withLegend&&r.legend_show||(n.hasAxis&&(i=e.axis.generateTransitions(t.withTransitionForAxis?r.transition_duration:0)),e.updateScales(),e.updateSvgSize(),e.transformAll(t.withTransitionForTransform,i)),e.redraw(t,i)},redrawWithoutRescale:function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}};function we(t,e,r){t===void 0&&(t="linear"),e===void 0&&(e=0),r===void 0&&(r=1);var n={linear:wr,log:Sr,_log:Ar,time:xn}[t]();return n.type=t,/_?log/.test(t)&&n.clamp(!0),n.range([e,r])}var Jd={getXScale:function(t,e,r,n){var i=this,a=i.scale.zoom||we(i.axis.getAxisType("x"),t,e);return i.getCustomizedScale(r?a.domain(r):a,n)},getYScale:function(t,e,r,n){var i=this,a=we(i.axis.getAxisType(t),e,r);return n&&a.domain(n),a},getYScaleById:function(t,e){e===void 0&&(e=!1);var r=this.axis.getId(t)==="y2",n=e?r?"subY2":"subY":r?"y2":"y";return this.scale[n]},getCustomizedScale:function(t,e){var r=this,n=e||function(){return r.axis.x.tickOffset()},i=function(o,s){var u=t(o)+n();return s?u:Math.ceil(u)};for(var a in t)i[a]=t[a];return i.orgDomain=function(){return t.domain()},i.orgScale=function(){return t},r.axis.isCategorized()&&(i.domain=function(o){var s=o;return arguments.length?(t.domain(s),i):(s=this.orgDomain(),[s[0],s[1]+1])}),i},updateScales:function(t,e){e===void 0&&(e=!0);var r=this,n=r.axis,i=r.config,a=r.format,o=r.org,s=r.scale,u=r.state,l=u.width,c=u.height,f=u.width2,h=u.height2,d=u.hasAxis;if(d){var g=i.axis_rotated,p={x:g?1:0,y:g?0:c,subX:g?1:0,subY:g?0:h},m={x:g?c:l,y:g?l:1,subX:g?c:l,subY:g?f:1},_=e&&s.x&&s.x.orgDomain(),y=e&&o.xDomain;s.x=r.getXScale(p.x,m.x,_,function(){return n.x.tickOffset()}),s.subX=r.getXScale(p.x,m.x,y,function(T){return T%1?0:n.subX.tickOffset()}),a.xAxisTick=n.getXAxisTickFormat(),n.setAxis("x",s.x,i.axis_x_tick_outer,t),i.subchart_show&&n.setAxis("subX",s.subX,i.axis_x_tick_outer,t),s.y=r.getYScale("y",p.y,m.y,s.y?s.y.domain():i.axis_y_default),s.subY=r.getYScale("y",p.subY,m.subY,s.subY?s.subY.domain():i.axis_y_default),n.setAxis("y",s.y,i.axis_y_tick_outer,t),i.axis_y2_show&&(s.y2=r.getYScale("y2",p.y,m.y,s.y2?s.y2.domain():i.axis_y2_default),s.subY2=r.getYScale("y2",p.subY,m.subY,s.subY2?s.subY2.domain():i.axis_y2_default),n.setAxis("y2",s.y2,i.axis_y2_tick_outer,t))}else r.updateArc&&r.updateArc()},xx:function(t){var e=this,r=e.config,n=e.scale,i=n.x,a=n.zoom,o=r.zoom_enabled&&a?a:i;return t?o(P(t.x)?t.x:t):null},xv:function(t){var e=this,r=e.axis,n=e.config,i=e.scale.x,a=e.getBaseValue(t);return r.isTimeSeries()?a=Bt.call(e,a):r.isCategorized()&&ft(a)&&(a=n.axis_x_categories.indexOf(a)),Math.ceil(i(a))},yv:function(t){var e=this,r=e.scale,n=r.y,i=r.y2,a=t.axis&&t.axis==="y2"?i:n;return Math.ceil(a(e.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},tg={getDrawShape:function(){var t=this,e=t.config.axis_rotated,r=t.state.hasRadar,n={type:{},indices:{},pos:{}};if(["bar","candlestick","line","area"].forEach(function(o){var s=Xt(/^(bubble|scatter)$/.test(o)?"line":o);if(t.hasType(o)||t.hasTypeOf(s)||o==="line"&&(t.hasType("bubble")||t.hasType("scatter"))){var u=t.getShapeIndices(t["is"+s+"Type"]),l=t["generateDraw"+s];n.indices[o]=u,n.type[o]=l?l.bind(t)(u,!1):void 0}}),!t.hasArcType()||r){var i=r?t.radarCircleX:e?t.circleY:t.circleX,a=r?t.radarCircleY:e?t.circleX:t.circleY;n.pos={xForText:t.generateXYForText(n.indices,!0),yForText:t.generateXYForText(n.indices,!1),cx:(i||function(){}).bind(t),cy:(a||function(){}).bind(t)}}return n},getShapeIndices:function(t){var e=this,r=e.config,n=r.data_xs,i=at(n),a={},o=i?{}:0;return i&&la(Object.keys(n).map(function(s){return n[s]})).forEach(function(s){o[s]=0,a[s]={}}),e.filterTargetsToShow(e.data.targets.filter(t,e)).forEach(function(s){for(var u=(s.id in n)?n[s.id]:"",l=u?a[u]:a,c=0,f=void 0;f=r.data_groups[c];c++)if(!(f.indexOf(s.id)<0)){for(var h=0,d=void 0;d=f[h];h++)if(d in l){l[s.id]=l[d];break}}xt(l[s.id])&&(l[s.id]=u?o[u]++:o++,l.__max__=(u?o[u]:o)-1)}),a},getIndices:function(t,e){var r=this.config.data_xs;return at(r)?t[r[e]]:t},getIndicesMax:function(t){return at(this.config.data_xs)?Object.keys(t).map(function(e){return t[e].__max__||0}).reduce(function(e,r){return e+r}):t.__max__},getShapeX:function(t,e,r){var n=this,i=n.config,a=n.scale,o=r?a.subX:a.zoom||a.x,s=i.bar_padding,u=function(c,f){return c+f},l=Pt(t)&&(t._$total.length?t._$total.reduce(u)/2:0);return function(c){var f=n.getIndices(e,c.id),h=c.id in f?f[c.id]:0,d=(f.__max__||0)+1,g=0;if(at(c.x)){var p=o(c.x,!0);l?g=p-(t[c.id]||t._$width)+t._$total.slice(0,h+1).reduce(u)-l:g=p-(it(t)?t:t._$width)*(d/2-h)}return t&&g&&d>1&&s&&(h&&(g+=s*h),d>2?g-=(d-1)*s/2:d===2&&(g-=s/2)),g}},getShapeY:function(t){var e=this,r=e.isStackNormalized();return function(n){var i=n.value;return it(n)?i=n:r?i=e.getRatio("index",n,!0):e.isBubbleZType(n)&&(i=e.getBubbleZData(n.value,"y")),e.getYScaleById(n.id,t)(i)}},getShapeYMin:function(t){var e=this,r=e.scale[e.axis.getId(t)],n=r.domain()[0];return!e.isGrouped(t)&&n>0?n:0},getShapeOffsetData:function(t){var e=this,r=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(t,e))),n=e.isStackNormalized(),i=r.map(function(o){var s=o.values,u={};e.isStepType(o)&&(s=e.convertValuesToStep(s));var l=s.reduce(function(c,f){var h=Number(f.x);return c[h]=f,u[h]=n?e.getRatio("index",f,!0):f.value,c},{});return{id:o.id,rowValues:s,rowValueMapByXValue:l,values:u}}),a=r.reduce(function(o,s,u){var l=s.id;return o[l]=u,o},{});return{indexMapByTargetId:a,shapeOffsetTargets:i}},getShapeOffset:function(t,e,r){var n=this,i=n.getShapeOffsetData(t),a=i.shapeOffsetTargets,o=i.indexMapByTargetId;return function(s,u){var l=n.getIndices(e,s.id),c=n.getYScaleById(s.id,r),f=c(n.getShapeYMin(s.id)),h=Number(s.x),d=f;return a.filter(function(g){return g.id!==s.id}).forEach(function(g){if(l[g.id]===l[s.id]&&o[g.id]<o[s.id]){var p=g.rowValues[u];(!p||Number(p.x)!==h)&&(p=g.rowValueMapByXValue[h]),p&&p.value*s.value>=0&&(d+=c(g.values[h])-f)}}),d}},getBarW:function(t,e,r){var n=this,i=n.config,a=n.org,o=n.scale,s=n.getMaxDataCount(),u=t==="bar"&&i.data_groups.length,l=t+"_width",c=o.zoom&&!n.axis.isCategorized()?a.xDomain.map(function(d){return o.zoom(d)}).reduce(function(d,g){return Math.abs(d)+g})/s:e.tickInterval(s),f=function(d){var g=d?i[l][d]:i[l],p=d?g.ratio:i[l+"_ratio"],m=d?g.max:i[l+"_max"],_=it(g)?g:r?c*p/r:0;return m&&_>m?m:_},h=f();return!u&&Pt(i[l])&&(h={_$width:h,_$total:[]},n.filterTargetsToShow(n.data.targets).forEach(function(d){i[l][d.id]&&(h[d.id]=f(d.id),h._$total.push(h[d.id]||h._$width))})),h},getShapeByIndex:function(t,e,r){var n=this,i=n.$el.main,a=P(e)?"-"+e:"";return(r?i.selectAll("."+v[t+"s"]+n.getTargetSelectorSuffix(r)):i).selectAll("."+v[t]+a)},isWithinShape:function(t,e){var r=this,n=F(t),i;return r.isTargetToShow(e.id)?"hasValidPointType"in r&&r.hasValidPointType(t.nodeName)?i=r.isStepType(e)?r.isWithinStep(t,r.getYScaleById(e.id)(e.value)):r.isWithinCircle(t,r.isBubbleType(e)?r.pointSelectR(e)*1.5:0):t.nodeName==="path"&&(i=n.classed(v.bar)?r.isWithinBar(t):!0):i=!1,i},getInterpolate:function(t){var e=this,r=e.getInterpolateType(t);return{basis:Pi,"basis-closed":Ni,"basis-open":Xi,bundle:Bi,cardinal:Yi,"cardinal-closed":Vi,"cardinal-open":Hi,"catmull-rom":Ui,"catmull-rom-closed":Gi,"catmull-rom-open":Wi,"monotone-x":Ki,"monotone-y":Qi,natural:Ji,"linear-closed":qi,linear:kr,step:ta,"step-after":ra,"step-before":ea}[r]},getInterpolateType:function(t){var e=this,r=e.config,n=r.spline_interpolation_type,i=e.isInterpolationType(n)?n:"cardinal";return e.isSplineType(t)?i:e.isStepType(t)?r.line_step_type:"linear"}},eg={setContainerSize:function(){var t=this,e=t.state;e.current.width=t.getCurrentWidth(),e.current.height=t.getCurrentHeight()},getCurrentWidth:function(){var t=this;return t.config.size_width||t.getParentWidth()},getCurrentHeight:function(){var t=this,e=t.config,r=e.size_height||t.getParentHeight();return r>0?r:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this,e=t.config,r=t.state.hasAxis,n=t.$el,i=r?e.axis_y2_axes.length:0,a=P(e.padding_top)?e.padding_top:0;return n.title&&n.title.node()&&(a+=t.getTitlePadding()),i&&e.axis_rotated&&(a+=t.getHorizontalAxisHeight("y2")*i),a},getCurrentPaddingBottom:function(){var t=this,e=t.config,r=t.state.hasAxis,n=e.axis_rotated?"y":"x",i=r?e["axis_"+n+"_axes"].length:0,a=P(e.padding_bottom)?e.padding_bottom:0;return a+(i?t.getHorizontalAxisHeight(n)*i:0)},getCurrentPaddingLeft:function(t){var e=this,r=e.config,n=e.state.hasAxis,i=r.axis_rotated,a=i?"x":"y",o=n?r["axis_"+a+"_axes"].length:0,s=n?e.getAxisWidthByAxisId(a,t):0,u;return P(r.padding_left)?u=r.padding_left:n&&i?u=r.axis_x_show?Math.max(oa(s),40):1:n&&(!r.axis_y_show||r.axis_y_inner)?u=e.axis.getAxisLabelPosition("y").isOuter?30:1:u=oa(s),u+s*o},getCurrentPaddingRight:function(t){t===void 0&&(t=!1);var e=this,r=e.config,n=e.state.hasAxis,i=10,a=e.state.isLegendRight?e.getLegendWidth()+20:0,o=n?r.axis_y2_axes.length:0,s=n?e.getAxisWidthByAxisId("y2"):0,u=t?e.axis.getXAxisTickTextY2Overflow(i):0,l;return P(r.padding_right)?l=r.padding_right+1:e.axis&&r.axis_rotated?l=i+a:e.axis&&(!r.axis_y2_show||r.axis_y2_inner)?l=Math.max(2+a+(e.axis.getAxisLabelPosition("y2").isOuter?20:0),u):l=Math.max(oa(s)+a,u),l+s*o},getParentRectValue:function(t){for(var e="offset"+Xt(t),r=this.$el.chart.node(),n;!n&&r&&r.tagName!=="BODY";){try{n=r.getBoundingClientRect()[t]}catch(a){e in r&&(n=r[e])}r=r.parentNode}if(t==="width"){var i=bt.body.offsetWidth;n>i&&(n=i)}return n},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height");return t.indexOf("px")>0?parseInt(t,10):0},getSvgLeft:function(t){var e=this,r=e.config,n=e.$el,i=r.axis_rotated||!r.axis_rotated&&!r.axis_y_inner,a=r.axis_rotated?v.axisX:v.axisY,o=n.main.select("."+a).node(),s=o&&i?o.getBoundingClientRect():{right:0},u=n.chart.node().getBoundingClientRect(),l=e.hasArcType(),c=s.right-u.left-(l?0:e.getCurrentPaddingLeft(t));return c>0?c:0},updateDimension:function(t){var e=this,r=e.config,n=e.state.hasAxis,i=e.$el;n&&!t&&e.axis.x&&r.axis_rotated&&e.axis.subX&&e.axis.subX.create(i.axis.subX),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)},updateSvgSize:function(){var t=this,e=t.state,r=e.clip,n=e.current,i=e.hasAxis,a=e.width,o=e.height,s=t.$el.svg;if(s.attr("width",n.width).attr("height",n.height),i){var u=s.select("."+v.brush+" .overlay"),l={width:0,height:0};u.size()&&(l.width=+u.attr("width"),l.height=+u.attr("height")),s.selectAll(["#"+r.id,"#"+r.idGrid]).select("rect").attr("width",a).attr("height",o),s.select("#"+r.idXAxis).select("rect").call(t.setXAxisClipPath.bind(t)),s.select("#"+r.idYAxis).select("rect").call(t.setYAxisClipPath.bind(t)),r.idSubchart&&s.select("#"+r.idSubchart).select("rect").attr("width",a).attr("height",l.height)}},updateSizes:function(t){var e=this,r=e.config,n=e.state,i=e.$el.legend,a=r.axis_rotated,o=e.hasArcType();!t&&e.setContainerSize();var s={width:i?e.getLegendWidth():0,height:i?e.getLegendHeight():0};!o&&r.axis_x_show&&r.axis_x_tick_autorotate&&e.updateXAxisTickClip();var u=n.isLegendRight||n.isLegendInset?0:s.height,l=a||o?0:e.getHorizontalAxisHeight("x"),c=r.subchart_axis_x_show&&r.subchart_axis_x_tick_text_show?l:30,f=r.subchart_show&&!o?r.subchart_size_height+c:0;n.margin=!o&&a?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+u+e.getCurrentPaddingBottom(),left:f+(o?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(!0),bottom:l+f+u+e.getCurrentPaddingBottom(),left:o?0:e.getCurrentPaddingLeft()},n.margin2=a?{top:n.margin.top,right:NaN,bottom:20+u,left:e.state.rotatedPadding.left}:{top:n.current.height-f-u,right:NaN,bottom:c+u,left:n.margin.left},n.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(s),n.width=n.current.width-n.margin.left-n.margin.right,n.height=n.current.height-n.margin.top-n.margin.bottom,n.width<0&&(n.width=0),n.height<0&&(n.height=0),n.width2=a?n.margin.left-n.rotatedPadding.left-n.rotatedPadding.right:n.width,n.height2=a?n.height:n.current.height-n.margin2.top-n.margin2.bottom,n.width2<0&&(n.width2=0),n.height2<0&&(n.height2=0);var h=e.hasType("gauge"),d=r.legend_show&&n.isLegendRight;n.arcWidth=n.width-(d?s.width+10:0),n.arcHeight=n.height-(d&&!h?0:10),h&&!r.gauge_fullCircle&&(n.arcHeight+=n.height-e.getPaddingBottomForGauge()),e.updateRadius&&e.updateRadius(),n.isLegendRight&&o&&(n.margin3.left=n.arcWidth/2+n.radiusExpanded*1.1)}},rg={opacityForText:function(t){var e=this;return e.isBarType(t)&&!e.meetsLabelThreshold(Math.abs(e.getRatio("bar",t)),"bar")?"0":e.hasDataLabel?"1":"0"},initText:function(){var t=this.$el;t.main.select("."+v.chart).append("g").attr("class",v.chartTexts)},updateTargetsForText:function(t){var e=this,r=e.getChartClass("Text"),n=e.getClass("texts","id"),i=e.classFocus.bind(e),a=e.$el.main.select("."+v.chartTexts).selectAll("."+v.chartText).data(t).attr("class",function(s){return r(s)+i(s)}),o=a.enter().append("g").style("opacity","0").attr("class",r).style("pointer-events","none");o.append("g").attr("class",n)},updateText:function(t){var e=this,r=e.config,n=e.$el,i=e.getClass("text","index"),a=n.main.selectAll("."+v.texts).selectAll("."+v.text).data(e.labelishData.bind(e));a.exit().transition().duration(t).style("fill-opacity","0").remove(),n.text=a.enter().append("text").merge(a).attr("class",i).attr("text-anchor",function(o){var s=o.value<0;if(e.isCandlestickType(o)){var u=e.getCandlestickData(o);s=u&&!u._isUp}return r.axis_rotated?s?"end":"start":"middle"}).style("fill",e.updateTextColor.bind(e)).style("fill-opacity","0").each(function(o,s,u){var l=F(this),c=o.value;if(e.isBubbleZType(o))c=e.getBubbleZData(c,"z");else if(e.isCandlestickType(o)){var f=e.getCandlestickData(o);f&&(c=f.close)}c=e.dataLabelFormat(o.id)(c,o.id,s,u),it(c)?this.textContent=c:Nu(l,c)})},updateTextColor:function(t){var e=this,r=e.config,n=r.data_labels_colors,i=e.isArcType(t)&&!e.isRadarType(t)?null:e.color(t),a;if(ft(n))a=n;else if(et(n)){var o=(t.data||t).id;a=n[o]}else U(n)&&(a=n.bind(e.api)(i,t));if(e.isCandlestickType(t)&&!U(n)){var s=e.getCandlestickData(t);if(s&&!s._isUp){var u=r.candlestick_color_down;a=et(u)?u[t.id]:u}}return a||i},redrawText:function(t,e,r,n){var i=this,a=Dn(!0);return i.$el.text.style("fill",i.updateTextColor.bind(i)).style("fill-opacity",r?0:i.opacityForText.bind(i)).each(function(o,s){var u=n&&this.getAttribute("x")?F(this).transition(a):F(this),l=t.bind(this)(o,s),c=e.bind(this)(o,s);this.childElementCount?u.attr("transform","translate("+l+" "+c+")"):u.attr("x",l).attr("y",c)}),!0},getTextRect:function(t,e){var r=this,n=t.node?t.node():t;/text/i.test(n.tagName)||(n=n.querySelector("text"));var i=n.textContent,a=Dt.textRect+"-"+i.replace(/\W/g,"_"),o=r.cache.get(a);return o||(r.$el.svg.append("text").style("visibility","hidden").style("font",F(n).style("font")).classed(e,!0).text(i).call(function(s){o=Dr(s.node())}).remove(),r.cache.add(a,o)),o},generateXYForText:function(t,e){var r=this,n=Object.keys(t),i={},a=e?r.getXForText:r.getYForText;return r.hasType("radar")&&n.push("radar"),n.forEach(function(o){i[o]=r["generateGet"+Xt(o)+"Points"](t[o],!1)}),function(o,s){var u=r.isAreaType(o)&&"area"||r.isBarType(o)&&"bar"||r.isCandlestickType(o)&&"candlestick"||r.isRadarType(o)&&"radar"||"line";return a.call(r,i[u](o,s),o,this)}},getCenteredTextPos:function(t,e,r){var n=this,i=n.config,a=i.axis_rotated;if(i.data_labels.centered&&n.isBarType(t)){var o=Dr(r),s=t.value>=0;if(a){var u=(s?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+o.width/2;return s?-u-3:u+2}else{var l=(s?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+o.height/2;return s?l:-l-2}}return 0},getTextPos:function(t,e){var r=this.config.data_labels_position;return(t in r?r[t]:r)[e]||0},getXForText:function(t,e,r){var n=this,i=n.config,a=n.state,o=i.axis_rotated,s=t[0][0];if(n.hasType("candlestick"))o?s=n.getCandlestickData(e)._isUp?t[2][2]+4:t[2][1]-4:s+=(t[1][0]-s)/2;else if(o){var u=n.isBarType(e)?4:6;s=t[2][1]+u*(e.value<0?-1:1)}else s=n.hasType("bar")?(t[2][0]+t[0][0])/2:s;if(e.value===null)if(s>a.width){var l=Dr(r).width;s=a.width-l}else s<0&&(s=4);return o&&(s+=n.getCenteredTextPos(e,t,r)),s+n.getTextPos(e.id,"x")},getYForText:function(t,e,r){var n=this,i=n.config,a=n.state,o=i.axis_rotated,s=i.point_r,u=Dr(r),l=e.value,c=3,f;if(n.isCandlestickType(e))l=n.getCandlestickData(e),o?(f=t[0][0],f+=(t[1][0]-f)/2+c):f=l&&l._isUp?t[2][2]-c:t[2][1]+c*4;else if(o)f=(t[0][0]+t[2][0]+u.height*.6)/2;else if(f=t[2][1],it(s)&&s>5&&(n.isLineType(e)||n.isScatterType(e))&&(c+=i.point_r/2.3),l<0||l===0&&!a.hasPositiveValue&&a.hasNegativeValue)f+=u.height+(n.isBarType(e)?-c:c);else{var h=-c*2;n.isBarType(e)?h=-c:n.isBubbleType(e)&&(h=c),f+=h}if(e.value===null&&!o){var d=u.height;f<d?f=d:f>a.height&&(f=a.height-4)}return o||(f+=n.getCenteredTextPos(e,t,r)),f+n.getTextPos(e.id,"y")},markOverlapped:function(t,e,r){var n=e.$el.arcs.selectAll(r),i=n.filter(function(u){return u.data.id!==t}),a=n.filter(function(u){return u.data.id===t}),o=Bu(a.node()),s=function(u,l){return Math.sqrt(Math.pow(u,2)+Math.pow(l,2))};a.node()&&i.each(function(){var u=Bu(this),l=F(this),c=s(o.e,o.f)>s(u.e,u.f)?a:l,f=Math.ceil(Math.abs(o.e-u.e))<Math.ceil(c.node().getComputedTextLength()),h=Math.ceil(Math.abs(o.f-u.f))<parseInt(a.style("font-size"),10);l.classed(v.TextOverlapping,f&&h)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){Gr([this,this.previousSibling]).classed(v.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){t===void 0&&(t=0);var r=this,n=r.config,i=n[e+"_label_threshold"]||0;return t>=i}};function Wu(t,e){t===void 0&&(t="left");var r=it(e),n;return t.indexOf("center")>-1?n=r?e/2:"middle":t.indexOf("right")>-1?n=r?e:"end":n=r?0:"start",n}var ng={initTitle:function(){var t=this,e=t.config,r=t.$el;if(e.title_text){r.title=r.svg.append("g");var n=r.title.append("text").style("text-anchor",Wu(e.title_position)).attr("class",v.title);Nu(n,e.title_text,[.3,1.5])}},redrawTitle:function(){var t=this,e=t.config,r=t.state.current,n=t.$el.title;if(n){var i=t.yForTitle.call(t);/g/i.test(n.node().tagName)?n.attr("transform","translate("+Wu(e.title_position,r.width)+", "+i+")"):n.attr("x",t.xForTitle.call(t)).attr("y",i)}},xForTitle:function(){var t=this,e=t.config,r=t.state.current,n=e.title_position||"left",i=t.getTextRect(t.$el.title,v.title).width,a;return/(right|center)/.test(n)?(a=r.width-i,n.indexOf("right")>=0?a=r.width-i-e.title_padding.right:n.indexOf("center")>=0&&(a=(r.width-i)/2)):a=e.title_padding.left||0,a},yForTitle:function(){var t=this;return(t.config.title_padding.top||0)+t.getTextRect(t.$el.title,v.title).height},getTitlePadding:function(){var t=this;return t.yForTitle()+(t.config.title_padding.bottom||0)}},ig={initTooltip:function(){var t=this,e=t.config,r=t.$el;r.tooltip=F(e.tooltip_contents.bindto),r.tooltip.empty()&&(r.tooltip=r.chart.style("position","relative").append("div").attr("class",v.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),t.bindTooltipResizePos()},initShowTooltip:function(){var t=this,e=t.config,r=t.$el,n=t.state,i=n.hasAxis,a=n.hasRadar;if(e.tooltip_init_show){var o=!(i&&a);if(t.axis&&t.axis.isTimeSeries()&&ft(e.tooltip_init_x)){var s=t.data.targets[0],u=void 0,l=void 0;for(e.tooltip_init_x=Bt.call(t,e.tooltip_init_x),u=0;(l=s.values[u])&&l.x-e.tooltip_init_x!=0;u++);e.tooltip_init_x=u}var c=t.data.targets.map(function(f){var h=o?0:e.tooltip_init_x;return t.addName(f.values[h])});o&&(c=[c[e.tooltip_init_x]]),r.tooltip.html(t.getTooltipHTML(c,t.axis&&t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType(null,["radar"])),t.color)),e.tooltip_contents.bindto||r.tooltip.style("top",e.tooltip_init_position.top).style("left",e.tooltip_init_position.left).style("display","block")}},getTooltipHTML:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this,n=r.api,i=r.config;return U(i.tooltip_contents)?i.tooltip_contents.bind(n).apply(void 0,t):r.getTooltipContent.apply(r,t)},getTooltipContent:function(t,e,r,n){var i=this,a=i.api,o=i.config,s=i.state,u=["title","name","value"].map(function(M){var L=o["tooltip_format_"+M];return U(L)?L.bind(a):L}),l=u[0],c=u[1],f=u[2];l=l||e,c=c||function(M){return M},f=f||(i.isStackNormalized()?function(M,L){return(L*100).toFixed(2)+"%"}:r);var h=o.tooltip_order,d=function(M){return i.axis&&i.isBubbleZType(M)?i.getBubbleZData(M.value,"z"):i.getBaseValue(M)},g=i.levelColor?function(M){return i.levelColor(M.value)}:function(M){return n(M)},p=o.tooltip_contents,m=p.template,_=i.mapToTargetIds();if(h===null&&o.data_groups.length){var y=i.orderTargets(i.data.targets).map(function(M){return M.id}).reverse();t.sort(function(M,L){var E=M?M.value:null,B=L?L.value:null;return E>0&&B>0&&(E=M.id?y.indexOf(M.id):null,B=L.id?y.indexOf(L.id):null),E-B})}else if(/^(asc|desc)$/.test(h)){var T=h==="asc";t.sort(function(M,L){var E=M?d(M):null,B=L?d(L):null;return T?E-B:B-E})}else U(h)&&t.sort(h.bind(a));var x=i.getTooltipContentTemplate(m),$=t.length,b,w,C,D,O,k=function(){if(w=t[O],!w||!(d(w)||d(w)===0))return"continue";if(xt(b)){var M=(s.hasAxis||s.hasRadar)&&Lr(l?l(w.x):w.x);b=fa(x[0],{CLASS_TOOLTIP:v.tooltip,TITLE:P(M)?m?M:'<tr><th colspan="2">'+M+"</th></tr>":""})}if(!w.ratio&&i.$el.arcs&&(w.ratio=i.getRatio("arc",i.$el.arcs.select("path."+v.arc+"-"+w.id).data()[0])),C=[w.ratio,w.id,w.index,t],D=Lr(f.apply(void 0,Tt([d(w)],C))),i.isAreaRangeType(w)){var L=["high","low"].map(function(gt){return Lr(f.apply(void 0,Tt([i.getRangedData(w,gt)],C)))}),E=L[0],B=L[1];D="<b>Mid:</b> "+D+" <b>High:</b> "+E+" <b>Low:</b> "+B}else if(i.isCandlestickType(w)){var W=["open","high","low","close","volume"].map(function(I){return Lr(f.apply(void 0,Tt([i.getRangedData(w,I,"candlestick")],C)))}),q=W[0],E=W[1],B=W[2],J=W[3],j=W[4];D="<b>Open:</b> "+q+" <b>High:</b> "+E+" <b>Low:</b> "+B+" <b>Close:</b> "+J+(j?" <b>Volume:</b> "+j:"")}if(D!==void 0){if(w.name===null)return"continue";var ut=Lr(c.apply(void 0,Tt([w.name],C))),V=g(w),rt={CLASS_TOOLTIP_NAME:v.tooltipName+i.getTargetSelectorSuffix(w.id),COLOR:m||!i.patterns?V:'<svg><rect style="fill:'+V+'" width="10" height="10"></rect></svg>',NAME:ut,VALUE:D};if(m&&et(p.text)){var wt=_.indexOf(w.id);Object.keys(p.text).forEach(function(gt){rt[gt]=p.text[gt][wt]})}b+=fa(x[1],rt)}};for(O=0;O<$;O++)k();return b+"</table>"},getTooltipContentTemplate:function(t){return(t||`<table class="{=CLASS_TOOLTIP}"><tbody>
				{=TITLE}
				{{<tr class="{=CLASS_TOOLTIP_NAME}">
					<td class="name">`+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+`{=NAME}</td>
					<td class="value">{=VALUE}</td>
				</tr>}}
			</tbody></table>`).replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,r,n){var i=this,a=i.config,o=i.scale,s=i.state,u=s.width,l=s.height,c=s.current,f=s.isLegendRight,h=s.inputType,d=s.event,g=i.hasType("gauge")&&!a.gauge_fullCircle,p=i.getSvgLeft(!0),m=p+c.width-i.getCurrentPaddingRight(),_=i.getCurrentPaddingLeft(!0),y=20,T=oe(d,n),x=T[0],$=T[1];if(i.hasArcType()){var b=h==="touch"||i.hasType("radar");b||($+=g?l:l/2,x+=(u-(f?i.getLegendWidth():0))/2)}else{var w=o.x(t[0].x);a.axis_rotated?($=w+y,x+=p+100,m-=p):($-=5,x=p+_+y+(i.zoomScale?x:w))}x+e+15>m&&(x-=e+_),$+r>c.height&&($-=g?r*3:r+30);var C={top:$,left:x};return Object.keys(C).forEach(function(D){C[D]<0&&(C[D]=0)}),C},showTooltip:function(t,e){var r=this,n=r.config,i=r.state,a=r.$el.tooltip,o=n.tooltip_contents.bindto,s=r.hasArcType(null,["radar"]),u=t.filter(function(T){return T&&P(r.getBaseValue(T))});if(!(!a||u.length===0||!n.tooltip_show)){var l=a.datum(),c=l||{},f=c.width,h=f===void 0?0:f,d=c.height,g=d===void 0?0:d,p=JSON.stringify(t);if(!l||l.current!==p){var m=t.concat().sort()[0].index;ot(n.tooltip_onshow,r.api,t),a.html(r.getTooltipHTML(t,r.axis?r.axis.getXAxisTickFormat():r.categoryName.bind(r),r.getYFormat(s),r.color)).style("display",null).style("visibility",null).datum(l={index:m,current:p,width:h=a.property("offsetWidth"),height:g=a.property("offsetHeight")}),ot(n.tooltip_onshown,r.api,t),r._handleLinkedCharts(!0,m)}if(!o){var _=n.tooltip_position||r.tooltipPosition,y=_.call(this,u,h,g,e);["top","left"].forEach(function(T){var x=y[T];a.style(T,x+"px"),T==="left"&&!l.xPosInPercent&&(l.xPosInPercent=x/i.current.width*100)})}}},bindTooltipResizePos:function(){var t=this,e=t.resizeFunction,r=t.state,n=t.$el.tooltip;e.add(function(){if(n.style("display")==="block"){var i=r.current,a=n.datum(),o=a.width,s=a.xPosInPercent,u=i.width/100*s,l=i.width-(u+o);l<0&&(u+=l),n.style("left",u+"px")}})},hideTooltip:function(t){var e=this,r=e.api,n=e.config,i=e.$el.tooltip;if(i&&i.style("display")!=="none"&&(!n.tooltip_doNotHide||t)){var a=JSON.parse(i.datum().current);ot(n.tooltip_onhide,r,a),i.style("display","none").style("visibility","hidden").datum(null),ot(n.tooltip_onhidden,r,a)}},_handleLinkedCharts:function(t,e){var r=this,n=r.charts,i=r.config,a=r.state.event;if(a&&a.isTrusted&&i.tooltip_linked&&n.length>1){var o=i.tooltip_linked_name;n.filter(function(s){return s!==r.api}).forEach(function(s){var u=s.internal,l=u.config,c=u.$el,f=l.tooltip_linked,h=l.tooltip_linked_name,d=bt.body.contains(c.chart.node());if(f&&o===h&&d){var g=c.tooltip.data()[0],p=e!==(g&&g.index);try{s.tooltip[t&&p?"show":"hide"]({index:e})}catch(m){}}})}}},ag={getTranslate:function(t,e){e===void 0&&(e=0);var r=this,n=r.config,i=r.state,a=n.axis_rotated,o=0,s,u;if(e&&/^(x|y2?)$/.test(t)&&(o=r.getAxisSize(t)*e),t==="main")s=Er(i.margin.left),u=Er(i.margin.top);else if(t==="context")s=Er(i.margin2.left),u=Er(i.margin2.top);else if(t==="legend")s=i.margin3.left,u=i.margin3.top;else if(t==="x")s=a?-o:0,u=a?0:i.height+o;else if(t==="y")s=a?0:-o,u=a?i.height+o:0;else if(t==="y2")s=a?0:i.width+o,u=a?1-o:0;else if(t==="subX")s=0,u=a?0:i.height2;else if(t==="arc")s=i.arcWidth/2,u=i.arcHeight/2;else if(t==="radar"){var l=r.getRadarSize()[0];s=i.width/2-l,u=Er(i.margin.top)}return"translate("+s+", "+u+")"},transformMain:function(t,e){var r=this,n=r.$el.main,i,a,o;e&&e.axisX?i=e.axisX:(i=n.select("."+v.axisX),t&&(i=i.transition())),e&&e.axisY?a=e.axisY:(a=n.select("."+v.axisY),t&&(a=a.transition())),e&&e.axisY2?o=e.axisY2:(o=n.select("."+v.axisY2),t&&(o=o.transition())),(t?n.transition():n).attr("transform",r.getTranslate("main")),i.attr("transform",r.getTranslate("x")),a.attr("transform",r.getTranslate("y")),o.attr("transform",r.getTranslate("y2")),n.select("."+v.chartArcs).attr("transform",r.getTranslate("arc"))},transformAll:function(t,e){var r=this,n=r.config,i=r.state.hasAxis,a=r.$el;r.transformMain(t,e),i&&n.subchart_show&&r.transformContext(t,e),a.legend&&r.transformLegend(t)}},og={setTargetType:function(t,e){var r=this,n=r.config,i=r.state.withoutFadeIn;r.mapToTargetIds(t).forEach(function(a){i[a]=e===n.data_types[a],n.data_types[a]=e}),t||(n.data_type=e)},updateTypesElements:function(){var t=this,e=t.state.current;Object.keys(G).forEach(function(r){var n=G[r],i=t.hasType(n,null,!0),a=e.types.indexOf(n);a===-1&&i?e.types.push(n):a>-1&&!i&&e.types.splice(a,1)}),t.setChartElements()},hasType:function(t,e,r){r===void 0&&(r=!1);var n=this,i=n.config,a=n.state.current,o=i.data_types,s=e||n.data.targets,u=!1;return!r&&a.types.length&&a.types.indexOf(t)>-1?u=!0:s&&s.length?s.forEach(function(l){var c=o[l.id];(c===t||!c&&t==="line")&&(u=!0)}):Object.keys(o).length?Object.keys(o).forEach(function(l){o[l]===t&&(u=!0)}):u=i.data_type===t,u},hasTypeOf:function(t,e,r){var n=this;return r===void 0&&(r=[]),t in ue?!ue[t].filter(function(i){return r.indexOf(i)===-1}).every(function(i){return!n.hasType(i,e)}):!1},isTypeOf:function(t,e){var r=ft(t)?t:t.id,n=this.config.data_types[r]||this.config.data_type;return K(e)?e.indexOf(n)>=0:n===e},hasPointType:function(){var t=this;return t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&this.config.gauge_type==="multi"},isLineType:function(t){var e=ft(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,ue.Line)},isStepType:function(t){return this.isTypeOf(t,ue.Step)},isSplineType:function(t){return this.isTypeOf(t,ue.Spline)},isAreaType:function(t){return this.isTypeOf(t,ue.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,ue.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,r=e.point_pattern,n=!1;return t&&t.tagName==="circle"?n=!0:n=e.point_type==="circle"&&(!r||K(r)&&r.length===0),n},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)?t.values.filter(function(e){return it(e.value)||Boolean(e.value)}):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}},da=function(){function t(e){this.data={xs:{},targets:[]},this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var r=this;r.api=e,r.config=new ha,r.cache=new zd;var n=new Td;r.$el=n.getStore("element"),r.state=n.getStore("state")}return t.prototype.beforeInit=function(){var e=this;e.callPluginHook("$beforeInit"),ot(e.config.onbeforeinit,e.api)},t.prototype.afterInit=function(){var e=this;e.callPluginHook("$afterInit"),ot(e.config.onafterinit,e.api)},t.prototype.init=function(){var e=this,r=e.config,n=e.state,i=e.$el;n.hasAxis=!e.hasArcType(),n.hasRadar=!n.hasAxis&&e.hasType("radar"),e.initParams();var a={element:r.bindto,classname:"bb"};et(r.bindto)&&(a.element=r.bindto.element||"#chart",a.classname=r.bindto.classname||a.classname),i.chart=U(a.element.node)?r.bindto.element:F(a.element||[]),i.chart.empty()&&(i.chart=F(bt.body.appendChild(bt.createElement("div")))),i.chart.html("").classed(a.classname,!0),e.initToRender()},t.prototype.initToRender=function(e){var r=this,n=r.config,i=r.state,a=r.$el.chart,o=function(){return a.style("display")==="none"||a.style("visibility")==="hidden"},s=n.render.lazy||o(),u=ct.MutationObserver;if(s&&u&&n.render.observe!==!1&&!e&&new u(function(c,f){o()||(f.disconnect(),!i.rendered&&r.initToRender(!0))}).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),!s||e){var l=r.convertData(n,r.initWithData);l&&r.initWithData(l),r.afterInit()}},t.prototype.initParams=function(){var e=this,r=e,n=r.config,i=r.format,a=r.state,o=n.axis_rotated;if(a.datetimeId="bb-"+ +new Date,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.hasPointType()&&(e.point=e.generatePoint()),a.hasAxis){e.initClip(),i.extraLineClasses=e.generateExtraLineClass(),i.dataTime=n.data_xLocaltime?Pr:Xr,i.axisTime=n.axis_x_localtime?Le:Nr;var s=e.config.zoom_enabled&&e.config.zoom_type==="drag";i.defaultAxisTime=function(u){var l=e.scale,c=l.x,f=l.zoom,h=s?f:f&&c.orgDomain().toString()!==f.domain().toString(),d=u.getMilliseconds()&&".%L"||u.getSeconds()&&".:%S"||u.getMinutes()&&"%I:%M"||u.getHours()&&"%I %p"||u.getDate()!==1&&"%b %d"||h&&u.getDate()===1&&"%b'%y"||u.getMonth()&&"%-m/%-d"||"%Y";return i.axisTime(d)(u)}}a.isLegendRight=n.legend_position==="right",a.isLegendInset=n.legend_position==="inset",a.isLegendTop=n.legend_inset_anchor==="top-left"||n.legend_inset_anchor==="top-right",a.isLegendLeft=n.legend_inset_anchor==="top-left"||n.legend_inset_anchor==="bottom-left",a.rotatedPaddingRight=o&&!n.axis_x_show?0:30,a.inputType=Fd(n.interaction_inputType_mouse,n.interaction_inputType_touch)},t.prototype.initWithData=function(e){var r=this,n=r.config,i=r.scale,a=r.state,o=r.$el,s=r.org,u=a.hasAxis,l=n.interaction_enabled;u&&(r.axis=r.getAxisInstance(),n.zoom_enabled&&r.initZoom()),r.data.xs={},r.data.targets=r.convertDataToTargets(e),n.data_filter&&(r.data.targets=r.data.targets.filter(n.data_filter.bind(r.api))),n.data_hide&&r.addHiddenTargetIds(n.data_hide===!0?r.mapToIds(r.data.targets):n.data_hide),n.legend_hide&&r.addHiddenLegendIds(n.legend_hide===!0?r.mapToIds(r.data.targets):n.legend_hide),r.updateSizes(),r.updateScales(!0);var c=i.x,f=i.y,h=i.y2,d=i.subX,g=i.subY,p=i.subY2;if(c&&(c.domain(Ye(r.getXDomain(r.data.targets))),d.domain(c.domain()),s.xDomain=c.domain()),f&&(f.domain(r.getYDomain(r.data.targets,"y")),g.domain(f.domain())),h&&(h.domain(r.getYDomain(r.data.targets,"y2")),p&&p.domain(h.domain())),o.svg=o.chart.append("svg").style("overflow","hidden").style("display","block"),l&&a.inputType){var m=a.inputType==="touch";o.svg.on(m?"touchstart":"mouseenter",function(){return ot(n.onover,r.api)}).on(m?"touchend":"mouseleave",function(){return ot(n.onout,r.api)})}n.svg_classname&&o.svg.attr("class",n.svg_classname);var _=U(n.color_tiles)&&r.patterns;(u||_)&&(o.defs=o.svg.append("defs"),u&&["id","idXAxis","idYAxis","idGrid"].forEach(function(x){r.appendClip(o.defs,a.clip[x])}),_&&r.patterns.forEach(function(x){return o.defs.append(function(){return x.node})})),r.updateSvgSize(),r.bindResize();var y=o.svg.append("g").classed(v.main,!0).attr("transform",r.getTranslate("main"));if(o.main=y,n.subchart_show&&r.initSubchart(),n.tooltip_show&&r.initTooltip(),n.title_text&&r.initTitle(),n.legend_show&&r.initLegend(),n.data_empty_label_text&&y.append("text").attr("class",v.text+" "+v.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),u&&(n.regions.length&&r.initRegion(),!n.clipPath&&r.axis.init()),y.append("g").attr("class",v.chart).attr("clip-path",a.clip.path),r.callPluginHook("$init"),u&&(l&&r.initEventRect&&r.initEventRect(),r.initGrid(),n.clipPath&&r.axis&&r.axis.init()),r.initChartElements(),r.updateTargets(r.data.targets),r.updateDimension(),ot(n.oninit,r.api),r.setBackground(),r.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),n.data_onmin||n.data_onmax){var T=r.getMinMaxData();ot(n.data_onmin,r.api,T.min),ot(n.data_onmax,r.api,T.max)}n.tooltip_show&&r.initShowTooltip(),a.rendered=!0},t.prototype.initChartElements=function(){var e=this,r=e.state,n=r.hasAxis,i=r.hasRadar,a=[];n?["bar","bubble","candlestick","line"].forEach(function(o){var s=Xt(o);(o==="line"&&e.hasTypeOf(s)||e.hasType(o))&&a.push(s)}):(i||a.push("Arc","Pie"),e.hasType("gauge")?a.push("Gauge"):i&&a.push("Radar")),a.forEach(function(o){e["init"+o]()}),at(e.config.data_labels)&&!e.hasArcType(null,["radar"])&&e.initText()},t.prototype.setChartElements=function(){var e=this,r=e.$el,n=r.chart,i=r.svg,a=r.defs,o=r.main,s=r.tooltip,u=r.legend,l=r.title,c=r.grid,f=r.arcs,h=r.circle,d=r.bar,g=r.candlestick,p=r.line,m=r.area,_=r.text;e.api.$={chart:n,svg:i,defs:a,main:o,tooltip:s,legend:u,title:l,grid:c,arc:f,circles:h,bar:{bars:d},candlestick:g,line:{lines:p,areas:m},text:{texts:_}}},t.prototype.setBackground=function(){var e=this,r=e.config.background,n=e.state,i=e.$el.svg;if(at(r)){var a=i.select("g").insert(r.imgUrl?"image":"rect",":first-child");r.imgUrl?a.attr("href",r.imgUrl):r.color&&a.style("fill",r.color).attr("clip-path",n.clip.path),a.attr("class",r.class||null).attr("width","100%").attr("height","100%")}},t.prototype.updateTargets=function(e){var r=this,n=r.state,i=n.hasAxis,a=n.hasRadar;r.updateTargetsForText(e),i?(["bar","candlestick","line"].forEach(function(o){var s=Xt(o);(o==="line"&&r.hasTypeOf(s)||r.hasType(o))&&r["updateTargetsFor"+s](e.filter(r["is"+s+"Type"].bind(r)))}),r.updateTargetsForSubchart&&r.updateTargetsForSubchart(e)):r.hasArcType(e)&&(a?r.updateTargetsForRadar(e.filter(r.isRadarType.bind(r))):r.updateTargetsForArc(e.filter(r.isArcType.bind(r)))),(r.hasType("bubble")||r.hasType("scatter"))&&r.updateTargetForCircle&&r.updateTargetForCircle(),r.showTargets()},t.prototype.showTargets=function(){var e=this,r=e.config,n=e.$el.svg;n.selectAll("."+v.target).filter(function(i){return e.isTargetToShow(i.id)}).transition().duration(r.transition_duration).style("opacity","1")},t.prototype.getWithOption=function(e){var r={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(r).forEach(function(n){var i=r[n];ft(i)&&(i=r[i]),r[n]=Zt(e,"with"+n,i)}),r},t.prototype.initialOpacity=function(e){var r=this,n=r.state.withoutFadeIn;return r.getBaseValue(e)!==null&&n[e.id]?"1":"0"},t.prototype.bindResize=function(){var e=this,r=e.config,n=e.state,i=Pd(),a=[];a.push(function(){return ot(r.onresize,e,e.api)}),r.resize_auto&&a.push(function(){n.resizing=!0,e.api.flush(!1)}),a.push(function(){ot(r.onresized,e,e.api),n.resizing=!1}),a.forEach(function(o){return i.add(o)}),e.resizeFunction=i,ct.addEventListener("resize",e.resizeFunction=i)},t.prototype.callPluginHook=function(e){for(var r=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.config.plugins.forEach(function(a){e==="$beforeInit"&&(a.$$=r,r.api.plugins.push(a)),a[e].apply(a,n)})},t}();Nt(da.prototype,[Nd,Xd,Bd,Hd,Vd,Wd,qd,Yd,Zd,Kd,Qd,Jd,tg,eg,rg,ng,ig,ag,og]);function sg(t){var e=this.config,r,n,i,a=function(){var o=n.shift();if(o&&r&&Pt(r)&&o in r)return r=r[o],a();if(!o)return r};Object.keys(e).forEach(function(o){r=t,n=o.split("_"),i=a(),Q(i)&&(e[o]=i)})}var ug={resize:function(t){var e=this.internal,r=e.config,n=e.state;n.rendered&&(r.size_width=t?t.width:null,r.size_height=t?t.height:null,n.resizing=!0,this.flush(!1,!0),e.resizeFunction())},flush:function(t){var e=this.internal,r=e.state;r.rendered?(r.resizing?e.brush&&e.brush.updateResize():e.axis&&e.axis.setOrient(),e.scale.zoom=null,t?e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!r.resizing&&e.brush&&(e.brush.getSelection().call(e.brush.move),e.unselectRect())):e.initToRender(!0)},destroy:function(){var t=this,e=this.internal,r=e.$el,n=r.chart,i=r.svg;if(at(e)){e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),i.select("*").interrupt(),e.resizeFunction.clear(),ct.removeEventListener("resize",e.resizeFunction),n.classed("bb",!1).html(""),Object.keys(this).forEach(function(o){o==="internal"&&Object.keys(e).forEach(function(s){e[s]=null}),t[o]=null,delete t[o]});for(var a in this)this[a]=function(){}}return null},config:function(t,e,r){var n=this.internal,i=n.config,a=t&&t.replace(/\./g,"_"),o;return a in i&&(Q(e)?(i[a]=e,o=e,r&&this.flush()):o=i[a]),o}},lg={color:function(t){return this.internal.color(t)}};function qu(t){var e=this.internal.data.targets;if(!xt(t)){var r=K(t)?t:[t];return e.filter(function(n){return r.some(function(i){return i===n.id})})}return e}Nt(qu,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){e===void 0&&(e=!0);var r=null;if(t){var n=this.data(t);n&&K(n)&&(r=[],n.forEach(function(i){var a=i.values.map(function(o){return o.value});e?r=r.concat(a):r.push(a)}))}return r},names:function(t){var e=this.internal;return e.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var cg={data:qu},fg=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(e,r){return String.fromCharCode(Number("0x"+r))}))};function hg(t,e,r){var n=e||r,i=n.width,a=n.height,o=new XMLSerializer,s=t.cloneNode(!0),u=jd(Ir(bt.styleSheets)).filter(function(d){return d.cssText}).map(function(d){return d.cssText});s.setAttribute("xmlns",Gt.xhtml);var l=o.serializeToString(s),c=bt.createElement("style");c.appendChild(bt.createTextNode(u.join(`
`)));var f=o.serializeToString(c),h=('<svg xmlns="'+Gt.svg+'" width="'+i+'" height="'+a+`" 
		viewBox="0 0 `+r.width+" "+r.height+`" 
		preserveAspectRatio="`+(e&&e.preserveAspectRatio===!1?"none":"xMinYMid meet")+`">
			<foreignObject width="100%" height="100%">
				`+f+`
				`+l.replace(/(url\()[^#]+/g,"$1")+`
			</foreignObject></svg>`).replace(`/
/g`,"%0A");return"data:image/svg+xml;base64,"+fg(h)}var dg={export:function(t,e){var r=this,n=this.internal,i=n.state,a=n.$el.chart,o=i.current,s=o.width,u=o.height,l=Be({width:s,height:u,preserveAspectRatio:!0,mimeType:"image/png"},t),c=hg(a.node(),l,{width:s,height:u});if(e&&U(e)){var f=new Image;f.crossOrigin="Anonymous",f.onload=function(){var h=bt.createElement("canvas"),d=h.getContext("2d");h.width=l.width||s,h.height=l.height||u,d.drawImage(f,0,0),e.bind(r)(h.toDataURL(l.mimeType))},f.src=c}return c}},gg={focus:function(t){var e=this.internal,r=e.state,n=e.mapToTargetIds(t),i=e.$el.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),i.classed(v.focused,!0).classed(v.defocused,!1),e.hasArcType()&&!r.hasRadar&&(e.expandArc(n),e.hasType("gauge")&&e.markOverlapped(t,e,"."+v.gaugeValue)),e.toggleFocusLegend(n,!0),r.focusedTargetIds=n,r.defocusedTargetIds=r.defocusedTargetIds.filter(function(a){return n.indexOf(a)<0})},defocus:function(t){var e=this.internal,r=e.state,n=e.mapToTargetIds(t),i=e.$el.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));i.classed(v.focused,!1).classed(v.defocused,!0),e.hasArcType()&&(e.unexpandArc(n),e.hasType("gauge")&&e.undoMarkOverlapped(e,"."+v.gaugeValue)),e.toggleFocusLegend(n,!1),r.focusedTargetIds=r.focusedTargetIds.filter(function(a){return n.indexOf(a)<0}),r.defocusedTargetIds=n},revert:function(t){var e=this.internal,r=e.config,n=e.state,i=e.$el,a=e.mapToTargetIds(t),o=i.svg.selectAll(e.selectorTargets(a));o.classed(v.focused,!1).classed(v.defocused,!1),e.hasArcType()&&e.unexpandArc(a),r.legend_show&&(e.showLegend(a.filter(e.isLegendToShow.bind(e))),i.legend.selectAll(e.selectorLegends(a)).filter(function(){return F(this).classed(v.legendItemFocused)}).classed(v.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}},pg={show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}},vg={legend:pg},mg={load:function(t){var e=this.internal,r=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(n){r.data_classes[n]=t.classes[n]}),"categories"in t&&e.axis.isCategorized()&&(r.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(n){r.data_axes[n]=t.axes[n]}),"colors"in t&&Object.keys(t.colors).forEach(function(n){r.data_colors[n]=t.colors[n]}),"unload"in t&&t.unload!==!1?e.unload(e.mapToTargetIds(t.unload===!0?null:t.unload),function(){return e.loadFromArgs(t)}):e.loadFromArgs(t)},unload:function(t){var e=this,r=this.internal,n=t||{};K(n)?n={ids:n}:ft(n)&&(n={ids:[n]});var i=r.mapToTargetIds(n.ids);r.unload(i,function(){r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.cache.remove(i),n.done&&n.done.call(e)})}};function Zu(t,e,r){var n=this.internal,i=n.mapToTargetIds(e);n.state.toggling=!0,n[(t?"remove":"add")+"HiddenTargetIds"](i);var a=n.$el.svg.selectAll(n.selectorTargets(i)),o=t?"1":"0";t&&a.style("display",null),a.transition().style("opacity",o,"important").call(Pu,function(){!t&&a.style("display","none"),a.style("opacity",o)}),r.withLegend&&n[(t?"show":"hide")+"Legend"](i),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.state.toggling=!1}var xg={show:function(t,e){e===void 0&&(e={}),Zu.call(this,!0,t,e)},hide:function(t,e){e===void 0&&(e={}),Zu.call(this,!1,t,e)},toggle:function(t,e){var r=this;e===void 0&&(e={});var n=this.internal,i={show:[],hide:[]};n.mapToTargetIds(t).forEach(function(a){return i[n.isTargetToShow(a)?"hide":"show"].push(a)}),i.show.length&&this.show(i.show,e),i.hide.length&&setTimeout(function(){return r.hide(i.hide,e)},0)}},_g={show:function(t){var e=this.internal,r=e.config,n=e.state.inputType,i,a;if(t.mouse&&(a=t.mouse),t.data){var o=t.data,s=e.getYScaleById(o.id)(o.value);e.isMultipleX()?a=[e.scale.x(o.x),s]:(r.tooltip_grouped||(a=[0,s]),i=P(o.index)?o.index:e.getIndexByX(o.x))}else Q(t.x)?i=e.getIndexByX(t.x):Q(t.index)&&(i=t.index);(n==="mouse"?["mouseover","mousemove"]:["touchstart"]).forEach(function(u){e.dispatchEvent(u,i,a)})},hide:function(){var t=this.internal,e=t.state.inputType,r=t.$el.tooltip,n=r&&r.datum();if(n){var i=JSON.parse(n.current)[0].index;(e==="mouse"?["mouseout"]:["touchend"]).forEach(function(a){t.dispatchEvent(a,i)})}e==="touch"&&t.callOverOutForTouch(),t.hideTooltip(!0),t.hideGridFocus(),t.unexpandCircles&&t.unexpandCircles(),t.expandBarTypeShapes(!1)}},yg={tooltip:_g},ga=function(){function t(e){this.plugins=[];var r=new da(this);this.internal=r,function n(i,a,o){Object.keys(i).forEach(function(s){var u=U(i[s]),l=a!==o,c=Object.keys(i[s]).length>0;u&&(!l&&c||l)?a[s]=i[s].bind(o):u||(a[s]={}),c&&n(i[s],a[s],o)})}(t.prototype,this,this),sg.call(r,e),r.beforeInit(),r.init()}return t}();Nt(ga.prototype,[ug,lg,cg,dg,gg,vg,mg,xg,yg]);function Ku(t,e,r){var n=t.config,i="axis_x_"+e,a="axis_y_"+e,o="axis_y2_"+e;Q(r)&&(Pt(r)?(P(r.x)&&(n[i]=r.x),P(r.y)&&(n[a]=r.y),P(r.y2)&&(n[o]=r.y2)):(n[a]=r,n[o]=r),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Qu(t,e){var r=t.config;return{x:r["axis_x_"+e],y:r["axis_y_"+e],y2:r["axis_y2_"+e]}}var bg={labels:function(t){var e=this.internal,r;return t&&(Object.keys(t).forEach(function(n){e.axis.setLabelText(n,t[n])}),e.axis.updateLabels()),["x","y","y2"].forEach(function(n){var i=e.axis.getLabelText(n);i&&(!r&&(r={}),r[n]=i)}),r},min:function(t){var e=this.internal;return P(t)?Ku(e,"min",t):Qu(e,"min")},max:function(t){var e=this.internal;return arguments.length?Ku(e,"max",t):Qu(e,"max")},range:function(t){var e=this.axis;if(arguments.length)Q(t.max)&&e.max(t.max),Q(t.min)&&e.min(t.min);else return{max:e.max(),min:e.min()}}},Tg={axis:bg},wg={category:function(t,e){var r=this.internal,n=r.config;return arguments.length>1&&(n.axis_x_categories[t]=e,r.redraw()),n.axis_x_categories[t]},categories:function(t){var e=this.internal,r=e.config;return arguments.length&&(r.axis_x_categories=t,e.redraw()),r.axis_x_categories}};function Ju(t){var e=this.internal,r=e.config;return t&&(r.grid_x_lines=t,e.redrawWithoutRescale()),r.grid_x_lines}Nt(Ju,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});var $g={xgrids:Ju};function tl(t){var e=this.internal,r=e.config;return t&&(r.grid_y_lines=t,e.redrawWithoutRescale()),r.grid_y_lines}Nt(tl,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}});var Ag={ygrids:tl},Sg={groups:function(t){var e=this.internal,r=e.config;return xt(t)||(r.data_groups=t,e.redraw()),r.data_groups}};function el(t){var e=this.internal,r=e.config;return t?(r.regions=t,e.redrawWithoutRescale(),t):r.regions}Nt(el,{add:function(t){var e=this.internal,r=e.config;return t&&(r.regions=r.regions.concat(t),e.redrawWithoutRescale()),r.regions},remove:function(t){var e=this.internal,r=e.config,n=t||{},i=Zt(n,"duration",r.transition_duration),a=Zt(n,"classes",[v.region]),o=e.$el.main.select("."+v.regions).selectAll(a.map(function(s){return"."+s}));return(i?o.transition().duration(i):o).style("opacity","0").remove(),o=r.regions,Object.keys(n).length?(o=o.filter(function(s){var u=!1;return s.class?(s.class.split(" ").forEach(function(l){a.indexOf(l)>=0&&(u=!0)}),!u):!0}),r.regions=o):r.regions=[],o}});var kg={regions:el},Cg={x:function(t){var e=this.internal,r=e.axis,n=e.data,i=r.isCustomX()&&r.isCategorized();return K(t)&&(i?this.categories(t):(e.updateTargetX(n.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),i?this.categories():n.xs},xs:function(t){var e=this.internal;return et(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},Mg={flow:function(t){var e=this.internal,r,n,i=0,a=0,o,s;if((t.json||t.rows||t.columns)&&(r=e.convertData(t)),!(!r||!Yu())){var u=[],l=e.getMaxDataCount(),c=e.convertDataToTargets(r,!0),f=e.axis.isTimeSeries();e.data.targets.forEach(function(g){for(var p=!1,m=0;m<c.length;m++)if(g.id===c[m].id){p=!0,g.values[g.values.length-1]&&(a=g.values[g.values.length-1].index+1),i=c[m].values.length;for(var _=0;_<i;_++)c[m].values[_].index=a+_,f||(c[m].values[_].x=a+_);g.values=g.values.concat(c[m].values),c.splice(m,1);break}!p&&u.push(g.id)}),e.data.targets.forEach(function(g){for(var p=0;p<u.length;p++)if(g.id===u[p]){a=g.values[g.values.length-1].index+1;for(var m=0;m<i;m++)g.values.push({id:g.id,index:a+m,x:f?e.getOtherTargetX(a+m):a+m,value:null})}}),e.data.targets.length&&c.forEach(function(g){for(var p=[],m=e.data.targets[0].values[0].index;m<a;m++)p.push({id:g.id,index:m,x:f?e.getOtherTargetX(m):m,value:null});g.values.forEach(function(_){_.index+=a,f||(_.x+=a)}),g.values=p.concat(g.values)}),e.data.targets=e.data.targets.concat(c);var h=e.data.targets[0],d=h.values[0];Q(t.to)?(i=0,s=f?Bt.call(e,t.to):t.to,h.values.forEach(function(g){g.x<s&&i++})):Q(t.length)&&(i=t.length),l?l===1&&f&&(o=(h.values[h.values.length-1].x-d.x)/2,n=[new Date(+d.x-o),new Date(+d.x+o)]):(f?o=h.values.length>1?h.values[h.values.length-1].x-d.x:d.x-e.getXDomain(e.data.targets)[0]:o=1,n=[d.x-o,d.x]),n&&e.updateXDomain(null,!0,!0,!1,n),e.updateTargets(e.data.targets),e.redraw({flow:{index:d.index,length:i,duration:P(t.duration)?t.duration:e.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}},rl=function(){function t(e){var r=we(),n=e.config,i=e.params;this.owner=e,this.config=n,this.scale=r,(n.noTransition||!i.config.transition_duration)&&(n.withoutTransition=!0),n.range=this.scaleExtent((i.orgXScale||r).range())}return t.getSizeFor1Char=function(e){var r={w:5.5,h:11.5};return!e.empty()&&e.select("text").text("0").call(function(n){try{var i=n.node().getBBox(),a=i.width,o=i.height;a&&o&&(r.w=a,r.h=o)}catch(s){}finally{n.text("")}}),this.getSizeFor1Char=function(){return r},r},t.prototype.getTickTransformSetter=function(e){var r=this.config,n=e==="x"?function(i){return"translate("+(i+r.tickOffset)+",0)"}:function(i){return"translate(0,"+i+")"};return function(i,a){i.attr("transform",function(o){return n(Math.ceil(a(o)))})}},t.prototype.scaleExtent=function(e){var r=e[0],n=e[e.length-1];return r<n?[r,n]:[n,r]},t.prototype.generateTicks=function(e,r){var n=this.owner.params.tickStepSize,i=e.domain(),a=i[0],o=i[1],s=[];if(r&&n)for(var u=a;u<=o;)s.push(u),u+=n;else if(e.ticks){var l=this.config.tickArguments;if(e.type==="log"&&!l){var c=we("_log").domain([a>0?a:1,o]).range(e.range());s=c.ticks();for(var f=o.toFixed().length;s.length>15;f--)s=c.ticks(f);s.splice(0,1,a),s.splice(s.length-1,1,o)}else s=e.ticks.apply(e,this.config.tickArguments||[]);s=s.map(function(d){var g=ft(d)&&it(d)&&!isNaN(d)&&Math.round(d*10)/10||d;return g})}else{for(var h=Math.ceil(a);h<o;h++)s.push(h);s.length>0&&s[0]>0&&s.unshift(s[0]-(s[1]-s[0]))}return s},t.prototype.copyScale=function(){var e=this.scale.copy();return e.domain().length||e.domain(this.scale.domain()),e.type=this.scale.type,e},t.prototype.textFormatted=function(e){var r=this.config.tickFormat,n=/\d+\.\d+0{5,}\d$/.test(e)?+String(e).replace(/0+\d$/,""):e,i=r?r(n):n;return Q(i)?i:""},t.prototype.transitionise=function(e){var r=this.config;return r.withoutTransition?e.interrupt():e.transition(r.transition)},t}(),Rg=function(){function t(e){e===void 0&&(e={});var r={innerTickSize:6,outerTickSize:e.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:e.noTransition};r.tickLength=Math.max(r.innerTickSize,0)+r.tickPadding,this.config=r,this.params=e,this.helper=new rl(this)}return t.prototype.create=function(e){var r=this,n=this,i=n.config,a=n.helper,o=n.params,s=a.scale,u=i.orient,l=this.splitTickText.bind(this),c=/^(left|right)$/.test(u),f=/^(top|bottom)$/.test(u),h=a.getTickTransformSetter(f?"x":"y"),d=h===a.axisX?"y":"x",g=/^(top|left)$/.test(u)?-1:1,p=o.tickTextRotate;this.config.range=s.rangeExtent?s.rangeExtent():a.scaleExtent((o.orgXScale||s).range());var m=i.innerTickSize,_=i.tickLength,y=i.range,T=o.id,x=T&&/^(x|y|y2)$/.test(T)?o.config["axis_"+T+"_tick_text_position"]:{x:0,y:0},$=T==="subX"?"subchart_axis_x":"axis_"+T,b=o.config[$+"_show"],w={tick:b?o.config[$+"_tick_show"]:!1,text:b?o.config[$+"_tick_text_show"]:!1},C;e.each(function(){var D=F(this),O=this.__chart__||s,k=a.copyScale();C=D,this.__chart__=k,i.tickOffset=o.isCategory?Math.ceil((k(1)-k(0))/2):0;var M=D.selectAll(".domain").data([0]);if(M.enter().append("path").attr("class","domain").merge(a.transitionise(M).selection()).attr("d",function(){var S=i.outerTickSize*g;return f?"M"+y[0]+","+S+"V0H"+y[1]+"V"+S:"M"+S+","+y[0]+"H0V"+y[1]+"H"+S}),w.tick||w.text){var L=i.tickValues||a.generateTicks(k,c),E=D.selectAll(".tick").data(L,k),B=E.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),W=E.exit().remove();E=B.merge(E),w.tick&&B.append("line"),w.text&&B.append("text");var q=rl.getSizeFor1Char(E),J=[],j=E.select("text").selectAll("tspan").data(function(S,I){var nt=o.tickMultiline?l(S,k,L,c,q.w):K(a.textFormatted(S))?a.textFormatted(S).concat():[a.textFormatted(S)];return J[I]=nt.length,nt.map(function(_t){return{index:I,splitted:_t}})});j.exit().remove(),j=j.enter().append("tspan").merge(j).text(function(S){return S.splitted}),j.attr("x",f?0:_*g).attr("dx",function(){var S=0;return/(top|bottom)/.test(u)&&p&&(S=8*Math.sin(Math.PI*(p/180))*(u==="top"?-1:1)),S+(x.x||0)}()).attr("dy",function(S,I){var nt=".71em",_t=0;return u!=="top"&&(_t=q.h,I===0&&(_t=c?-((J[S.index]-1)*(q.h/2)-3):x.y===0?nt:0)),it(_t)&&x.y?_t+x.y:_t||nt});var ut=E.select("line"),V=E.select("text");if(B.select("line").attr(d+"2",m*g),B.select("text").attr(d,_*g),r.setTickLineTextPosition(ut,V),o.tickTitle){var rt=V.select("title");(rt.empty()?V.append("title"):rt).text(function(S){return o.tickTitle[S]})}if(k.bandwidth){var wt=k,gt=wt.bandwidth()/2;O=function(S){return wt(S)+gt},k=O}else O.bandwidth?O=k:h(W,k);h(B,O),h(a.transitionise(E).style("opacity","1"),k)}}),this.g=C},t.prototype.getTickXY=function(){var e=this.config,r={x:0,y:0};return this.params.isCategory&&(r.x=e.tickCentered?0:e.tickOffset,r.y=e.tickCentered?e.tickOffset:0),r},t.prototype.getTickSize=function(e){var r=this.helper.scale,n=this.config,i=n.innerTickSize,a=n.range,o=r(e)+(n.tickCentered?0:n.tickOffset);return a[0]<o&&o<a[1]?i:0},t.prototype.setTickLineTextPosition=function(e,r){var n=this.getTickXY(),i=this.config,a=i.innerTickSize,o=i.orient,s=i.tickLength,u=i.tickOffset,l=this.params.tickTextRotate,c=function(d){var g=["start","end"];return o==="top"&&g.reverse(),d?d>0?g[0]:g[1]:"middle"},f=function(d){return d?"rotate("+d+")":null},h=function(d){var g=d/(o==="bottom"?15:23);return d?11.5-2.5*g*(d>0?1:-1):s};switch(o){case"bottom":e.attr("x1",n.x).attr("x2",n.x).attr("y2",this.getTickSize.bind(this)),r.attr("x",0).attr("y",h(l)).style("text-anchor",c(l)).attr("transform",f(l));break;case"top":e.attr("x2",0).attr("y2",-a),r.attr("x",0).attr("y",-h(l)*2).style("text-anchor",c(l)).attr("transform",f(l));break;case"left":e.attr("x2",-a).attr("y1",n.y).attr("y2",n.y),r.attr("x",-s).attr("y",u).style("text-anchor","end");break;case"right":e.attr("x2",a).attr("y2",0),r.attr("x",s).attr("y",0).style("text-anchor","start")}},t.prototype.splitTickText=function(e,r,n,i,a){var o=this.params,s=this.helper.textFormatted(e),u=ft(s)&&s.indexOf(`
`)>-1?s.split(`
`):[];if(u.length)return u;if(K(s))return s;var l=o.tickWidth;(!l||l<=0)&&(l=i?95:o.isCategory?Math.ceil(r(n[1])-r(n[0]))-12:110);function c(f,h){for(var d,g,p,m=1;m<h.length;m++)if(h.charAt(m)===" "&&(g=m),d=h.substr(0,m+1),p=a*d.length,l<p)return c(f.concat(h.substr(0,g||m)),h.slice(g?g+1:m));return f.concat(h)}return c(u,String(s))},t.prototype.scale=function(e){return arguments.length?(this.helper.scale=e,this):this.helper.scale},t.prototype.orient=function(e){return arguments.length?(this.config.orient=e in{top:1,right:1,bottom:1,left:1}?String(e):"bottom",this):this.config.orient},t.prototype.tickFormat=function(e){var r=this.config;return arguments.length?(r.tickFormat=e,this):r.tickFormat},t.prototype.tickCentered=function(e){var r=this.config;return arguments.length?(r.tickCentered=e,this):r.tickCentered},t.prototype.tickOffset=function(){return this.config.tickOffset},t.prototype.tickInterval=function(e){var r=this,n;if(this.params.isCategory)n=this.config.tickOffset*2;else{var i=this.g.select("path.domain").node().getTotalLength()-this.config.outerTickSize*2;n=i/(e||this.g.selectAll("line").size());var a=this.config.tickValues.map(function(o,s,u){var l=s+1;return l<u.length?r.helper.scale(u[l])-r.helper.scale(o):null}).filter(Boolean);n=Math.min.apply(Math,Tt(Tt([],a),[n]))}return n===Infinity?0:n},t.prototype.ticks=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this.config;return e.length?(n.tickArguments=Ir(e),this):n.tickArguments},t.prototype.tickCulling=function(e){var r=this.config;return arguments.length?(r.tickCulling=e,this):r.tickCulling},t.prototype.tickValues=function(e){var r=this,n=this.config;if(U(e))n.tickValues=function(){return e(r.helper.scale.domain())};else{if(!arguments.length)return n.tickValues;n.tickValues=e}return this},t.prototype.setTransition=function(e){return this.config.transition=e,this},t}(),Lg={getAxisInstance:function(){return this.axis||new Eg(this)}},Eg=function(){function t(e){this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=e,this.setOrient()}return t.prototype.getAxisClassName=function(e){return v.axis+" "+v["axis"+Xt(e)]},t.prototype.isHorizontal=function(e,r){var n=e.config.axis_rotated;return r?n:!n},t.prototype.isCategorized=function(){var e=this.owner,r=e.config,n=e.state;return r.axis_x_type.indexOf("category")>=0||n.hasRadar},t.prototype.isCustomX=function(){var e=this.owner.config;return!this.isTimeSeries()&&(e.data_x||at(e.data_xs))},t.prototype.isTimeSeries=function(e){return e===void 0&&(e="x"),this.owner.config["axis_"+e+"_type"]==="timeseries"},t.prototype.isLog=function(e){return e===void 0&&(e="x"),this.owner.config["axis_"+e+"_type"]==="log"},t.prototype.isTimeSeriesY=function(){return this.isTimeSeries("y")},t.prototype.getAxisType=function(e){e===void 0&&(e="x");var r="linear";return this.isTimeSeries(e)?r="time":this.isLog(e)&&(r="log"),r},t.prototype.init=function(){var e=this,r=this.owner,n=r.config,i=r.$el,a=i.main,o=i.axis,s=r.state.clip,u=n.axis_rotated,l=["x","y"];n.axis_y2_show&&l.push("y2"),l.forEach(function(c){var f=e.getAxisClassName(c),h=v["axis"+c.toUpperCase()+"Label"];o[c]=a.append("g").attr("class",f).attr("clip-path",function(){var d=null;return c==="x"?d=s.pathXAxis:c==="y"&&(d=s.pathYAxis),d}).attr("transform",r.getTranslate(c)).style("visibility",n["axis_"+c+"_show"]?"visible":"hidden"),o[c].append("text").attr("class",h).attr("transform",["rotate(-90)",null][c==="x"?+!u:+u]).style("text-anchor",function(){return e.textAnchorForAxisLabel(c)}),e.generateAxes(c)})},t.prototype.setOrient=function(){var e=this.owner,r=e.config,n=r.axis_rotated,i=r.axis_y_inner,a=r.axis_y2_inner;this.orient={x:n?"left":"bottom",y:n?i?"top":"bottom":i?"right":"left",y2:n?a?"bottom":"top":a?"left":"right",subX:n?"left":"bottom"}},t.prototype.generateAxes=function(e){var r=this.owner,n=r.config,i=[],a=n["axis_"+e+"_axes"],o=n.axis_rotated,s;e==="x"?s=o?Mn:Cn:e==="y"?s=o?Cn:Mn:e==="y2"&&(s=o?ia:aa),a.length&&a.forEach(function(u){var l=u.tick||{},c=r.scale[e].copy();u.domain&&c.domain(u.domain),i.push(s(c).ticks(l.count).tickFormat(U(l.format)?l.format.bind(r.api):function(f){return f}).tickValues(l.values).tickSizeOuter(l.outer===!1?0:6))}),this.axesList[e]=i},t.prototype.updateAxes=function(){var e=this,r=this.owner,n=r.config,i=r.$el.main;Object.keys(this.axesList).forEach(function(a){var o=n["axis_"+a+"_axes"],s=r.scale[a].copy(),u=s.range();e.axesList[a].forEach(function(l,c){var f=l.scale().range();u.every(function(g,p){return g===f[p]})||l.scale().range(u);var h=e.getAxisClassName(a)+"-"+(c+1),d=i.select("."+h.replace(/\s/,"."));d.empty()?d=i.append("g").attr("class",h).style("visibility",n["axis_"+a+"_show"]?"visible":"hidden").call(l):(o[c].domain&&s.domain(o[c].domain),e.x.helper.transitionise(d).call(l.scale(s))),d.attr("transform",r.getTranslate(a,c+1))})})},t.prototype.setAxis=function(e,r,n,i){var a=this.owner;e!=="subX"&&(this.tick[e]=this.getTickValues(e)),this[e]=this.getAxis(e,r,n,e==="x"&&(a.scale.zoom||a.config.subchart_show||a.state.resizing)?!0:i)},t.prototype.getAxis=function(e,r,n,i,a){var o=this.owner,s=o.config,u=/^(x|subX)$/.test(e),l=u?"x":e,c=u&&this.isCategorized(),f=this.orient[e],h=a?0:o.getAxisTickRotate(l),d;if(u)d=o.format.xAxisTick;else{var g=s["axis_"+e+"_tick_format"];U(g)&&(d=g.bind(o.api))}var p=this.tick[l],m=Be({outerTick:n,noTransition:i,config:s,id:e,tickTextRotate:h},u&&{isCategory:c,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTitle:c&&s.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});u||(m.tickStepSize=s["axis_"+l+"_tick_stepSize"]);var _=new Rg(m).scale(u&&o.scale.zoom||r).orient(f);if(u&&this.isTimeSeries()&&p&&!U(p)){var y=Bt.bind(o);p=p.map(function(x){return y(x)})}else!u&&this.isTimeSeriesY()&&(_.ticks(s.axis_y_tick_time_value),p=null);p&&_.tickValues(p),_.tickFormat(d||!u&&o.isStackNormalized()&&function(x){return x+"%"}),c&&(_.tickCentered(s.axis_x_tick_centered),sa(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1));var T=s["axis_"+l+"_tick_count"];return T&&_.ticks(T),_},t.prototype.updateXAxisTickValues=function(e,r){var n=this.owner,i=n.config,a=i.axis_x_tick_fit,o=i.axis_x_tick_count,s;return(a||o&&a)&&(s=n.mapTargetsToUniqueXs(e),this.isCategorized()&&o>s.length&&(o=s.length),s=this.generateTickValues(s,o,this.isTimeSeries())),r?r.tickValues(s):this.x&&(this.x.tickValues(s),this.subX&&this.subX.tickValues(s)),s},t.prototype.getId=function(e){var r=this.owner,n=r.config,i=r.scale,a=n.data_axes[e];return(!a||!i[a])&&(a="y"),a},t.prototype.getXAxisTickFormat=function(){var e=this.owner,r=e.config,n=e.format,i=r.axis_x_tick_format,a=this.isTimeSeries(),o=this.isCategorized(),s;return i?U(i)?s=i.bind(e.api):a&&(s=function(u){return u?n.axisTime(i)(u):""}):s=a?n.defaultAxisTime:o?e.categoryName:function(u){return u<0?u.toFixed(0):u},U(s)?function(u){return s.apply(e,o?[u,e.categoryName(u)]:[u])}:s},t.prototype.getTickValues=function(e){var r=this.owner,n=r.config["axis_"+e+"_tick_values"],i=r[e+"Axis"];return(U(n)?n.call(r.api):n)||(i?i.tickValues():void 0)},t.prototype.getLabelOptionByAxisId=function(e){return this.owner.config["axis_"+e+"_label"]},t.prototype.getLabelText=function(e){var r=this.getLabelOptionByAxisId(e);return ft(r)?r:r?r.text:null},t.prototype.setLabelText=function(e,r){var n=this.owner,i=n.config,a=this.getLabelOptionByAxisId(e);ft(a)?i["axis_"+e+"_label"]=r:a&&(a.text=r)},t.prototype.getLabelPosition=function(e,r){var n=this.owner.config.axis_rotated,i=this.getLabelOptionByAxisId(e),a=Pt(i)&&i.position?i.position:r[+!n],o=function(s){return!!~a.indexOf(s)};return{isInner:o("inner"),isOuter:o("outer"),isLeft:o("left"),isCenter:o("center"),isRight:o("right"),isTop:o("top"),isMiddle:o("middle"),isBottom:o("bottom")}},t.prototype.getAxisLabelPosition=function(e){return this.getLabelPosition(e,e==="x"?["inner-top","inner-right"]:["inner-right","inner-top"])},t.prototype.getLabelPositionById=function(e){return this.getAxisLabelPosition(e)},t.prototype.xForAxisLabel=function(e){var r=this.owner,n=r.state,i=n.width,a=n.height,o=this.getAxisLabelPosition(e),s=o.isMiddle?-a/2:0;return this.isHorizontal(r,e!=="x")?s=o.isLeft?0:o.isCenter?i/2:i:o.isBottom&&(s=-a),s},t.prototype.dxForAxisLabel=function(e){var r=this.owner,n=this.getAxisLabelPosition(e),i=n.isBottom?"0.5em":"0";return this.isHorizontal(r,e!=="x")?i=n.isLeft?"0.5em":n.isRight?"-0.5em":"0":n.isTop&&(i="-0.5em"),i},t.prototype.textAnchorForAxisLabel=function(e){var r=this.owner,n=this.getAxisLabelPosition(e),i=n.isMiddle?"middle":"end";return this.isHorizontal(r,e!=="x")?i=n.isLeft?"start":n.isCenter?"middle":"end":n.isBottom&&(i="start"),i},t.prototype.dyForAxisLabel=function(e){var r=this.owner,n=r.config,i=n.axis_rotated,a=this.getAxisLabelPosition(e).isInner,o=n["axis_"+e+"_tick_rotate"]?r.getHorizontalAxisHeight(e):0,s=this.getMaxTickWidth(e),u;if(e==="x"){var l=n.axis_x_height;i?u=a?"1.2em":-25-s:a?u="-0.5em":l?u=l-10:o?u=o-10:u="3em"}else u={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[e],i?a?u=u[0]:o?u=o*(e==="y2"?-1:1)-u[1]:u=u[2]:u=a?u[3]:(u[4]+(n["axis_"+e+"_inner"]?0:s+u[4]))*(e==="y"?-1:1);return u},t.prototype.getMaxTickWidth=function(e,r){var n=this.owner,i=n.config,a=n.state.current,o=n.$el,s=o.svg,u=o.chart,l=a.maxTickWidths[e],c=0;if(r||!i["axis_"+e+"_show"]||n.filterTargetsToShow().length===0)return l.size;if(s){var f=/^y2?$/.test(e),h=n.filterTargetsToShow(n.data.targets),d=n.scale[e].copy().domain(n["get"+(f?"Y":"X")+"Domain"](h,e)),g=d.domain(),p=g[0]===g[1]&&g.every(function($){return $>0}),m=K(l.domain)&&l.domain[0]===l.domain[1]&&l.domain.every(function($){return $>0});if(p||m)return l.size;l.domain=g,f||l.ticks.splice(0);var _=this.getAxis(e,d,!1,!1,!0),y=i["axis_"+e+"_tick_count"],T=i["axis_"+e+"_tick_values"];!T&&y&&_.tickValues(this.generateTickValues(g,y,f?this.isTimeSeriesY():this.isTimeSeries())),!f&&this.updateXAxisTickValues(h,_);var x=u.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");_.create(x),x.selectAll("text").each(function($,b){var w=this.getBoundingClientRect().width;c=Math.max(c,w),f||(l.ticks[b]=w)}),x.remove()}return c>0&&(l.size=c),l.size},t.prototype.getXAxisTickTextY2Overflow=function(e){var r=this.owner,n=r.axis,i=r.config,a=r.state,o=r.getAxisTickRotate("x"),s=o>0&&o<90;if((n.isCategorized()||n.isTimeSeries())&&i.axis_x_tick_fit&&!i.axis_x_tick_culling&&!i.axis_x_tick_multiline&&s){var u=a.current.width-r.getCurrentPaddingLeft(),l=this.getXAxisTickMaxOverflow(o,u-e),c=Math.max(0,l)+e;return Math.min(c,u/2)}return 0},t.prototype.getXAxisTickMaxOverflow=function(e,r){for(var n=this.owner,i=n.axis,a=n.config,o=n.state,s=i.isTimeSeries(),u=o.current.maxTickWidths.x.ticks,l=u.length,c=o.axis.x.padding,f=c.left,h=c.right,d=0,g=l-(s&&a.axis_x_tick_fit?.5:0),p=0;p<l;p++){var m=p+1,_=Math.cos(Math.PI*e/180)*u[p],y=m-(s?1:.5)+f;if(!(y<=0)){var T=r-_,x=T/y,$=g-m,b=h*x,w=$*x+b,C=_-x/2-w;d=Math.max(d,C)}}var D=n.filterTargetsToShow(n.data.targets),O=0;if(!s&&a.axis_x_tick_count<=D.length&&D[0].values.length){var k=we(n.axis.getAxisType("x"),0,r-d).domain([f*-1,n.getXDomainMax(n.data.targets)+1+h]);O=Math.ceil((k(1)-k(0))/2)}return d+O},t.prototype.getXAxisPadding=function(e){var r=this.owner,n=r.config.axis_x_padding,i=it(n)?{left:n,right:n}:n,a=i.left,o=a===void 0?0:a,s=i.right,u=s===void 0?0:s;if(r.axis.isTimeSeries()){var l=+r.getXDomainMin(r.data.targets),c=+r.getXDomainMax(r.data.targets),f=c-l,h=f+o+u;if(e&&h){var d=f/e/h;o=o/h/d,u=u/h/d}}return{left:o,right:u}},t.prototype.updateLabels=function(e){var r=this,n=this.owner,i=n.$el.main,a={x:i.select("."+v.axisX+" ."+v.axisXLabel),y:i.select("."+v.axisY+" ."+v.axisYLabel),y2:i.select("."+v.axisY2+" ."+v.axisY2Label)};Object.keys(a).filter(function(o){return!a[o].empty()}).forEach(function(o){var s=a[o];(e?s.transition():s).attr("x",function(){return r.xForAxisLabel(o)}).attr("dx",function(){return r.dxForAxisLabel(o)}).attr("dy",function(){return r.dyForAxisLabel(o)}).text(function(){return r.getLabelText(o)})})},t.prototype.getPadding=function(e,r,n,i){var a=it(e)?e:e[r];return P(a)?this.convertPixelsToAxisPadding(a,i):n},t.prototype.convertPixelsToAxisPadding=function(e,r){var n=this.owner,i=n.config,a=n.state,o=a.width,s=a.height,u=i.axis_rotated?o:s;return r*(e/u)},t.prototype.generateTickValues=function(e,r,n){var i=e;if(r){var a=U(r)?r():r;if(a===1)i=[e[0]];else if(a===2)i=[e[0],e[e.length-1]];else if(a>2){var o=this.isCategorized(),s=a-2,u=e[0],l=e[e.length-1],c=(l-u)/(s+1),f=void 0;i=[u];for(var h=0;h<s;h++)f=+u+c*(h+1),i.push(n?new Date(f):o?Math.round(f):f);i.push(l)}}return n||(i=i.sort(function(d,g){return d-g})),i},t.prototype.generateTransitions=function(e){var r=this.owner,n=r.$el.axis,i=["x","y","y2","subX"].map(function(l){var c=n[l];return c&&e&&(c=c.transition().duration(e)),c}),a=i[0],o=i[1],s=i[2],u=i[3];return{axisX:a,axisY:o,axisY2:s,axisSubX:u}},t.prototype.redraw=function(e,r,n){var i=this,a=this.owner,o=a.config,s=a.$el,u=r?"0":"1";["x","y","y2","subX"].forEach(function(l){var c=i[l],f=s.axis[l];c&&f&&(!n&&!o.transition_duration&&(c.config.withoutTransition=!0),f.style("opacity",u),c.create(e["axis"+Xt(l)]))}),this.updateAxes()},t.prototype.redrawAxis=function(e,r,n,i,a){var o=this,s=this.owner,u=s.config,l=s.scale,c=s.$el,f=!!l.zoom,h;!f&&this.isCategorized()&&e.length===0&&l.x.domain([0,c.axis.x.selectAll(".tick").size()]),l.x&&e.length?(!f&&s.updateXDomain(e,r.UpdateXDomain,r.UpdateOrgXDomain,r.TrimXDomain),u.axis_x_tick_values||this.updateXAxisTickValues(e)):this.x&&(this.x.tickValues([]),this.subX&&this.subX.tickValues([])),u.zoom_rescale&&!i&&(h=l.x.orgDomain()),["y","y2"].forEach(function(d){var g=l[d];if(g){var p=u["axis_"+d+"_tick_values"],m=u["axis_"+d+"_tick_count"];if(g.domain(s.getYDomain(e,d,h)),!p&&m){var _=s.axis[d],y=g.domain();_.tickValues(o.generateTickValues(y,y.every(function(T){return T===0})?1:m,o.isTimeSeriesY()))}}}),this.redraw(n,s.hasArcType(),a),this.updateLabels(r.Transition),(r.UpdateXDomain||r.UpdateXAxis||r.Y)&&e.length&&this.setCulling(),r.Y&&(l.subY&&l.subY.domain(s.getYDomain(e,"y")),l.subY2&&l.subY2.domain(s.getYDomain(e,"y2")))},t.prototype.setCulling=function(){var e=this.owner,r=e.config,n=e.state,i=n.clip,a=n.current,o=e.$el;["subX","x","y","y2"].forEach(function(s){var u=o.axis[s],l=s==="subX"?"x":s,c=r["axis_"+l+"_tick_culling"];if(u&&c){var f=u.selectAll(".tick text"),h=Ye(f.data()),d=h.length,g=r["axis_"+l+"_tick_culling_max"],p;if(d){for(var m=1;m<d;m++)if(d/m<g){p=m;break}f.each(function(y){this.style.display=h.indexOf(y)%p?"none":"block"})}else f.style("display","block");if(s==="x"){var _=a.maxTickWidths.x.clipPath?i.pathXAxisTickTexts:null;o.svg.selectAll("."+v.axisX+" .tick text").attr("clip-path",_)}}})},t}(),Dg={initEventRect:function(){var t=this;t.$el.main.select("."+v.chart).append("g").attr("class",v.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this,e=t.config,r=t.state,n=t.$el,i=t.isMultipleX();if(n.eventRect)t.updateEventRect(n.eventRect,!0);else{var a=t.$el.main.select("."+v.eventRects).style("cursor",e.zoom_enabled&&e.zoom_type!=="drag"?e.axis_rotated?"ns-resize":"ew-resize":null).classed(v.eventRectsMultiple,i).classed(v.eventRectsSingle,!i),o=a.selectAll("."+v.eventRect).data([0]).enter().append("rect");t.updateEventRect(o),i?t.generateEventRectsForMultipleXs(o):t.generateEventRectsForSingleX(o),o.call(t.getDraggableSelection()),n.eventRect=o,t.state.inputType==="touch"&&!n.svg.on("touchstart.eventRect")&&!t.hasArcType()&&t.bindTouchOnEventRect(i)}if(!i){var s=t.getMaxDataCountTarget();t.updateDataIndexByX(s),t.updateXs(s),t.updatePointClass&&t.updatePointClass(!0),r.eventReceiver.data=s}t.updateEventRectData()},bindTouchOnEventRect:function(t){var e=this,r=e.config,n=e.state,i=e.$el,a=i.eventRect,o=i.svg,s=function(g){if(t)e.selectRectForMultipleXs(g);else{var p=e.getDataIndexFromEvent(n.event);e.callOverOutForTouch(p),p===-1?e.unselectRect():e.selectRectForSingle(g,a,p)}},u=function(){e.unselectRect(),e.callOverOutForTouch()},l=r.interaction_inputType_touch.preventDefault,c=zu(l)&&l||!1,f=!isNaN(l)&&l||null,h,d=function(g){var p=g.type,m=g.changedTouches[0],_=m["client"+(r.axis_rotated?"Y":"X")];p==="touchstart"?c?g.preventDefault():f!==null&&(h=_):p==="touchmove"&&(c||h===!0||f!==null&&Math.abs(h-_)>=f)&&(h=!0,g.preventDefault())};a.on("touchstart",function(g){n.event=g,e.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",function(g){if(n.event=g,!a.empty()&&a.classed(v.eventRect)){if(n.dragging||n.flowing||e.hasArcType()||g.touches.length>1)return;d(g),s(a.node())}else u()},!0).on("touchend.eventRect",function(g){n.event=g,!a.empty()&&a.classed(v.eventRect)&&(e.hasArcType()||!e.toggleShape||n.cancelClick)&&n.cancelClick&&(n.cancelClick=!1)},!0),o.on("touchstart",function(g){n.event=g;var p=g.target;p&&p!==a.node()&&u()})},updateEventRect:function(t,e){e===void 0&&(e=!1);var r=this,n=r.state,i=r.$el,a=n.eventReceiver,o=n.width,s=n.height,u=n.rendered,l=n.resizing,c=t||i.eventRect,f=function(){a&&(a.rect=c.node().getBoundingClientRect())};(!u||l||e)&&(c.attr("x",0).attr("y",0).attr("width",o).attr("height",s),u||c.attr("class",v.eventRect)),f()},updateEventRectData:function(){var t=this,e=t.config,r=t.scale,n=t.state,i=r.zoom||r.x,a=e.axis_rotated,o,s,u,l;if(t.isMultipleX())o=0,s=0,u=n.width,l=n.height;else{var c,f=void 0;if(t.axis.isCategorized())c=t.getEventRectWidth(),f=function(p){return i(p.x)-c/2};else{var h=function(p){var m=p.index;return{prev:t.getPrevX(m),next:t.getNextX(m)}};c=function(p){var m=h(p);return m.prev===null&&m.next===null?a?n.height:n.width:(m.prev===null&&(m.prev=i.domain()[0]),m.next===null&&(m.next=i.domain()[1]),Math.max(0,(i(m.next)-i(m.prev))/2))},f=function(p){var m=h(p),_=p.x;return m.prev===null&&m.next===null?0:(m.prev===null&&(m.prev=i.domain()[0]),(i(_)+i(m.prev))/2)}}o=a?0:f,s=a?f:0,u=a?n.width:c,l=a?c:n.height}var d=n.eventReceiver,g=function(p,m){return U(p)?p(m):p};d.coords.splice(d.data.length),d.data.forEach(function(p,m){d.coords[m]={x:g(o,p),y:g(s,p),w:g(u,p),h:g(l,p)}})},selectRectForMultipleXs:function(t){var e=this,r=e.config,n=e.state,i=e.filterTargetsToShow(e.data.targets);if(!(n.dragging||e.hasArcType(i))){var a=oe(n.event,t),o=e.findClosestFromTargets(i,a);if(n.mouseover&&(!o||o.id!==n.mouseover.id)&&(r.data_onout.call(e.api,n.mouseover),n.mouseover=void 0),!o){e.unselectRect();return}var s=e.isBubbleType(o)||e.isScatterType(o)||!r.tooltip_grouped?[o]:e.filterByX(i,o.x),u=s.map(function(l){return e.addName(l)});e.showTooltip(u,t),e.setExpand(o.index,o.id,!0),e.showGridFocus(u),(e.isBarType(o.id)||e.dist(o,a)<r.point_sensitivity)&&(e.$el.svg.select("."+v.eventRect).style("cursor","pointer"),n.mouseover||(r.data_onover.call(e.api,o),n.mouseover=o))}},unselectRect:function(){var t=this,e=t.config,r=t.$el,n=r.circle,i=r.tooltip;t.$el.svg.select("."+v.eventRect).style("cursor",null),t.hideGridFocus(),i&&(t.hideTooltip(),t._handleLinkedCharts(!1)),n&&!e.point_focus_only&&t.unexpandCircles(),t.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var e=this,r=e.config,n=e.state,i=n.eventReceiver,a=t.style("cursor",r.data_selection_enabled&&r.data_selection_grouped?"pointer":null).on("click",function(s){n.event=s;var u=i.currentIdx,l=i.data,c=l[u===-1?e.getDataIndexFromEvent(s):u];e.clickHandlerForSingleX.bind(this)(c,e)});if(n.inputType==="mouse"){var o=function(s){var u=s?e.getDataIndexFromEvent(s):i.currentIdx;return u>-1?i.data[u]:null};a.on("mouseover",function(s){n.event=s,e.updateEventRect()}).on("mousemove",function(s){var u=o(s);if(n.event=s,!(n.dragging||n.flowing||e.hasArcType()||!u||r.tooltip_grouped&&u&&u.index===i.currentIdx)){var l=u.index;e.isStepType(u)&&r.line_step_type==="step-after"&&oe(s,this)[0]<e.scale.x(e.getXValue(u.id,l))&&(l-=1),l!==i.currentIdx&&(e.setOverOut(!1,i.currentIdx),i.currentIdx=l),l===-1?e.unselectRect():e.selectRectForSingle(this,a,l),e.setOverOut(l!==-1,l)}}).on("mouseout",function(s){n.event=s,!(!r||e.hasArcType()||i.currentIdx===-1)&&(e.unselectRect(),e.setOverOut(!1,i.currentIdx),i.currentIdx=-1)})}return a},clickHandlerForSingleX:function(t,e){var r=e,n=r.config,i=r.state,a=r.$el.main;if(!t||r.hasArcType()||i.cancelClick){i.cancelClick&&(i.cancelClick=!1);return}var o=t.index;a.selectAll("."+v.shape+"-"+o).each(function(s){(n.data_selection_grouped||r.isWithinShape(this,s))&&(r.toggleShape&&r.toggleShape(this,s,o),n.data_onclick.bind(r.api)(s,this))})},generateEventRectsForMultipleXs:function(t){var e=this,r=e.state;t.on("click",function(n){r.event=n,e.clickHandlerForMultipleXS.bind(this)(e)}),r.inputType==="mouse"&&t.on("mouseover mousemove",function(n){r.event=n,e.selectRectForMultipleXs(this)}).on("mouseout",function(n){r.event=n,!(!e.config||e.hasArcType())&&e.unselectRect()})},clickHandlerForMultipleXS:function(t){var e=t,r=e.config,n=e.state,i=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(i)){var a=oe(n.event,this),o=e.findClosestFromTargets(i,a);!o||(e.isBarType(o.id)||e.dist(o,a)<r.point_sensitivity)&&e.$el.main.selectAll("."+v.shapes+e.getTargetSelectorSuffix(o.id)).selectAll("."+v.shape+"-"+o.index).each(function(){(r.data_selection_grouped||e.isWithinShape(this,o))&&(e.toggleShape&&e.toggleShape(this,o,o.index),r.data_onclick.bind(e.api)(o,this))})}}},Ig={generateFlow:function(t){var e=this,r=e.data,n=e.state,i=e.$el;return function(){var a=t.flow.length;n.flowing=!0,r.targets.forEach(function(s){s.values.splice(0,a)}),e.updateXGrid&&e.updateXGrid(!0);var o={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(s){var u=s.split("."),l=i[u[0]];l&&u.length>1&&(l=l[u[1]]),l&&l.size()&&(o[s]=l)}),e.hideGridFocus(),e.setFlowList(o,t)}},setFlowList:function(t,e){var r=this,n=e.flow,i=e.targets,a=n.duration,o=a===void 0?e.duration:a,s=n.index,u=n.length,l=n.orgDataCount,c=r.getFlowTransform(i,l,s,u),f=Uu(),h;f.add(Object.keys(t).map(function(d){return h=t[d].transition().ease(li).duration(o),d==="axis.x"?h=h.call(function(g){r.axis.x.setTransition(g).create(g)}):d==="region.list"?h=h.filter(r.isRegionOnX).attr("transform",c):h=h.attr("transform",c),h})),h.call(f,function(){r.cleanUpFlow(t,e)})},cleanUpFlow:function(t,e){var r=this,n=r.config,i=r.state,a=r.$el.svg,o=n.axis_rotated,s=e.flow,u=e.shape,l=e.xv,c=u.pos,f=c.cx,h=c.cy,d=c.xForText,g=c.yForText,p=s.done,m=p===void 0?function(){}:p,_=s.length;_&&(["circle","text","shape","eventRect"].forEach(function(y){for(var T=[],x=0;x<_;x++)T.push("."+v[y]+"-"+x);a.selectAll("."+v[y+"s"]).selectAll(T).remove()}),a.select("."+v.xgrid).remove()),Object.keys(t).forEach(function(y){var T=t[y];if(y!=="axis.x"&&T.attr("transform",null),y==="grid.x")T.attr(i.xgridAttr);else if(y==="gridLines.x")T.attr("x1",o?0:l).attr("x2",o?i.width:l);else if(y==="gridLines.x")T.select("line").attr("x1",o?0:l).attr("x2",o?i.width:l),T.select("text").attr("x",o?i.width:0).attr("y",l);else if(/^(area|bar|line)$/.test(y))T.attr("d",u.type[y]);else if(y==="text")T.attr("x",d).attr("y",g).style("fill-opacity",r.opacityForText.bind(r));else if(y==="circle")if(r.isCirclePoint())T.attr("cx",f).attr("cy",h);else{var x=function(b){return f(b)-n.point_r},$=function(b){return h(b)-n.point_r};T.attr("x",x).attr("y",$).attr("cx",f).attr("cy",h)}else y==="region.list"&&T.select("rect").filter(r.isRegionOnX).attr("x",r.regionX.bind(r)).attr("width",r.regionWidth.bind(r))}),n.interaction_enabled&&r.redrawEventRect(),m.call(r.api),i.flowing=!1},getFlowTransform:function(t,e,r,n){var i=this,a=i.data,o=i.scale.x,s=a.targets[0].values,u=i.getValueOnIndex(s,r),l=i.getValueOnIndex(s,r+n),c,f=o.domain(),h=i.updateXDomain(t,!0,!0);e?e===1||(u&&u.x)===(l&&l.x)?c=o(f[0])-o(h[0]):c=i.axis.isTimeSeries()?o(f[0])-o(h[0]):o(u.x)-o(l.x):s.length!==1?c=o(f[0])-o(h[0]):i.axis.isTimeSeries()?(u=i.getValueOnIndex(s,0),l=i.getValueOnIndex(s,s.length-1),c=o(u.x)-o(l.x)):c=Ln(h)/2;var d=Ln(f)/Ln(h);return"translate("+c+",0) scale("+d+",1)"}},jg={initClip:function(){var t=this,e=t.state.clip;e.id=t.state.datetimeId+"-clip",e.idXAxis=e.id+"-xaxis",e.idYAxis=e.id+"-yaxis",e.idGrid=e.id+"-grid",e.path=t.getClipPath(e.id),e.pathXAxis=t.getClipPath(e.idXAxis),e.pathYAxis=t.getClipPath(e.idYAxis),e.pathGrid=t.getClipPath(e.idGrid)},getClipPath:function(t){var e=this,r=e.config;if(!r.clipPath&&/-clip$/.test(t)||!r.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!r.axis_y_clipPath&&/-clip-yaxis$/.test(t))return null;var n=ct.navigator?ct.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0:!1;return"url("+(n?"":bt.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this,r=e.config,n=e.state,i=n.margin,a=n.width,o=n.height,s=r.axis_rotated,u=Math.max(30,i.left)-(s?0:20),l=s?-(1+u):-(u-1),c=-Math.max(15,i.top),f=s?i.left+20:a+10+u,h=(s?i.top+o+10:i.bottom)+20;t.attr("x",l).attr("y",c).attr("width",f).attr("height",h)},setYAxisClipPath:function(t){var e=this,r=e.config,n=e.state,i=n.margin,a=n.width,o=n.height,s=r.axis_rotated,u=Math.max(30,i.left)-(s?20:0),l=r.axis_y_inner,c=l?-1:s?-(1+u):-(u-1),f=-(s?20:i.top),h=(s?a+15+u:i.left+20)+(l?20:0),d=(s?i.bottom:i.top+o)+10;t.attr("x",c).attr("y",f).attr("width",h).attr("height",d)},updateXAxisTickClip:function(){var t=this,e=t.config,r=t.state,n=r.clip,i=r.xAxisHeight,a=t.$el.defs,o=t.getHorizontalAxisHeight("x");if(a&&!n.idXAxisTickTexts){var s=n.id+"-xaxisticktexts";t.appendClip(a,s),n.pathXAxisTickTexts=t.getClipPath(n.idXAxisTickTexts),n.idXAxisTickTexts=s}!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&o!==i&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=o},setXAxisTickClipWidth:function(){var t=this,e=t.config,r=t.state.current.maxTickWidths,n=t.getAxisTickRotate("x");if(!e.axis_x_tick_multiline&&n){var i=Math.sin(Math.PI/180*Math.abs(n));r.x.clipPath=(t.getHorizontalAxisHeight("x")-20)/i}else r.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this,e=t.state,r=e.clip,n=e.current,i=t.$el.svg;i&&i.select("#"+r.idXAxisTickTexts+" rect").attr("width",n.maxTickWidths.x.clipPath).attr("height",30)}},nl=function(t){return P(t.position)||"end"},il=function(t){return t.position==="start"?4:t.position==="middle"?0:-4};function al(t,e,r){return function(n){var i=t?0:e;return n.position==="start"?i=t?-r:0:n.position==="middle"&&(i=(t?-r:e)/2),i}}function ol(t,e){e==="grid"&&t.each(function(){var r=F(this);["x1","x2","y1","y2"].forEach(function(n){return r.attr(n,Math.ceil(+r.attr(n)))})})}var Og={hasGrid:function(){var t=this.config;return["x","y"].some(function(e){return t["grid_"+e+"_show"]||t["grid_"+e+"_lines"].length})},initGrid:function(){var t=this;t.hasGrid()&&t.initGridLines(),t.initFocusGrid()},initGridLines:function(){var t=this,e=t.config,r=t.state.clip,n=t.$el;(e.grid_x_lines.length||e.grid_y_lines.length)&&(n.gridLines.main=n.main.insert("g","."+v.chart+(e.grid_lines_front?" + *":"")).attr("clip-path",r.pathGrid).attr("class",v.grid+" "+v.gridLines),n.gridLines.main.append("g").attr("class",v.xgridLines),n.gridLines.main.append("g").attr("class",v.ygridLines),n.gridLines.x=Gr([]))},updateXGrid:function(t){var e=this,r=e.config,n=e.scale,i=e.state,a=e.$el,o=a.main,s=a.grid,u=r.axis_rotated,l=e.generateGridData(r.grid_x_type,n.x),c=e.axis.isCategorized()?e.axis.x.tickOffset():0,f=function(h){return(n.zoom||n.x)(h)+c*(u?-1:1)};i.xgridAttr=u?{x1:0,x2:i.width,y1:f,y2:f}:{x1:f,x2:f,y1:0,y2:i.height},s.x=o.select("."+v.xgrids).selectAll("."+v.xgrid).data(l),s.x.exit().remove(),s.x=s.x.enter().append("line").attr("class",v.xgrid).merge(s.x),t||s.x.each(function(){var h=F(this);Object.keys(i.xgridAttr).forEach(function(d){h.attr(d,i.xgridAttr[d]).style("opacity",function(){return h.attr(u?"y1":"x1")===(u?i.height:0)?"0":"1"})})})},updateYGrid:function(){var t=this,e=t.config,r=t.state,n=t.$el,i=n.grid,a=n.main,o=e.axis_rotated,s=t.axis.y.tickValues()||t.scale.y.ticks(e.grid_y_ticks),u=function(l){return Math.ceil(t.scale.y(l))};i.y=a.select("."+v.ygrids).selectAll("."+v.ygrid).data(s),i.y.exit().remove(),i.y=i.y.enter().append("line").attr("class",v.ygrid).merge(i.y),i.y.attr("x1",o?u:0).attr("x2",o?u:r.width).attr("y1",o?0:u).attr("y2",o?r.height:u),ol(i.y,"grid")},updateGrid:function(t){var e=this,r=e.$el,n=r.grid,i=r.gridLines;!i.main&&e.initGridLines(),n.main.style("visibility",e.hasArcType()?"hidden":"visible"),e.hideGridFocus(),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function(t){var e=this,r=e.config,n=e.$el,i=n.gridLines,a=n.main,o=r.axis_rotated;r.grid_x_show&&e.updateXGrid();var s=a.select("."+v.xgridLines).selectAll("."+v.xgridLine).data(r.grid_x_lines);s.exit().transition().duration(t).style("opacity","0").remove();var u=s.enter().append("g");u.append("line").style("opacity","0"),u.append("text").attr("transform",o?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),s=u.merge(s),s.attr("class",function(l){return(v.xgridLine+" "+(l.class||"")).trim()}).select("text").attr("text-anchor",nl).attr("dx",il).transition().duration(t).text(function(l){return l.text}).transition().style("opacity","1"),i.x=s},updateYGridLines:function(t){var e=this,r=e.config,n=e.state,i=n.width,a=n.height,o=e.$el,s=r.axis_rotated;r.grid_y_show&&e.updateYGrid();var u=o.main.select("."+v.ygridLines).selectAll("."+v.ygridLine).data(r.grid_y_lines);u.exit().transition().duration(t).style("opacity","0").remove();var l=u.enter().append("g");l.append("line").style("opacity","0"),l.append("text").attr("transform",s?"rotate(-90)":"").style("opacity","0"),u=l.merge(u);var c=e.yv.bind(e);u.attr("class",function(f){return(v.ygridLine+" "+(f.class||"")).trim()}).select("line").transition().duration(t).attr("x1",s?c:0).attr("x2",s?c:i).attr("y1",s?0:c).attr("y2",s?a:c).transition().style("opacity","1"),u.select("text").attr("text-anchor",nl).attr("dx",il).transition().duration(t).attr("dy",-5).attr("x",al(s,i,a)).attr("y",c).text(function(f){return f.text}).transition().style("opacity","1"),o.gridLines.y=u},redrawGrid:function(t){var e=this,r=e.config.axis_rotated,n=e.state,i=n.width,a=n.height,o=e.$el.gridLines,s=e.xv.bind(e),u=o.x.select("line"),l=o.x.select("text");return u=(t?u.transition():u).attr("x1",r?0:s).attr("x2",r?i:s).attr("y1",r?s:0).attr("y2",r?s:a),l=(t?l.transition():l).attr("x",al(!r,i,a)).attr("y",s).text(function(c){return c.text}),[u.style("opacity","1"),l.style("opacity","1")]},initFocusGrid:function(){var t=this,e=t.config,r=t.state.clip,n=t.$el,i=e.grid_front,a="."+v[i&&n.gridLines.main?"gridLines":"chart"]+(i?" + *":""),o=n.main.insert("g",a).attr("clip-path",r.pathGrid).attr("class",v.grid);n.grid.main=o,e.grid_x_show&&o.append("g").attr("class",v.xgrids),e.grid_y_show&&o.append("g").attr("class",v.ygrids),e.interaction_enabled&&e.grid_focus_show&&(o.append("g").attr("class",v.xgridFocus).append("line").attr("class",v.xgridFocus),e.grid_focus_y&&!e.tooltip_grouped&&o.append("g").attr("class",v.ygridFocus).append("line").attr("class",v.ygridFocus))},showGridFocus:function(t){var e=this,r=e.config,n=e.state,i=n.width,a=n.height,o=r.axis_rotated,s=e.$el.main.selectAll("line."+v.xgridFocus+", line."+v.ygridFocus),u=(t||[s.datum()]).filter(function(f){return f&&P(e.getBaseValue(f))});if(!(!r.tooltip_show||u.length===0||e.hasType("bubble")||e.hasArcType())){var l=r.grid_focus_edge&&!r.tooltip_grouped,c=e.xx.bind(e);s.style("visibility","visible").data(u.concat(u)).each(function(f){var h=F(this),d={x:c(f),y:e.getYScaleById(f.id)(f.value)},g;if(h.classed(v.xgridFocus))g=o?[null,d.x,l?d.y:i,d.x]:[d.x,l?d.y:null,d.x,a];else{var p=e.axis.getId(f.id)==="y2";g=o?[d.y,l&&!p?d.x:null,d.y,l&&p?d.x:a]:[l&&p?d.x:null,d.y,l&&!p?d.x:i,d.y]}["x1","y1","x2","y2"].forEach(function(m,_){return h.attr(m,g[_])})}),ol(s,"grid"),e.showCircleFocus&&e.showCircleFocus(t)}},hideGridFocus:function(){var t=this,e=t.state,r=e.inputType,n=e.resizing,i=t.$el.main;(r==="mouse"||!n)&&(i.selectAll("line."+v.xgridFocus+", line."+v.ygridFocus).style("visibility","hidden"),t.hideCircleFocus&&t.hideCircleFocus())},updateGridFocus:function(){var t=this,e=t.state,r=e.inputType,n=e.width,i=e.height,a=e.resizing,o=t.$el.grid,s=o.main.select("line."+v.xgridFocus);if(r==="touch")s.empty()?a&&t.showCircleFocus():t.showGridFocus();else{var u=t.config.axis_rotated;s.attr("x1",u?0:-10).attr("x2",u?n:-10).attr("y1",u?-10:0).attr("y2",u?-10:i)}return!0},generateGridData:function(t,e){var r=this,n=r.$el.main.select("."+v.axisX).selectAll(".tick").size(),i=[];if(t==="year")for(var a=r.getXDomain(),o=a[0].getFullYear(),s=a[1].getFullYear(),u=o;u<=s;u++)i.push(new Date(u+"-01-01 00:00:00"));else i=e.ticks(10),i.length>n&&(i=i.filter(function(l){return String(l).indexOf(".")<0}));return i},getGridFilterToRemove:function(t){return t?function(e){var r=!1;return(K(t)?t.concat():[t]).forEach(function(n){("value"in n&&e.value===n.value||"class"in n&&e.class===n.class)&&(r=!0)}),r}:function(){return!0}},removeGridLines:function(t,e){var r=this,n=r.config,i=r.getGridFilterToRemove(t),a=function(l){return!i(l)},o=e?v.xgridLines:v.ygridLines,s=e?v.xgridLine:v.ygridLine;r.$el.main.select("."+o).selectAll("."+s).filter(i).transition().duration(n.transition_duration).style("opacity","0").remove();var u="grid_"+(e?"x":"y")+"_lines";n[u]=n[u].filter(a)}},Fg={initRegion:function(){var t=this,e=t.$el;e.region.main=e.main.append("g").attr("clip-path",t.state.clip.path).attr("class",v.regions)},updateRegion:function(t){var e=this,r=e.config,n=e.$el;n.region.main||e.initRegion(),n.region.main.style("visibility",e.hasArcType()?"hidden":"visible");var i=n.main.select("."+v.regions).selectAll("."+v.region).data(r.regions);i.exit().transition().duration(t).style("opacity","0").remove(),i=i.enter().append("g").merge(i).attr("class",e.classRegion.bind(e)),i.append("rect").style("fill-opacity","0"),n.region.list=i},redrawRegion:function(t){var e=this,r=e.$el.region.list.select("rect");return r=(t?r.transition():r).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?r.transition():r).style("fill-opacity",function(n){return P(n.opacity)?n.opacity:"0.1"}).on("end",function(){F(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var r=this,n=r.config,i=r.scale,a=n.axis_rotated,o=t==="x",s="start",u,l=0;return e.axis==="y"||e.axis==="y2"?(o||(s="end"),(o?a:!a)&&s in e&&(u=i[e.axis],l=u(e[s]))):(o?!a:a)&&s in e&&(u=i.zoom||i.x,l=u(r.axis.isTimeSeries()?Bt.call(r,e[s]):e[s])),l},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var r=this,n=r.config,i=r.scale,a=r.state,o=n.axis_rotated,s=t==="width",u=r[s?"regionX":"regionY"](e),l,c="end",f=a[t];return e.axis==="y"||e.axis==="y2"?(s||(c="start"),(s?o:!o)&&c in e&&(l=i[e.axis],f=l(e[c]))):(s?!o:o)&&c in e&&(l=i.zoom||i.x,f=l(r.axis.isTimeSeries()?Bt.call(r,e[c]):e[c])),f<u?0:f-u},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||t.axis==="x"}},zg={getAxisSize:function(t){var e=this,r=e.config.axis_rotated;return r&&t==="x"||!r&&/y2?/.test(t)?e.getAxisWidthByAxisId(t,!0):e.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){var r=this;if(r.axis){var n=r.axis&&r.axis.getLabelPositionById(t);return r.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)}else return 40},getHorizontalAxisHeight:function(t){var e=this,r=e.config,n=e.state,i=n.current,a=n.rotatedPadding,o=n.isLegendRight,s=n.isLegendInset,u=r.axis_rotated,l=30;if(t==="x"&&!r.axis_x_show)return 8;if(t==="x"&&r.axis_x_height)return r.axis_x_height;if(t==="y"&&!r.axis_y_show)return r.legend_show&&!o&&!s?10:1;if(t==="y2"&&!r.axis_y2_show)return a.top;var c=e.getAxisTickRotate(t);return(t==="x"&&!u||/y2?/.test(t)&&u)&&c&&(l=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(c))/180),!r.axis_x_tick_multiline&&i.height&&l>i.height/2&&(l=i.height/2)),l+(e.axis.getLabelPositionById(t).isInner?0:10)+(t==="y2"&&!u?-10:0)},getEventRectWidth:function(){return Math.max(0,this.axis.x.tickInterval())},getAxisTickRotate:function(t){var e=this,r=e.axis,n=e.config,i=e.state,a=e.$el,o=n["axis_"+t+"_tick_rotate"];if(t==="x"){var s=r.isCategorized()||r.isTimeSeries();if(n.axis_x_tick_fit&&s){var u=n.axis_x_tick_count,l=i.current.maxTickWidths.x.ticks.length,c=0;u?c=u>l?l:u:l&&(c=l),c!==i.axis.x.tickCount&&(i.axis.x.padding=e.axis.getXAxisPadding(c)),i.axis.x.tickCount=c}a.svg&&n.axis_x_tick_fit&&!n.axis_x_tick_multiline&&!n.axis_x_tick_culling&&n.axis_x_tick_autorotate&&s&&(o=e.needToRotateXAxisTickTexts()?n.axis_x_tick_rotate:0)}return o},needToRotateXAxisTickTexts:function(){var t=this,e=t.state,r=e.axis,n=e.current,i=n.width-t.getCurrentPaddingLeft(!1)-t.getCurrentPaddingRight(),a=r.x.tickCount+r.x.padding.left+r.x.padding.right,o=t.axis.getMaxTickWidth("x"),s=a?i/a:0;return o>s}},Pg={data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},Ng={axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]},Xg={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},Bg={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},Yg=Lt(Lt(Lt({axis_rotated:!1},Ng),Xg),Bg),Vg={grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0},Hg=[Tg,wg,$g,Ag,Mg,Sg,kg,Cg],Ug=[Lg,jg,Dg,Ig,Og,Fg,zg],Gg=[Pg,Yg,Vg];var Wg={initLine:function(){var t=this.$el;t.line=t.main.select("."+v.chart).append("g").attr("class",v.chartLines)},updateTargetsForLine:function(t){var e=this,r=e.$el,n=r.area,i=r.line,a=r.main,o=e.getChartClass("Line"),s=e.getClass("lines",!0),u=e.classFocus.bind(e);i||e.initLine();var l=t.filter(function(h){return!(e.isScatterType(h)||e.isBubbleType(h))}),c=a.select("."+v.chartLines).selectAll("."+v.chartLine).data(l).attr("class",function(h){return o(h)+u(h)}),f=c.enter().append("g").attr("class",o).style("opacity","0").style("pointer-events","none");f.append("g").attr("class",s),e.hasTypeOf("Area")&&e.initArea(!n&&f.empty()?c:f),e.updateTargetForCircle(l,f)},updateLine:function(t,e){e===void 0&&(e=!1);var r=this,n=r.format.extraLineClasses,i=r.$el,a=e?i.subchart:i,o=a.main.selectAll("."+v.lines).selectAll("."+v.line).data(r.lineData.bind(r));o.exit().transition().duration(t).style("opacity","0").remove(),a.line=o.enter().append("path").attr("class",function(s){return r.getClass("line",!0)(s)+" "+(n(s)||"")}).style("stroke",r.color).merge(o).style("opacity",r.initialOpacity.bind(r)).style("shape-rendering",function(s){return r.isStepType(s)?"crispEdges":""}).attr("transform",null)},redrawLine:function(t,e,r){r===void 0&&(r=!1);var n=(r?this.$el.subchart:this.$el).line;return[(e?n.transition(Dn()):n).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function(t){var e=this,r=e.config.axis_rotated&&e.isStepType(t);return r?function(n){var i=e.getInterpolate(t)(n);return i.orgPoint=i.point,i.pointRotated=function(a,o){this._point===1&&(this._point=2);var s=this._y*(1-this._t)+o*this._t;this._context.lineTo(this._x,s),this._context.lineTo(a,s),this._x=a,this._y=o},i.point=function(a,o){this._point===0?this.orgPoint(a,o):this.pointRotated(a,o)},i}:e.getInterpolate(t)},generateDrawLine:function(t,e){var r=this,n=r.config,i=r.scale,a=n.line_connectNull,o=n.axis_rotated,s=r.generateGetLinePoints(t,e),u=r.getYScaleById.bind(r),l=function(d){return(e?r.subxx:r.xx).call(r,d)},c=function(d,g){return r.isGrouped(d.id)?s(d,g)[0][1]:u(d.id,e)(r.getBaseValue(d))},f=zi();f=o?f.x(c).y(l):f.x(l).y(c),a||(f=f.defined(function(d){return r.getBaseValue(d)!==null}));var h=e?i.subX:i.x;return function(d){var g=u(d.id,e),p=a?r.filterRemoveNull(d.values):d.values,m=0,_=0,y;if(r.isLineType(d)){var T=n.data_regions[d.id];T?y=r.lineWithRegions(p,h,g,T):(r.isStepType(d)&&(p=r.convertValuesToStep(p)),y=f.curve(r.getCurve(d))(p))}else p[0]&&(m=h(p[0].x),_=g(p[0].value)),y=o?"M "+_+" "+m:"M "+m+" "+_;return y||"M 0 0"}},lineWithRegions:function(t,e,r,n){var i=this,a=i.config,o=a.axis_rotated,s=i.axis.isTimeSeries(),u=i.axis.isCategorized()?.5:0,l=[],c="2 2",f,h,d,g,p=function(j,ut){for(var V=0,rt=void 0;rt=ut[V];V++)if(rt.start<j&&j<=rt.end)return rt.style;return!1};if(Q(n))for(var m=function(j,ut){return xt(j)?ut:s?Bt.call(i,j):j},_=0,y=void 0;y=n[_];_++){var T=m(y.start,t[0].x),x=m(y.end,t[t.length-1].x),$=y.style||{dasharray:c};l[_]={start:T,end:x,style:$}}for(var b=o?function(j){return r(j.value)}:function(j){return e(j.x)},w=o?function(j){return e(j.x)}:function(j){return r(j.value)},C=function(j){return"M"+j[0][0]+","+j[0][1]+"L"+j[1][0]+","+j[1][1]},D=s?function(j,ut,V,rt){var wt=j.x.getTime(),gt=ut.x-j.x,S=new Date(wt+gt*V),I=new Date(wt+gt*(V+rt)),nt=o?[[r(h(V)),e(S)],[r(h(V+d)),e(I)]]:[[e(S),r(h(V))],[e(I),r(h(V+d))]];return C(nt)}:function(j,ut,V,rt){var wt=o?[[r(h(V),!0),e(f(V))],[r(h(V+rt),!0),e(f(V+rt))]]:[[e(f(V),!0),r(h(V))],[e(f(V+rt),!0),r(h(V+rt))]];return C(wt)},O={x:i.axis.getAxisType("x"),y:i.axis.getAxisType("y")},k="",_=0,M=void 0;M=t[_];_++){var L=t[_-1],E=L&&P(L.value),$=p(M.x,l);if(!!P(M.value)){if(xt(l)||!$||!E)k+=""+(_&&E?"L":"M")+b(M)+","+w(M);else if(E){try{$=$.dasharray.split(" ")}catch(V){$=c.split(" ")}f=we(O.x,L.x+u,M.x+u),h=we(O.y,L.value,M.value);var B=e(M.x)-e(L.x),W=r(M.value)-r(L.value),q=Math.sqrt(Math.pow(B,2)+Math.pow(W,2));d=$[0]/q,g=d*$[1];for(var J=d;J<=1;J+=g)k+=D(L,M,J,d),J+g>=1&&(k+=D(L,M,1,0))}}}return k},isWithinStep:function(t,e){return Math.abs(e-oe(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return e===!0||K(e)&&e.indexOf(t.id)!==-1}},Ve=function(){return Dn()},qg={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){var e=t||this.config.point_type;return Pt(e)&&U(e.create)&&U(e.update)},initialOpacityForCircle:function(t){var e=this,r=e.config,n=e.state.withoutFadeIn,i=r.point_opacity;return xt(i)&&(i=this.getBaseValue(t)!==null&&n[t.id]?this.opacityForCircle(t):"0"),i},opacityForCircle:function(t){var e=this.config,r=e.point_opacity;return xt(r)&&(r=e.point_show&&!e.point_focus_only?"1":"0",r=P(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":r:"0"),r},initCircle:function(){var t=this,e=t.$el.main;t.point=t.generatePoint(),(t.hasType("bubble")||t.hasType("scatter"))&&e.select("."+v.chartCircles).empty()&&e.select("."+v.chart).append("g").attr("class",v.chartCircles)},updateTargetForCircle:function(t,e){var r=this,n=this,i=n.config,a=n.data,o=n.$el,s=i.interaction_enabled&&i.data_selection_enabled,u=s&&i.data_selection_isselectable,l=n.getClass("circles",!0);if(!!i.point_show){!o.circle&&n.initCircle();var c=t,f=e;if(!c){c=a.targets.filter(function(d){return r.isScatterType(d)||r.isBubbleType(d)});var h=o.main.select("."+v.chartCircles).style("pointer-events","none").selectAll("."+v.circles).data(c).attr("class",l);h.exit().remove(),f=h.enter()}s&&f.append("g").attr("class",function(d){return n.generateClass(v.selectedCircles,d.id)}),f.append("g").attr("class",l).style("cursor",function(d){return u&&u(d)?"pointer":null}),s&&c.forEach(function(d){o.main.selectAll("."+v.selectedCircles+n.getTargetSelectorSuffix(d.id)).selectAll(""+v.selectedCircle).each(function(g){g.value=d.values[g.index].value})})}},updateCircle:function(t){t===void 0&&(t=!1);var e=this,r=e.config,n=e.state,i=e.$el,a=r.point_focus_only,o=t?i.subchart:i;if(r.point_show&&!n.toggling){var s=o.main.selectAll("."+v.circles).selectAll("."+v.circle).data(function(u){return e.isLineType(u)&&e.shouldDrawPointsForLine(u)||e.isBubbleType(u)||e.isRadarType(u)||e.isScatterType(u)?a?[u.values[0]]:u.values:[]});s.exit().remove(),s.enter().filter(Boolean).append(e.point("create",this,e.pointR.bind(e),e.color)),o.circle=o.main.selectAll("."+v.circles+" ."+v.circle).style("stroke",e.color).style("opacity",e.initialOpacityForCircle.bind(e))}},redrawCircle:function(t,e,r,n,i){i===void 0&&(i=!1);var a=this,o=a.state.rendered,s=a.$el,u=i?s.subchart:s,l=u.main.selectAll("."+v.selectedCircle);if(!a.config.point_show)return[];var c=a.point("update",a,t,e,a.color,r,n,l),f=a.isCirclePoint()?"c":"",h=Dn(),d=a.opacityForCircle.bind(a),g=[];return u.circle.each(function(p){var m=c.bind(this)(p);m=(r||!o?m.transition(h):m).style("opacity",d),g.push(m)}),[g,(r?l.transition():l).attr(f+"x",t).attr(f+"y",e)]},showCircleFocus:function(t){var e=this,r=e.config,n=e.state,i=n.hasRadar,a=n.resizing,o=n.toggling,s=n.transiting,u=e.$el,l=u.circle;if(s===!1&&r.point_focus_only&&l){var c=(i?e.radarCircleX:e.circleX).bind(e),f=(i?e.radarCircleY:e.circleY).bind(e),h=o||xt(t),d=e.point("update",e,c,f,e.color,a?!1:h);t&&(l=l.filter(function(g){var p=t.filter(function(m){return m.id===g.id});return p.length?F(this).datum(p[0]):!1})),l.attr("class",this.updatePointClass.bind(this)).style("opacity","1").each(function(g){var p=g.id,m=g.index,_=g.value,y="hidden";P(_)&&(d.bind(this)(g),e.expandCircles(m,p),y=""),this.style.visibility=y})}},hideCircleFocus:function(){var t=this,e=t.config,r=t.$el.circle;e.point_focus_only&&r&&(t.unexpandCircles(),r.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(t){t===void 0&&(t=!1);var e=this,r=e.generateGetLinePoints(e.getShapeIndices(e.isLineType),t);return function(n,i){var a=n.id;return e.isGrouped(a)?r(n,i)[0][1]:e.getYScaleById(a,t)(e.getBaseValue(n))}},getCircles:function(t,e){var r=this,n=P(t)?"-"+t:"";return(e?r.$el.main.selectAll("."+v.circles+r.getTargetSelectorSuffix(e)):r.$el.main).selectAll("."+v.circle+n)},expandCircles:function(t,e,r){var n=this,i=n.pointExpandedR.bind(n);r&&n.unexpandCircles();var a=n.getCircles(t,e).classed(v.EXPANDED,!0),o=i(a)/n.config.point_r,s=1-o;n.isCirclePoint()?a.attr("r",i):a.each(function(){var u=F(this);if(this.tagName==="circle")u.attr("r",i);else{var l=this.getBBox(),c=l.width,f=l.height,h=s*(+u.attr("x")+c/2),d=s*(+u.attr("y")+f/2);u.attr("transform","translate("+h+" "+d+") scale("+o+")")}})},unexpandCircles:function(t){var e=this,r=e.pointR.bind(e),n=e.getCircles(t).filter(function(){return F(this).classed(v.EXPANDED)}).classed(v.EXPANDED,!1);n.attr("r",r),!e.isCirclePoint()&&n.attr("transform","scale("+r(n)/e.config.point_r+")")},pointR:function(t){var e=this,r=e.config,n=r.point_r,i=n;return e.isBubbleType(t)?i=e.getBubbleR(t):U(n)&&(i=n.bind(e.api)(t)),i},pointExpandedR:function(t){var e=this,r=e.config,n=e.isBubbleType(t)?1.15:1.75;return r.point_focus_expand_enabled?r.point_focus_expand_r||e.pointR(t)*n:e.pointR(t)},pointSelectR:function(t){var e=this,r=e.config.point_select_r;return U(r)?r(t):r||e.pointR(t)*4},isWithinCircle:function(t,e){var r=oe(this.state.event,t),n=F(t),i=this.isCirclePoint(t)?"c":"",a=+n.attr(i+"x"),o=+n.attr(i+"y");if(!(a||o)&&t.nodeType===1){var s=Dr(t),u=s.x,l=s.y;a=u,o=l}return Math.sqrt(Math.pow(a-r[0],2)+Math.pow(o-r[1],2))<(e||this.config.point_sensitivity)},insertPointInfoDefs:function(t,e){var r=this,n=function(u,l){for(var c=u.attributes,f=0,h;h=c[f];f++)h=h.name,l.setAttribute(h,u.getAttribute(h))},i=new DOMParser().parseFromString(t,"image/svg+xml"),a=i.documentElement,o=bt.createElementNS(Gt.svg,a.nodeName.toLowerCase());if(o.id=e,o.style.fill="inherit",o.style.stroke="inherit",n(a,o),a.childNodes&&a.childNodes.length){var s=F(o);"innerHTML"in o?s.html(a.innerHTML):Ir(a.childNodes).forEach(function(u){n(u,s.append(u.tagName).node())})}r.$el.defs.node().appendChild(o)},pointFromDefs:function(t){return this.$el.defs.select("#"+t)},updatePointClass:function(t){var e=this,r=e.$el.circle,n=!1;return(et(t)||r)&&(n=t===!0?r.each(function(i){var a=e.getClass("circle",!0)(i);this.getAttribute("class").indexOf(v.EXPANDED)>-1&&(a+=" "+v.EXPANDED),this.setAttribute("class",a)}):e.getClass("circle",!0)(t)),n},generateGetLinePoints:function(t,e){var r=this,n=r.config,i=r.getShapeX(0,t,e),a=r.getShapeY(e),o=r.getShapeOffset(r.isLineType,t,e),s=r.getYScaleById.bind(r);return function(u,l){var c=s.call(r,u.id,e)(r.getShapeYMin(u.id)),f=o(u,l)||c,h=i(u),d=a(u);n.axis_rotated&&(u.value>0&&d<c||u.value<0&&c<d)&&(d=c);var g=[h,d-(c-f)];return[g,g,g,g]}},generatePoint:function(){var t=this,e=t.config,r=t.state.datetimeId,n=[],i=at(e.point_pattern)?e.point_pattern:[e.point_type];return function(a,o){for(var s=[],u=2;u<arguments.length;u++)s[u-2]=arguments[u];return function(l){var c=t.getTargetSelectorSuffix(l.id||l.data&&l.data.id||l),f=F(this);n.indexOf(c)<0&&n.push(c);var h=i[n.indexOf(c)%i.length];if(t.hasValidPointType(h))h=t[h];else if(!t.hasValidPointDrawMethods(h)){var d=r+"-point"+c,g=t.pointFromDefs(d);if(g.size()<1&&t.insertPointInfoDefs(h,d),a==="create")return t.custom.create.bind(o).apply(void 0,Tt([f,d],s));if(a==="update")return t.custom.update.bind(o).apply(void 0,Tt([f],s))}return h[a].bind(o).apply(void 0,Tt([f],s))}}},custom:{create:function(t,e,r,n){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",n).node()},update:function(t,e,r,n,i,a,o){var s=t.node().getBBox(),u=s.width,l=s.height,c=function(g){return e(g)-u/2},f=function(g){return r(g)-l/2},h=t;if(i){var d=Ve();a&&h.attr("x",c),h=h.transition(d),o&&o.transition(Ve())}return h.attr("x",c).attr("y",f).style("fill",n)}},circle:{create:function(t,e,r){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",r).node()},update:function(t,e,r,n,i,a,o){var s=this,u=t;if(s.hasType("bubble")&&u.attr("r",s.pointR.bind(s)),i){var l=Ve();a&&u.attr("cx",e),u.attr("cx")&&(u=u.transition(l)),o&&o.transition(Ve())}return u.attr("cx",e).attr("cy",r).style("fill",n)}},rectangle:{create:function(t,e,r){var n=function(i){return e(i)*2};return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",n).attr("height",n).style("fill",r).node()},update:function(t,e,r,n,i,a,o){var s=this,u=s.config.point_r,l=function(d){return e(d)-u},c=function(d){return r(d)-u},f=t;if(i){var h=Ve();a&&f.attr("x",l),f=f.transition(h),o&&o.transition(Ve())}return f.attr("x",l).attr("y",c).style("fill",n)}}};var v$=Dt.radarPoints;var Zg={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"};var Kg={line_connectNull:!1,line_step_type:"step",line_zerobased:!1,line_classes:void 0,line_point:!0};var Qg={spline_interpolation_type:"cardinal"};var m$={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50};function Jg(t,e){Nt(da.prototype,Ug.concat(t)),Nt(ga.prototype,Hg),ha.setOptions(Gg.concat(e||[]))}function tp(t,e){Jg([qg,Wg].concat(t||[])),ha.setOptions([Zg,Kg].concat(e||[]))}var pa=function(){return tp(void 0,[Qg]),(pa=function(){return G.SPLINE})()};function ep(t,e){var r=e[0],n=e[1];return t.every(function(i,a){return a===0?i>=r:i<=n})}var rp=function(t){var e=this.internal,r=e.config,n=e.scale,i=t,a;if(r.zoom_enabled&&i){if(e.axis.isTimeSeries()&&(i=i.map(function(s){return Bt.bind(e)(s)})),ep(i,e.getZoomDomain())){if(e.api.tooltip.hide(),r.subchart_show){var o=n.zoom||n.x;e.brush.getSelection().call(e.brush.move,[o(i[0]),o(i[1])]),a=i}else n.x.domain(i),n.zoom=n.x,e.axis.x.scale(n.zoom),a=n.zoom.orgDomain();e.redraw({withTransition:!0,withY:r.zoom_rescale,withDimension:!1}),e.setZoomResetButton(),ot(r.zoom_onzoom,e.api,a)}}else a=n.zoom?n.zoom.domain():n.x.orgDomain();return a};Nt(rp,{enable:function(t){var e=this.internal,r=e.config;/^(drag|wheel)$/.test(t)&&(r.zoom_type=t),r.zoom_enabled=!!t,e.zoom?t===!1&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,r=e.config,n=e.org.xDomain;return(t===0||t)&&(r.zoom_x_max=se("max",[n[1],t])),r.zoom_x_max},min:function(t){var e=this.internal,r=e.config,n=e.org.xDomain;return(t===0||t)&&(r.zoom_x_min=se("min",[n[0],t])),r.zoom_x_min},range:function(t){var e=this.zoom;if(et(t)){var r=t.min,n=t.max;Q(r)&&e.min(r),Q(n)&&e.max(n)}return{min:e.min(),max:e.max()}}});var np={drag:function(t){var e=this,r=e.config,n=e.state,i=e.$el.main,a=r.data_selection_grouped,o=r.interaction_enabled&&r.data_selection_isselectable;if(!(e.hasArcType()||!r.data_selection_enabled||r.zoom_enabled&&!e.zoom.altDomain||!r.data_selection_multiple)){var s=n.dragStart||[0,0],u=s[0],l=s[1],c=t[0],f=t[1],h=Math.min(u,c),d=Math.max(u,c),g=a?n.margin.top:Math.min(l,f),p=a?n.height:Math.max(l,f);i.select("."+v.dragarea).attr("x",h).attr("y",g).attr("width",d-h).attr("height",p-g),i.selectAll("."+v.shapes).selectAll("."+v.shape).filter(function(m){return o&&o.bind(e.api)(m)}).each(function(m,_){var y=F(this),T=y.classed(v.SELECTED),x=y.classed(v.INCLUDED),$=!1,b;if(y.classed(v.circle)){var w=+y.attr("cx")*1,C=+y.attr("cy")*1;b=e.togglePoint,$=h<w&&w<d&&g<C&&C<p}else if(y.classed(v.bar)){var D=Ld(this),w=D.x,C=D.y,O=D.width,k=D.height;b=e.togglePath,$=!(d<w||w+O<h)&&!(p<C||C+k<g)}else return;$^x&&(y.classed(v.INCLUDED,!x),y.classed(v.SELECTED,!T),b.call(e,!T,y,m,_))})}},dragstart:function(t){var e=this,r=e.config,n=e.state,i=e.$el.main;e.hasArcType()||!r.data_selection_enabled||(n.dragStart=t,i.select("."+v.chart).append("rect").attr("class",v.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){var t=this,e=t.config,r=t.$el.main;t.hasArcType()||!e.data_selection_enabled||(r.select("."+v.dragarea).transition().duration(100).style("opacity","0").remove(),r.selectAll("."+v.shape).classed(v.INCLUDED,!1),t.setDragStatus(!1))}},x$=Lt(Lt({},np),{selectPoint:function(t,e,r){var n=this,i=n.config,a=n.$el.main,o=i.axis_rotated,s=(o?n.circleY:n.circleX).bind(n),u=(o?n.circleX:n.circleY).bind(n),l=n.pointSelectR.bind(n);ot(i.data_onselected,n.api,e,t.node()),a.select("."+v.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+v.selectedCircle+"-"+r).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(v.selectedCircle,r)}).attr("cx",s).attr("cy",u).attr("stroke",n.color).attr("r",function(c){return n.pointSelectR(c)*1.4}).transition().duration(100).attr("r",l)},unselectPoint:function(t,e,r){var n=this,i=n.config,a=n.$el;ot(i.data_onunselected,n.api,e,t.node()),a.main.select("."+v.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+v.selectedCircle+"-"+r).transition().duration(100).attr("r",0).remove()},togglePoint:function(t,e,r,n){var i=(t?"":"un")+"selectPoint";this[i](e,r,n)},selectPath:function(t,e){var r=this,n=r.config;ot(n.data_onselected,r.api,e,t.node()),n.interaction_brighten&&t.transition().duration(100).style("fill",function(){return re(r.color(e)).brighter(.75)})},unselectPath:function(t,e){var r=this,n=r.config;ot(n.data_onunselected,r.api,e,t.node()),n.interaction_brighten&&t.transition().duration(100).style("fill",function(){return r.color(e)})},togglePath:function(t,e,r,n){this[(t?"":"un")+"selectPath"](e,r,n)},getToggle:function(t,e){var r=this;return t.nodeName==="path"?r.togglePath:r.isStepType(e)?function(){}:r.togglePoint},toggleShape:function(t,e,r){var n=this,i=n.config,a=n.$el.main,o=F(t),s=o.classed(v.SELECTED),u=n.getToggle(t,e).bind(n),l;if(i.data_selection_enabled&&i.data_selection_isselectable.bind(n.api)(e)){if(!i.data_selection_multiple){var c="."+v.shapes;i.data_selection_grouped&&(c+=n.getTargetSelectorSuffix(e.id)),a.selectAll(c).selectAll("."+v.shape).each(function(f,h){var d=F(this);d.classed(v.SELECTED)&&(l=d,u(!1,d.classed(v.SELECTED,!1),f,h))})}(!l||l.node()!==o.node())&&(o.classed(v.SELECTED,!s),u(!s,o,e,r))}}});var va={},sl={version:"3.0.3",generate:function(t){var e=Be({},va,t),r=new ga(e);return r.internal.charts=this.instance,this.instance.push(r),r},defaults:function(t){return et(t)&&(va=t),va},instance:[],plugin:{}};var ma=class{constructor(){this._container=document.getElementById("chart");this._dataLimit=10;this._timeStamps=[];this._electricSeries={name:"Electric Consumption (W)",color:"#0000EF",data:new Array(this._dataLimit)};this._gasSeries={name:"Gas Consumption (m\xB3 / h)",color:"#EFEF00",data:new Array(this._dataLimit)};let e=this.getNextValues();for(let r=0;r<this._dataLimit;++r)this._timeStamps.push(e.timeStamp);for(let r=0;r<this._electricSeries.data.length;++r)this._electricSeries.data[r]=e.electric;for(let r=0;r<this._gasSeries.data.length;++r)this._gasSeries.data[r]=e.gas;this._chart=sl.generate({bindto:this._container,point:{show:!1},data:{x:"x",columns:[["x",...this._timeStamps],[this._electricSeries.name,...this._electricSeries.data],[this._gasSeries.name,...this._gasSeries.data]],colors:{[this._electricSeries.name]:this._electricSeries.color,[this._gasSeries.name]:this._gasSeries.color},type:pa()},grid:{y:{show:!0}},resize:{auto:!0},axis:{x:{type:"timeseries",tick:{format:"%H:%M:%S",culling:!1},label:{text:"Time",position:"outer-center"}}}}),setInterval(()=>{let r=this.getNextValues(),n=1/50*Math.sign(Math.random()<.5?-1:1),i=1/50*Math.sign(Math.random()<.5?-1:1),a=this._electricSeries.data[this._electricSeries.data.length-1]+r.electric*n,o=this._gasSeries.data[this._gasSeries.data.length-1]+r.gas*i;this._chart.flow({columns:[["x",new Date().getTime()],[this._electricSeries.name,a],[this._gasSeries.name,o]]})},1e3)}getNextValues(){return{timeStamp:new Date().getTime(),electric:Math.random()*100,gas:Math.random()*100}}};var ul=class{constructor(){this._chartManager=new ma}},$$=new ul;})();
/*!
* Copyright (c) 2017 ~ present NAVER Corp.
 * billboard.js project is licensed under the MIT license
 * 
 * billboard.js, JavaScript chart library
 * https://naver.github.io/billboard.js/
 * 
 * @version 3.0.3
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
